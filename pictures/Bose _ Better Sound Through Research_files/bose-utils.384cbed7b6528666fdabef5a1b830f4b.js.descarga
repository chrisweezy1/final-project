var Bose=Bose||{};Bose.Utils=Bose.Utils||{},Bose.Utils=function(){function a(a,b){return $jq(a.toArray().sort(function(a,c){return parseInt(a.getAttribute(b),10)-parseInt(c.getAttribute(b),10)}))}function b(){$jq.fn.matchHeight._applyDataApi()}function c(){var a,b=$jq("<div>").addClass("hide"),c=$jq("<div>").css("background-image",'url("/etc/designs/bose/base2016/design/images/high-contrast-mode-check.gif")');b.append(c),$jq("main").append(b),a="none"===c.css("background-image"),b.remove(),a&&$jq("html").addClass("bose-highContrastMode")}function d(){return $jq("html").hasClass("bose-highContrastMode")}function e(a,b,c,d){var e=a.replace("#",""),f=$jq('a[name="'+e+'"]'),g=d||0;f.length&&(c?$jq("html,body").animate({scrollTop:f.offset().top-g},"slow"):$jq("html,body").scrollTop(f.offset().top-g))}function f(a){var b=a.attr("src"),c=b.replace(".svg",".png");a.attr("src",c)}function g(a){var b=new RegExp("[\\?#&]"+a+"=([^?#&]*)"),c=b.exec(location.hash);return null===c?"":decodeURIComponent(c[1])}function h(a,b){var c=Bose.Utils.updatedHashParam(window.location.hash,a,b);window.location.hash=c}function i(a,b,c){if(void 0===a)return"";if(void 0===b||void 0===c)return a;var d=b+"="+encodeURIComponent(c),e=new RegExp("^(.*?)(#.*)?$"),f=a.replace(e,"$1"),g=a.replace(e,"$2"),h=new RegExp("([?#&]?)("+b+"=[^&#]*)([&]*)");return g.match(h)?g=g.replace(h,"$1"+d+"$3"):(""!==g&&(d="&"+d),g+=d),0!==g.indexOf("#")&&(g="#"+g),f+g}function j(){return location.href}function k(){var a=B();return a[a.length-1].split(".").shift()}function l(a){var b=new Image;return b.src=$jq(a).attr("src"),b.width}function m(a){var b=new Image;return b.src=$jq(a).attr("src"),b.height}function n(a){Bose.Utils.initElements(a),Bose.Search.initResults($jq(".bose-search"))}function o(a){Bose.Select.init(a),void 0!==Bose.VariantDDSelector&&Bose.VariantDDSelector.init(),void 0!==Bose.ColorSelector&&Bose.ColorSelector.init(),void 0!==Bose.ArticleAppliesTo&&Bose.ArticleAppliesTo.init(),Bose.Utils.reMatchHeights(),Bose.Button.init(),Bose.Checkbox.init(),void 0!==Bose.ProductDrawer&&Bose.ProductDrawer.init(),a&&a.imagesLoaded(Bose.Utils.reMatchHeights),Bose.TextArea.init(),Bose.TextField.init(),Bose.SelectNewBrand.init()}function p(){for(var a in history.state)if(history.state.hasOwnProperty(a)){for(var b=a.split("."),c=window,d=0;d<b.length;d++)c=c[b[d]];"function"==typeof c&&c(history.state[a])}}function q(a,b){return JSON.stringify(a)===JSON.stringify(b)}function r(a){var b=a.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(location.search);return null===d||d.length<2?"":decodeURIComponent(d[1].replace(/\+/g," "))}function s(a){window.location=a}function t(){return window.location}function u(a){return window.location.reload(a)}function v(a,b,c,d){return window.open(a,b,c,d)}function w(a,b){var c,d=Bose.DataLayer.Data.Page;if(d){var e=d.formattedLocale;e&&(Granite.I18n.setUrlPrefix("/bin/i18n/dict."),Granite.I18n.setLocale(e))}return c=b?Granite.I18n.get(a,b):Granite.I18n.get(a),y(c)}function x(a){return a.map(w)}function y(a){return a.replace("[i]","").replace("[/i]","").replace("[b]","").replace("[/b]","")}function z(a,b){a.removeClass(function(a,c){return(c.match(b)||[]).join(" ")})}function A(a){var b=void 0===a?window.location.pathname:a,c=b.split("/");return""===c[0]&&c.shift(),c}function B(){return A(window.location.pathname)}function C(){delete N.category.cache.pathArray}function D(){var a,b=N.category.cache.pathArray;return b||(b=Bose.Utils.getCurrentPathSegments(),b.shift(),a=b.indexOf("products"),-1!==a&&b.splice(a,1),b.length>0&&(b[b.length-1]=b[b.length-1].split(".")[0]),N.category.cache.pathArray=b,b)}function E(){return"undefined"!=typeof CQ&&void 0!==CQ.WCM&&(CQ.WCM.isEditMode(!0)||CQ.WCM.isDesignMode(!0))}function F(a,b,c){return a.split(b).filter(function(a){return a===c}).length>0}function G(){var a=Cookies.get("cq-authoring-mode");if(void 0!==a){if("touch"===a.toLowerCase())return"TouchUI";if("classic"===a.toLowerCase())return"ClassicUI"}return!1}function H(){var a=Cookies.get("cq-editor-layer"),b="";return void 0!==a?a.toLowerCase():void 0!==(b=Cookies.get("wcmmode"))&&b.toLowerCase()}function I(a){if(a)return a.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")}function J(a){return void 0===a?"":a}function K(a){$jq("body").css("overflow-y",a?"auto":"hidden")}function L(a){for(var b={},c=a.querySelectorAll("input, select, textarea"),d=0;d<c.length;++d){var e=c[d],f=e.name,g=e.value;f&&(b[f]=g)}return b}function M(){return(new Date).getTime()}var N={category:{cache:{pathArray:""}}};return{getSortedByAttribute:a,reMatchHeights:b,detectHighContrastMode:c,highContrastMode:d,scrollToAnchor:e,changeSvgSrcToPng:f,getURLHashParam:g,updateURLHashParam:h,updatedHashParam:i,getCurrentHref:j,getCurrentPath:k,getImageNativeWidth:l,getImageNativeHeight:m,initElementsSSI:n,initElements:o,onPopState:p,compareArrays:q,getParameterByName:r,setWindowLocation:s,getWindowLocation:t,reloadPage:u,getGraniteTranslation:w,getGraniteTranslations:x,removeMarkup:y,removeClassViaRegex:z,getCategoryPathSegments:D,clearCategoryCache:C,getPathSegments:A,openWindow:v,getCurrentPathSegments:B,isAuthorMode:E,stringArrayContains:F,getAuthorMode:G,getEditorLayer:H,formatTelephoneNumber:I,sanitizeSelector:J,toggleBodyScrolling:K,getSerializedData:L,getTimeInMilliSeconds:M}}();
$jq(document).ready(function(){Bose.Utils.detectHighContrastMode(),window.addEventListener("popstate",function(){Bose.Utils.onPopState()},!1),setTimeout(Bose.Utils.onPopState,1)});
