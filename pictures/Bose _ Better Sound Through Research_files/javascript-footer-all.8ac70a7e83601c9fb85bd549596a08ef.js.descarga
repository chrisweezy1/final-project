$jq(window).load(function(){$jq(document).trigger("window.load")});var Bose=Bose||{};Bose.WebStorage=Bose.WebStorage||{},Bose.WebStorage=function(){"use strict";function a(a,b,c){switch(c||f.storageType){case"sessionStorage":Modernizr.sessionstorage?sessionStorage.setItem(a,b):e(c);break;case"localStorage":Modernizr.localstorage?localStorage.setItem(a,b):e(c)}}function b(a,b){var c="";switch(b||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&(c=sessionStorage.getItem(a));break;case"localStorage":Modernizr.localstorage&&(c=localStorage.getItem(a))}return c}function c(a,b){if(void 0===a)d(b);else switch(b||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&sessionStorage.removeItem(a);break;case"localStorage":Modernizr.localstorage&&localStorage.removeItem(a)}}function d(a){switch(a||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&sessionStorage.clear();break;case"localStorage":Modernizr.localstorage&&localStorage.clear()}}function e(a){Bose.DTM.track(a+"NotSupportedOnBrowser")}var f={storageType:"localStorage"};return{storeData:a,getData:b,clearData:c,_defaults:f}}();var Bose=Bose||{};Bose.DTM=function(){"use strict";function a(){b()}function b(){var a,b,c=Bose.WebStorage.getData("analyticsBuffer","sessionStorage"),d=Bose.DataLayer.Data.Order||{},e=[];if(c){if(a=JSON.parse(c),b=void 0===a.eventData.variantCode?null:a.eventData.variantCode.toString(),Bose.DataLayer.setWebStorageVariable("event",a.event),!$jq.isEmptyObject(d))for(var f=0;f<d.details.length;f++)if(d.details[f].variantCode===b){e.push(d.details[f]);break}Bose.DataLayer.setVariable("Order","deltaDetails",e);for(var g in a.eventData)a.eventData.hasOwnProperty(g)&&Bose.DataLayer.setWebStorageVariable(g,a.eventData[g]);a.trackRule&&$(a.event),Bose.WebStorage.clearData("analyticsBuffer","sessionStorage"),Bose.WebStorage.clearData("deltaDetails","sessionStorage")}}function c(a,b){switch(b.closest("form").data(ea.event)){case"contactus_contactusdetails":d();break;default:e(b.closest(".bose-cta"))}}function d(){var a=$jq(".messageTopic option:selected");Z("contact_us_submitted",{messageTopicValue:a.val(),messageTopicText:a.text()},!0)}function e(a){if(a.length){var b=a.data("orderable");if(void 0!==b&&b){Y("cart_add",{categoryCode:a.data("categoryCode"),variantCode:a.data("variantCode"),variantSku:a.data("variantSku")})}}}function f(){$("storelocator_location_search")}function g(){$("storelocator_store_click")}function h(){$("variant_changed")}function i(){$("resellerOverlayOpened")}function j(a,b){Bose.DataLayer.setProductVariable("resellerName",b),$("resellerLinkClicked")}function k(a,b){Bose.DataLayer.setProductVariable("resellerName",b),$("resellerDirectLinkClicked")}function l(){$("crossSellView")}function m(){$("crossSellAdd")}function n(){$("B2BAssetDownload")}function o(){$("myAccountSignInEntry")}function p(){$("myAccountSignInSucceeded")}function q(){$("B2BLogInSucceeded")}function r(){Bose.DataLayer.setPageVariable("B2BCheckoutSuccess","checkout|success"),$("B2BCheckoutSucceeded")}function s(){$("myAccountSignOut")}function t(){$("myAccountPasswordResetEntry")}function u(){$("myAccountRegistrationEntry")}function v(){$("myAccountSuccessfulPasswordReset")}function w(){$("myAccountSuccessfulAccountCreation")}function x(){$("myAccountOrderHistoryTotalOrders")}function y(){$("myAccountDefaultPageTrack")}function z(){$("warrantyPage")}function A(){$("issueCategoryChosen")}function B(){$("myProductsQuickLinkClick")}function C(){$("myProductsFormValidationError")}function D(){$("myProductsFormSubmissionError")}function E(){$("myProductsError")}function F(){$("myProductsAddProductCTAInteraction")}function G(){$("myProductsFindProductCTAInteraction")}function H(){$("myProductsAddProductSuccess")}function I(){$("myProductsSuccessfulSearchSubmit")}function J(){$("myAccountDashboardProducts")}function K(){$("myAccountCtaActions")}function L(){$("findMySerialNumber")}function M(){$("trackMyAccountEditProfileSuccess")}function N(){$("viewTroubleShootingArticle")}function O(){$("tsArticleCustomerRanking")}function P(){$("snOverlayError")}function Q(){$("productResultsSuccessfulSN")}function R(a,b){$(b)}function S(a,b){Bose.DataLayer.setError(b),$("form_validation_error")}function T(){$("form_b2b_login_error")}function U(){$("form_b2b_checkout_error")}function V(a,b,c,d){var e=b?"articleYes":"articleNo",f=c?"Submitted":"",g=d?"Comment":"No";Bose.DataLayer.setArticleVariable("helpfulResult",g),$(e+f)}function W(a,b,c){Bose.DataLayer.Data.ProductRegistration={details:c,country:b},$("productRegistration_register")}function X(a,b){"step_productRegistrationConfirmation"===b&&$("productRegistration_success")}function Y(a,b){b.newCart=!1,"cart_add"===a&&void 0===Cookies.get("HybrisCart")&&(b.newCart=!0),Z(a,b,!0)}function Z(a,b,c){var d=c||!1,e={event:a,eventData:b,trackRule:d};Bose.WebStorage.storeData("analyticsBuffer",JSON.stringify(e),"sessionStorage")}function $(a){if("undefined"==typeof _satellite||void 0===a)return!1;var b=a;if(a instanceof $jq){if(void 0!==a.data(ea.skipEvent))return!1;b=a.data(ea.event)}return void 0!==b&&null!==b&&(_satellite.track(b),!0)}function _(){if("undefined"==typeof _satellite)return"";var a=_satellite.getVisitorId();return a?a.getMarketingCloudVisitorID():""}function aa(){$("cart_modalDisplayed")}function ba(a,b){Bose.DataLayer.setSection("Order",b),$("cart_remove")}function ca(a,b){Bose.DataLayer.setSection("Order",b),$("cart_add")}function da(a,b,c,d){var e={trackName:b,totalDuration:c,currentDuration:d};Bose.DataLayer.setDrowsyPlayerVariable("DrowsyPlayer",e),$("audio_track_change")}var ea={event:"dtmEvent",skipEvent:"dtmSkip"};return function fa(){$jq(document).on("forms.actualSubmit",c),$jq(document).on("product.trackVariantChanged",h),$jq(document).on("trackResellerOverlay",i),$jq(document).on("trackResellerLink",j),$jq(document).on("trackResellerDirectLink",k),$jq(document).on("trackCrossSellView",l),$jq(document).on("trackCrossSellAdd",m),$jq(document).on("trackB2BDownloadAssets",n),$jq(document).on("forms.trackFormLoaded",R),$jq(document).on("forms.validationError",S),$jq(document).on("forms.B2BCheckoutErrorTrack",U),$jq(document).on("forms.B2BloginErrorTrack",T),$jq(document).on("productRegistration.submitRegistration",W),$jq(document).on("formFlowStepOpened",X),$jq(document).on("storeLocator.location",f),$jq(document).on("storeLocator.storeClick",g),$jq(document).on("formYesNoClick",V),$jq(document).on("cart.modalDisplayed",aa),$jq(document).on("cart.productRemoved",ba),$jq(document).on("cart.productAdded",ca),$jq(document).on("trackSignInView",o),$jq(document).on("trackSignInSuccess",p),$jq(document).on("trackB2BLoginSuccess",q),$jq(document).on("trackB2BCheckoutSuccess",r),$jq(document).on("trackSignOut",s),$jq(document).on("trackPasswordEntry",t),$jq(document).on("trackRegistrationEntry",u),$jq(document).on("trackSuccessfulPasswordReset",v),$jq(document).on("trackSuccessfulAccountCreation",w),$jq(document).on("trackOrderHistoryTotalOrders",x),$jq(document).on("trackUserStatus",y),$jq(document).on("trackTroubleShootingArticles",N),$jq(document).on("trackTroubleShootingArticleCustomerResponse",O),$jq(document).on("trackWarrantyOfferPage",z),$jq(document).on("trackProductIssueList",A),$jq(document).on("trackSerialNumber",P),$jq(document).on("trackProductIssue",Q),$jq(document).on("trackFindMySerialNumber",L),$jq(document).on("trackQuickLinkClick",B),$jq(document).on("trackFormValidationError",C),$jq(document).on("trackFormSubmissionError",D),$jq(document).on("trackMyProductsError",E),$jq(document).on("trackAddProductCTAInteraction",F),$jq(document).on("trackFindProductCTAInteraction",G),$jq(document).on("trackAddProductSuccess",H),$jq(document).on("trackSuccessfulSearchSubmit",I),$jq(document).on("myAccountDashboardProducts",J),$jq(document).on("audioPlayer.TrackChange",da),$jq(document).on("trackMyAccountCtaActions",K),$jq(document).on("trackMyAccountEditProfileSuccess",M)}(),{init:a,track:$,getVisitorID:_}}();var Bose=Bose||{};Bose.VariantChangeListener=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,e){c($jq(a.target.activeElement).closest(d.container).find(d.variantElements),e)}function c(a,b){a.each(function(a,c){var d=$jq(c);Bose.Utils.stringArrayContains(d.data("variant-codes"),", ",b)?d.addClass(e.variantSelected):d.removeClass(e.variantSelected)})}var d={container:".js-variantChangeContainer",variantElements:".js-variantChangeListener__option"},e={variantSelected:"bose-variantChangeListener__option--selected"};return{init:a,_selectors:d,_classes:e}}();var Bose=Bose||{};Bose.BrightcovePlayer=function(){function a(){b(),"undefined"==typeof videojs&&(r=setInterval(b,100),v.push(r))}function b(){"undefined"!=typeof videojs&&(d(),c(),e(),$jq(document).on("window.load",o),v.forEach(clearInterval))}function c(){var a,b,c,d,e=Bose.Utils.getURLHashParam(u.videoId);e&&(a=Bose.Utils.getURLHashParam(u.autoPlayMode),Bose.Utils.scrollToAnchor(e,null,!0),b=$jq(s.videoPlayerContainer).find("video"),b.each(function(){c=$jq(this),d=c.attr("id"),videojs(d).ready(function(){String(c.data("videoId"))===e&&"yes"===a.toLowerCase()&&i(this,!0)}),m(c,!0)}))}function d(){if(Gridle.isActive("large")){$jq(s.player).each(function(){var a=$jq(this),b=a.find("video"),c=b.attr("id");void 0!==c&&videojs(c).ready(function(){var b=this;a.hasClass(t.backgroundPlayer)&&(j(b,!0),h(b,!0),setTimeout(function(){l(b)}))})})}}function e(){$jq(s.player).each(function(){var a=$jq(this),b=a.find("video"),c=b.attr("id");void 0!==c&&videojs(c).ready(function(){var c=this;if(a.hasClass(t.posterImgOnSmall))return void(Gridle.isActive("small")&&(b.attr("muted",""),h(c,!0),k(c,!1),a.find(".vjs-big-play-button").css("display","none"),a.find(".vjs-poster").css("display","block"),a.find(".vjs-tech").css("display","none"),a.find(".vjs-control-bar").css("display","none"),g(b,c)));a.hasClass(t.loopedPlayer)&&j(c,!0),a.hasClass(t.showPlayerControls)||(k(c,!1),a.find(".vjs-control-bar").first().css("display","none")),a.hasClass(t.scrollToViewPlayer)&&(h(c,!0),f(b,c)),Gridle.on("update",function(){a.hasClass(t.scrollToViewPlayer)&&(h(c,!0),f(b,c))}),m(b,!0)})})}function f(a,b){(Gridle.isActive("small")||Gridle.isActive("medium"))&&a.attr("muted",""),a.waypoint({handler:function(a){"down"===a?(i(b,!0),l(b)):"up"===a&&(i(b,!1),n(b))},offset:"80%"}),a.waypoint({handler:function(a){"down"===a?(i(b,!1),n(b)):"up"===a&&(i(b,!0),l(b))},offset:a.height()>$jq(window).height()?"-60%":"-20%"})}function g(a,b){var c;b.off(),c=b.getChild("posterImage"),c.off()}function h(a,b){a.muted(b)}function i(a,b){a.autoplay(b)}function j(a,b){a.loop(b)}function k(a,b){a.controls(b)}function l(a){a.play()}function m(a,b){a.attr("playsinline",b)}function n(a){a.pause()}function o(){var a=$jq(s.videoPlayerContainer).find("video");"en"!==Bose.DataLayer.Data.Page.language&&a.each(p)}function p(){var a=$jq(this);videojs(a.attr("id")).ready(q)}function q(){var a,b,c=this.playlist(),d=$jq("#"+this.id_).closest(s.videoPlayerContainer).find(s.playlistItems),e=Bose.DataLayer.Data.Page.language;c.forEach(function(c){void 0!==(a=c.customFields[e])&&d.each(function(d,e){b=$jq(e).find(s.playlistDescription),b.text()===c.description&&b.text(a)})})}var r,s={player:".bose-brightcovePlayer",videoPlayerContainer:".brightcove-container",playlistItems:".vjs-playlist-item",playlistDescription:".vjs-playlist-description"},t={loopedPlayer:"js-bose-brightcovePlayer--loopvideo",showPlayerControls:"js-bose-brightcovePlayer--showplayercontrols",backgroundPlayer:"bose-brightcovePlayer--background",scrollToViewPlayer:"js-bose-brightcovePlayer--scrollToView",posterImgOnSmall:"js-bose-brightcovePlayer--posterImgOnSmall"},u={videoId:"videoId",autoPlayMode:"autoPlay"},v=[];return{init:a,muteVideo:h,autoplayVideo:i,loopVideo:j,controlVideo:k,playVideo:l,addPlaysinline:m,pauseVideo:n,hashParams:u,_classes:t}}();var Bose=Bose||{};Bose.Story=function(){function a(){var a=$jq(g.dynamicStoryBlock);$jq(g.videoStoryBlock).each(function(){var a=$jq(this);"Media"===a.data("backgroundType")&&b(a),Gridle.isActive("large")||c(a)}),a.each(function(){d($jq(this))})}function b(a){var b=a.find("video");"undefined"!=typeof videojs&&videojs(b.attr("id")).ready(function(){Bose.BrightcovePlayer.muteVideo(this,!0),Bose.BrightcovePlayer.autoplayVideo(this,!0),Bose.BrightcovePlayer.loopVideo(this,!0),Bose.BrightcovePlayer.addPlaysinline(b,!0)})}function c(a){var b=a.find(".bose-brightcovePlayer--background .vjs-poster"),c=a.find(".bose-brightcovePlayer--background .video-js .vjs-tech"),d=a.data("videoFocal");b.addClass(d),c.addClass(d)}function d(a){e(a),$jq(document).on("alertBarOpen",function(b){e(a),b.preventDefault()}),$jq(document).on("alertBarClosed",function(b){e(a),b.preventDefault()}),Gridle.on("update",function(){e(a)})}function e(a){f(a,!1),a.children(g.dynamicStoryBlockLayer).each(function(){f($jq(this),!0)})}function f(a,b){var c=a.height(),d=a.data("initialHeight"),e=$jq(g.headerContainer),f=e.innerHeight();a.css("height",""),c=a.height(),d&&!Gridle.isActive("small")?a.css("height","calc("+d+" - "+f+"px)"):b||a.height(c-f),b&&a.css("min-height","calc("+d+" - "+f+"px)")}var g={dynamicStoryBlock:".js-storyBlock__dynamicHeight",dynamicStoryBlockLayer:".bose-storyBlock__layer.bose-storyBlock__backgroundContainer",headerContainer:".bose-headercontainer",videoStoryBlock:".js-storyBlock__video"};return{init:a}}();var Bose=Bose||{};Bose.ExpandableContentContainer=function(){function a(a){b=$jq(a),b.hasClass(d.expandableContentContainerOpen)&&(b.find(c.expandableTitle).eq(0).addClass(d.expandableTitleActive),b.find(c.expandableContent).eq(0).addClass(d.expandableContentActive),b.find(c.expandableIcon).eq(0).addClass(d.expandableIconActive))}var b,c={expandableTitle:".bose-expandableContent__title",expandableContent:".bose-expandableContent__content",expandableIcon:".bose-expandableContent__icon"},d={expandableContentContainerOpen:"bose-expandableContentContainer--open",expandableTitleActive:"bose-expandableContent__title--active",expandableContentActive:"bose-expandableContent__content--active",expandableIconActive:"bose-expandableContent__icon--active"};return{init:a}}();var Bose=Bose||{};Bose.IconLoader=function(){function a(a,b){var c=$jq(".bose-iconLoader"+Bose.Utils.sanitizeSelector(a)),d=c.find(".bose-iconLoader__text");void 0!==b&&b.length?(d.text(b),d.show()):d.hide(),c.show()}function b(a){$jq(".bose-iconLoader"+Bose.Utils.sanitizeSelector(a)).hide()}function c(a,b,c){var e,f;c?(e=d(a,!1),f=Bose.Utils.sanitizeSelector(c),$jq(f).addClass(g.overlayWrapper)):(e=d(a,!0),f="body"),b?setTimeout(function(){Bose.Utils.toggleBodyScrolling(!1),$jq(f).append(e)},5):(Bose.Utils.toggleBodyScrolling(!0),$jq(f).append(e))}function d(a,b,c){var d={msg:a,clazz:(c||"")+(b?" bose-iconLoaderOverlay--page":"")},e=nano('<div class="bose-iconLoaderOverlay js-iconLoaderOverlay {clazz}"><div class="bose-iconLoaderOverlay__background"></div><div class="bose-iconLoaderOverlay__iconContainer"><div class="bose-iconLoaderOverlay__icon bose-iconLoader bose-iconLoader--newBrand"></div><p class="bose-iconLoaderOverlay__text">{msg}</p><div></div>',d),f=$jq(e);return void 0!==a&&0!==a.length||f.find(".bose-iconLoaderOverlay__text").remove(),f}function e(a){var b,c;a?(b=Bose.Utils.sanitizeSelector(a),$jq(b).removeClass(g.overlayWrapper),c=Bose.Utils.sanitizeSelector(a)+" "+f.overlay,$jq(c).remove()):($jq(f.overlayWrapper).removeClass(g.overlayWrapper),$jq(f.overlay).remove()),Bose.Utils.toggleBodyScrolling(!0)}var f={overlay:".js-iconLoaderOverlay",overlayWrapper:".bose-iconLoaderOverlay--wrapper"},g={overlayWrapper:"bose-iconLoaderOverlay--wrapper"};return{selectors:f,getTemplate:d,show:a,hide:b,showIconLoaderPageOverlay:c,removeIconLoaderPageOverlay:e}}();var Bose=Bose||{};Bose.Tabs=function(){function a(){E=$jq(B.tabBar).outerHeight()+$jq(B.stickyMsg).outerHeight()||0,u=$jq(B.tabBar),v=$jq(B.tabListItem),w=$jq(B.tabSection),x=$jq(B.tabSectionImage),y=w.first(),z=$jq(B.footer),Bose.Utils.isAuthorMode()||(b(),c(),e(),g())}function b(){$jq(document).on("click",B.tabListLink,q).on("click",B.tabMenuLink,q).on("click",B.tabMenuContainer,o).on("keydown",B.tabMenuContainer,n).on("keydown",B.tabMenuLink,p).on("socialImages.initialized",e).on("window.load",d),$jq(window).on("resize",d),x.on("load",d)}function c(){x.addClass("lazypreload")}function d(){clearTimeout(A),A=setTimeout(function(){$jq.waypoints("refresh")},D)}function e(){f(),u.waypoint("sticky",{handler:h}),y.waypoint({handler:i,offset:E}),w.waypoint({handler:j,offset:E}),w.waypoint({handler:k,offset:function(){return E-this.offsetHeight}}),z.waypoint({handler:m,offset:u.outerHeight()})}function f(){u.waypoint("unsticky"),u.waypoint("destroy"),y.waypoint("destroy"),w.waypoint("destroy"),z.waypoint("destroy")}function g(){var a=Bose.Utils.getURLHashParam(Bose.BrightcovePlayer.hashParams.videoId),b=Bose.Utils.getURLHashParam(Bose.BazaarVoice.hashParams.submit),c=0,d=window.location.hash;!d||a||b||(d.indexOf("ProductTabs_")>-1&&(c=E),Bose.Utils.scrollToAnchor(d,null,!0,c))}function h(){$jq(B.stickyMsg).slideToggle(500,function(){d()})}function i(a){var b=$jq("#PrimaryCta_tab");"down"===a?b.css("visibility","visible"):"up"===a&&b.css("visibility","hidden")}function j(a){"down"===a&&l($jq(this))}function k(a){"up"===a&&l($jq(this))}function l(a){var b=$jq(B.tabListItem+"#"+a.data("id"));v.removeClass(C.tabActive),b.addClass(C.tabActive)}function m(a){var b=z.offset().top||0;"down"===a?u.css({position:"absolute",top:b-u.outerHeight()}):"up"===a&&u.attr("style","")}function n(a){["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&(o(),a.preventDefault())}function o(){var a=$jq(B.tabMenuContainer),b=$jq(B.tabMenu);F?(a.attr("aria-expanded","false"),b.removeClass("-show"),F=!1):(a.attr("aria-expanded","true"),b.addClass("-show"),b.find(B.tabMenuLink).first().focus(),F=!0)}function p(a){var b=$jq(B.tabMenuContainer),c=$jq(B.tabMenuLink).first().get(0),d=$jq(B.tabMenuLink).last().get(0),e=document.activeElement,f=$jq(this);["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&(o(),"Enter"===a.key?f.click():(b.focus(),a.stopPropagation())),"ArrowDown"===a.key&&e!==d&&$jq(e).parent().next().find(B.tabMenuLink).focus(),"ArrowUp"===a.key&&e!==c&&$jq(e).parent().prev().find(B.tabMenuLink).focus(),["ArrowUp","ArrowDown","Spacebar"," "].indexOf(a.key)>-1&&a.preventDefault()}function q(){var a=$jq(this),b=a.data("anchorName");t(b),r(b)}function r(a){var b,c,d,e;"EcommerceArea"===a?e=$jq(".js-cta__primary:visible"):(b=$jq(B.tabSection+'[data-id="'+a+'"]'),c=w.index(b),d=w.slice(c),d.each(function(){var a=$jq(this).find(":tabbable");if(a.length)return e=a.first(),!1})),$jq(document).one("keydown",function(a){e&&"Tab"===a.key&&(e.focus(),a.preventDefault())})}function s(){e(),g()}function t(a){var b=E-2;"EcommerceArea"!==a||$jq(B.tabBar).hasClass("-js-virtualTabBar")||(b=0),Bose.Utils.scrollToAnchor(a,null,!0,b)}var u,v,w,x,y,z,A,B={tabBar:".bose-tabBar",stickyMsg:".bose-tabBar__stickyMsg",tabMenuContainer:".bose-tabBarTabs__selectContainer",tabMenu:".bose-tabBarTabs__select__options",tabMenuLink:".bose-tabBarTabs__select__item",tabListItem:".bose-tabBarTabs__listItem",tabListLink:".bose-tabBarTabs__listItem a",tabSection:".bose-tabContent__content",tabSectionImage:".bose-tabContent__content img",footer:".bose-footer"},C={tabActive:"bose-tabBarTabs__listItem--active"},D=250,E=0,F=!1;return{init:a,resetWaypoints:s,scrollToAnchorWithStickyMsg:t,_DEBOUNCE_TIMEOUT:D,_selectors:B,_classes:C}}();var Bose=Bose||{};Bose.Tooltip=function(){function a(){$jq(".bose-tooltipButton").each(function(){b($jq(this))})}function b(a,b){a.qtip($jq.extend(!0,c(a),b))}function c(a){return{content:{text:a.next(".bose-tooltipContent"),title:a.data("title")},position:{my:"bottom right",at:"top center",target:a,viewport:$jq(window),adjust:{method:"shift none"}},style:{classes:"bose-tooltip"},show:{event:"click"},hide:{event:"click unfocus"}}}function d(a,b,c,d,e){var f=$jq(a),g=f.qtip("api");if(g&&void 0!==g)g.set("content.text",b);else{var h=f.attr("id");f.qtip({content:b,id:c&&0!==c.length?c:h,style:{classes:"bose-tooltip bose-tooltip--text"},position:{my:"bottom left",at:"top left",adjust:{x:10}},show:{event:d},hide:{event:e}})}}function e(a){var b=$jq(a);if(!b.qtip("api"))return!1;b.qtip("destroy",!0)}function f(a){var b=$jq(a),c=b.qtip("api");if(!c)return!1;c.show()}function g(a){var b=$jq(a),c=b.qtip("api");if(!c)return!1;c.hide()}return{init:a,initTooltip:b,addTo:d,removeFrom:e,show:f,hide:g}}();var Bose=Bose||{};Bose.Button=function(){function a(){$jq(".bose-button[onclick]").each(function(){var a=$jq(this);void 0===a.data("onclick")&&(a.data("onclick",this.onclick),this.onclick=function(b){if(a.hasClass(h.loading)||a.hasClass(h.completed))return!1;a.hasClass(h.loadingAfterClick)&&a.trigger("setLoading"),a.data("onclick").call(this,b||window.event)},a.bind("setDefault",d),a.bind("setLoading",e),a.bind("setCompleted",f),a.bind("setError",g))}),$jq("."+h.printBtn).on("click",function(){window.print()})}function b(a){a.removeClass("bose-button--completed bose-button--error bose-button--loading")}function c(a,c){b(a),a.addClass(c)}function d(){b($jq(this))}function e(){c($jq(this),h.loading)}function f(){c($jq(this),h.completed)}function g(){c($jq(this),h.error)}var h={loading:"bose-button--loading",completed:"bose-button--completed",error:"bose-button--error",loadingAfterClick:"bose-button--setLoadingAfterClick",printBtn:"js-printBtn"};return{init:a,setLoading:e,setDefault:d}}();var Bose=Bose||{};Bose.Header=function(){function a(){C.$header=$jq(".bose-header2016"),C.$topNavExpandableItem=C.$header.find(A.topNavExpandableItem),C.$searchForm=C.$header.find(".bose-singleInputForm--searchTop2016"),C.$duplicateSearch=C.$header.find('.bose-serviceBar2016__search[data-open-button="true"]'),C.$searchContainer=C.$header.find(".bose-header2016__search"),C.$searchInput=C.$searchForm.find(".bose-singleInputForm__input"),C.$serviceBarIcons=C.$header.find("."+A.serviceBarIcon),C.$topNavContainer=C.$header.find("."+A.topNavContainer),C.$hamburger=C.$header.find(".bose-hamburger"),d(),e(),Bose.AlertBar.init(),f(),g(),i(),m(),k(),"p=SOFTOPTIN;t=0"===$jq(A.cookieBar).data("privacy-initial")&&(u=Bose.DataLayer.Data.Page.referrerUrl,t=window.location.href.indexOf("cookie_policy"),""!==u&&-1===t&&$jq(A.cookieBar).find(".bose-infoBar2016__closeArea > a").click()),$jq("a").on("click",function(a){v=$jq(a.target).parent(A.languageCookiePopup).is(A.languageCookiePopup),x=$jq(a.target).is(A.cookieBar),w=$jq(a.target).parents(A.cookieBar).is(A.cookieBar),y=$jq(a.target).parents(A.alertInforBar).is(A.alertInforBar),z=$jq(a.target).parents(A.geoLocationButtonContainer).is(A.geoLocationButtonContainer),"block"===$jq(A.cookieBar).css("display")&&"p=SOFTOPTIN;t=0"===$jq(A.cookieBar).data("privacy-initial")&&(x||w||v||y||z||$jq(A.cookieBar).find(".bose-infoBar2016__closeArea > a").click())}),"false"===$jq(A.contactPro).val()&&$jq(A.contactNavPro).hide()}function b(a){E=a}function c(a){D=a}function d(){var a,b,c=$jq(".bose-infoBar2016--cookie"),d=Bose.CookieStore.getPrivacyProfileCookie();void 0!==d&&(a=d.split(";")[0],b=c.data("privacy-consent").split(";")[0]),void 0===d||isNaN(E)||("1"!==Bose.CookiePrivacyProfile.getPrivacyProfile().initial&&(d.split(";").length>5&&(s=parseInt(d.split(";")[5].split("=")[1],10)),void 0!==s&&(F=E!==s)),d.indexOf("rss=1")>=0&&(!(D>=E)||d.indexOf("showCookieBar=1")>=0&&d.indexOf("CookieBarVisible=1")>=0)?D>=E&&F?Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile):a!==b&&Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile):Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile),""!==s&&!isNaN(s)||"p=NONE"===b||Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile))}function e(){Bose.CookiePrivacyProfile.updatePrivacyProfileCookie(),Bose.CookiePrivacyProfile.updateSatTrackCookie(),$jq(A.checkForResetDate).val(E);var a=$jq(".bose-infoBar2016--cookie"),b=parseInt($jq(A.checkForResetDate).val(),10);a.length&&(a.find(A.closeInfoBar+" > a").on("click",function(){a.find(A.closeInfoBar).hide(),a.slideUp(),!isNaN(E)&&!isNaN(b)&&D>=E?Bose.CookieStore.setPrivacyProfileCookie(a.data("privacy-consent")+";rss=1;showCookieBar=1;CookieBarVisible=1;resetDate="+b,{expires:365}):Bose.CookieStore.setPrivacyProfileCookie(a.data("privacy-consent")+";rss=1",{expires:365}),Bose.CookieStore.setSatTrack(!0)}),void 0!==Bose.CookiePrivacyProfile.getPrivacyProfile().initial&&(a.slideDown(),Bose.DataCapture.disable()))}function f(){var a,b,c,d=$jq('[class*="'+A.shoppingBag+'"]');void 0!==Bose.CookieStore.getCartAmount()&&Bose.CookieStore.getCartAmount()>0?(a=Bose.CookieStore.getCartAmount(),b=1===parseInt(a,10)?"1 item in shopping cart.":"{0} items in shopping cart.",c=Bose.Translation.getSiteTranslation(b).replace("{0}",a),d.attr("aria-label",c),a>20&&(a=""),Bose.Utils.removeClassViaRegex(d,/bose-serviceBar2016__icon--shoppingCartFull[0-9]*/g),d.addClass(A.shoppingBag+a)):(b="Your cart is empty.",c=Bose.Translation.getSiteTranslation(b),d.attr("aria-label",c),Bose.Utils.removeClassViaRegex(d,/bose-serviceBar2016__icon--shoppingCartFull[0-9]*/g),d.addClass(A.shoppingBag))}function g(){C.$topNavExpandableItem.find(".bose-navBar2016__btn").on("click",h)}function h(a){if(!Gridle.isActive("large")){var b=$jq(this),c=b.parent(A.topNavExpandableItem),d=c.siblings(A.topNavExpandableItem);a.preventDefault(),c.hasClass(B.open)?c.removeClass(B.open):(d.removeClass(B.open),c.addClass(B.open))}}function i(){C.$duplicateSearch.on("click",j)}function j(){return q(),C.$searchInput.focus(),!1}function k(){Gridle.isActive("small")||Gridle.isActive("medium")?$jq(A.languageSelector).on("click",function(a){a.preventDefault(),G=!0,p(G)}):($jq(A.languageSelector).on("click",function(a){a.preventDefault(),l()}),$jq("body").on("click",function(a){0===$jq(A.languageSelectorMain).find(a.target).length&&$jq(A.languageSelectorMain).removeClass("open")}))}function l(){$jq(A.languageSelectorMain).toggleClass("open")}function m(){C.$mobileAware=$jq("main, header, footer, .bose-header2016, .bose-navBar2016, .bose-header2016__servicebar .bose-serviceBar2016, .bose-singleInputForm--searchTop2016, .bose-header2016__search"),C.$header.find(".bose-header2016__hamburger").on("click",p),(Gridle.isActive("small")||Gridle.isActive("medium"))&&($jq(A.searchIcon).removeClass("hide"),C.$header.find(A.searchIcon).on("click",n))}function n(){$jq(document).trigger("header.mobileMenuOpened"),q(),o(),$jq(A.searchIcon).hide()}function o(){$jq(".bose-singleInputForm__globalSearch").focus()}function p(a){$jq("header").hasClass(B.open+B.mobileMenu)?r():q(a)}function q(a){var b=C.$hamburger.data("close-menu");$jq(document).trigger("header.mobileMenuOpened"),C.$mobileAware.addClass(B.open+B.mobileMenu),!0===a&&C.$mobileAware.addClass("bose-languageMobile"),C.$hamburger.addClass(B.is+B.active),C.$hamburger.attr({"aria-label":b,"aria-expanded":"true"}),C.$duplicateSearch.addClass(B.open+B.mobileMenu),$jq(A.searchIcon).hide()}function r(){var a=C.$hamburger.data("open-menu");$jq(document).trigger("header.mobileMenuClosed"),C.$topNavExpandableItem.removeClass(B.open),C.$mobileAware.removeClass(B.open+B.mobileMenu),C.$mobileAware.removeClass("bose-languageMobile"),C.$hamburger.removeClass(B.is+B.active),C.$hamburger.attr({"aria-label":a,"aria-expanded":"false"}),C.$duplicateSearch.removeClass(B.open+B.mobileMenu),$jq(A.searchIcon).show(),G=!1}var s,t,u,v,w,x,y,z,A={topNavExpandableItem:".bose-navBar2016__item:not(.-noChildren)",closeInfoBar:".bose-infoBar2016__closeArea",shoppingBag:"bose-serviceBar2016__icon--shoppingCartFull",serviceBarIcon:"bose-serviceBar2016__icon",topNavContainer:"bose-header2016__topnav",cookieBar:".bose-infoBar2016--cookie",languageCookiePopup:".bose-localeSelector__link",checkForResetDate:".checkForResetDate",alertInforBar:".bose-infoBar2016--alert",geoLocationButtonContainer:".bose-geolocation__buttonsContainer",searchIcon:".js-bose-searchIcon",contactPro:"#bose-serviceBar2016__contactPro",contactNavPro:".bose-navBar2016--contactusPro",languageSelectorMain:".bose-siteSelector",languageSelector:".bose-siteSelector__trigger",languageSelectorDropdown:".bose-siteSelector__nav"},B={open:"-open",closed:"-closed",active:"-active",is:"-is",hideClass:"--hide",mobileMenu:"MobileMenu"},C={},D=(new Date).getTime(),E=new Date($jq(A.cookieBar).data("privacy-reset-date")).getTime(),F=!1,G=!1;return{init:a,updateCartAmount:f,setAlertbarDate:b,setTodayDate:c,openMobileMenuSearchIcon:n}}();var Bose=Bose||{};Bose.AlertBar=function(){function a(){var a=$jq(c.alertBar);a.length&&(a.find(c.closeInfoBar+" > a").on("click",b),Bose.CookieStore.isAlertBarShown()&&a.slideDown(function(){$jq(document).trigger("alertBarOpen")}))}function b(){var a=$jq(c.alertBar);a.find(c.closeInfoBar).hide(),a.slideUp(),Bose.CookieStore.setAlertBarClosed()}var c={alertBar:".bose-infoBar2016--alert",closeInfoBar:".bose-infoBar2016__closeArea"};return{init:a}}();var Bose=Bose||{};Bose.Components=Bose.Components||{},Bose.Components.DynamicVideo=Bose.Components.DynamicVideo||{},Bose.Components.DynamicVideo.consts={POSTER_PATH_PREFIX:"../.."},Bose.Components.DynamicVideo.init=function(a){a.each(function(a,b){Bose.Components.DynamicVideo.makeVideo($jq(b),void 0,!1)})},Bose.Components.DynamicVideo.makeVideo=function(a,b,c){var d,e=a.find(".bose-videoContainer__viewerContainer"),f=e.attr("id"),g=a.data("viewer-params"),h=a.data("posterrenditions"),i=a.width(),j=Bose.Components.DynamicVideo.getPosterRendition(h,i);g.posterimage=Bose.Components.DynamicVideo.consts.POSTER_PATH_PREFIX+j,d={containerId:f,params:g},Bose.Components.DynamicVideo.createS7Viewer(a,d,b,c)},Bose.Components.DynamicVideo.createS7Viewer=function(a,b,c,d){if("undefined"!=typeof s7viewers){var e=a.find(".bose-videoContainer__viewerContainer"),f=e.data("initialized");if(void 0===f||!f||d){e.data("initialized",!0);var g=new s7viewers.VideoViewer(b);g.onInitComplete=c,g.init()}}},Bose.Components.DynamicVideo.getPosterRendition=function(a,b){if(void 0!==a){var c={width:0,rendition:void 0};return a.split(", ").forEach(function(a){var d=a.split(" "),e=d[0],f=parseInt(d[1].substring(0,d[1].length-1),10);(f<=b&&(c.width>b||f>c.width)||void 0===c.rendition)&&(c.width=f,c.rendition=e)}),c.rendition}};var Bose=Bose||{};Bose.ExpandableContent=Bose.ExpandableContent||{},Bose.ExpandableContent.init=function(a){Bose.ExpandableContent.$panelTitle=$jq(a),Bose.ExpandableContent.$panelTitle.not(".bose-expandableContent__title--disabled")&&(Bose.ExpandableContent.$panelTitle.on("click",Bose.ExpandableContent.slide),Bose.ExpandableContent.$panelTitle.on("keydown",Bose.ExpandableContent.captureKeys))},Bose.ExpandableContent.captureKeys=function(a){var b=a.key;"Spacebar"!==b&&"Enter"!==b&&""!==b||(a.preventDefault(),$jq(a.target).click())},Bose.ExpandableContent.slide=function(){Bose.ExpandableContent.$currentPanel=$jq(this);var a="true"===Bose.ExpandableContent.$currentPanel.attr("aria-expanded");return Bose.ExpandableContent.$currentPanel.toggleClass("bose-expandableContent__title--active"),Bose.ExpandableContent.$currentPanel.children(".bose-expandableContent__icon").toggleClass("bose-expandableContent__icon--active"),Bose.Utils.isAuthorMode()?Bose.ExpandableContent.$currentPanel.parent().nextAll().slideToggle("fast").toggleClass("bose-expandableContent__content--active"):Bose.ExpandableContent.$currentPanel.parent().next().slideToggle("fast").toggleClass("bose-expandableContent__content--active"),Bose.ExpandableContent.$currentPanel.attr("aria-expanded",!a),!1};var Bose=Bose||{};Bose.TextInput=Bose.TextInput||{},Bose.TextInput.classes={active:"bose-textInput--active",valid:"bose-textInput--valid",error:"bose-textInput--error",readOnly:"bose-textInput--readOnly",type:"input"},Bose.TextInput.selectors={container:".bose-textInput",field:".bose-textInput .bose-textInput__input",cardSection:".js-bose-cardSection"},Bose.TextInput.init=function(a,b){var c,d=b;void 0===d&&(d=Bose.TextInput),
c=a?a.find(d.selectors.field+":not([data-initialized])"):$jq(d.selectors.field+":not([data-initialized])"),c.on("focus",function(a){d.focus.call(this,a,d)}).on("blur",function(a){d.leave.call(this,a,d)}).on("blur paste keyup",function(a){d.doValidation.call(this,a,d)}).on("change input propertychange",function(a){d.change.call(this,a,d)}).bind("setDisabled",function(a){d.disableField.call(this,a,d)}).bind("setEnabled",function(a){d.enableField.call(this,a,d)}).bind("doValidation",function(a,b){d.doValidation.call(this,a,d,b)}),c.attr("data-initialized",!0),void 0!==Bose.CreditCardDetector&&Bose.CreditCardDetector.init()},Bose.TextInput.change=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container),e=d.hasClass(b.classes.valid)||d.hasClass(b.classes.error);""!==c.val()&&(e||b.setActive.call(this,a,b),void 0!==Bose.AddressValidation&&Bose.AddressValidation.dirtyAddress(c),c.trigger("keyup"))},Bose.TextInput.focus=function(a,b){b.setActive.call(this,a,b)},Bose.TextInput.leave=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container);Bose.TextInput.showErrorMessage(d)},Bose.TextInput.setActive=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container);d.hasClass(b.classes.readOnly)||d.addClass(b.classes.active)},Bose.TextInput.isValid=function(a,b){var c=a.closest(b.selectors.container);return!c.is(":visible")||!c.hasClass(b.classes.error)},Bose.TextInput.disableField=function(a,b){$jq(this).attr("readonly","readonly").closest(b.selectors.container).addClass(b.classes.readOnly)},Bose.TextInput.enableField=function(a,b){$jq(this).prop("readonly",!1).closest(b.selectors.container).removeClass(b.classes.readOnly)},Bose.TextInput.markValid=function(a,b){a.removeClass(b.classes.error).removeClass(b.classes.active).addClass(b.classes.valid),Bose.TextInput.hideErrorMessage(a)},Bose.TextInput.markInvalid=function(a,b,c){a.removeClass(c.classes.valid).removeClass(c.classes.active).addClass(c.classes.error),Bose.TextInput.setErrorMessage(a,b)},Bose.TextInput.resetState=function(a,b){a.removeClass([b.classes.error,b.classes.valid,b.classes.active].join(" ")),Bose.Tooltip.removeFrom(a)},Bose.TextInput.doValidation=function(a,b,c){var d=$jq(this),e=d.closest(b.selectors.container);d.hasClass("bose-cardNumber__input")&&d.trigger("creditCardType"),e.hasClass(b.classes.readOnly)?b.resetState(e,b):d.is(":focus")&&!c||!b.doChecks(d,e,b)||b.markValid(e,b)},Bose.TextInput.doChecks=function(a,b,c){return void 0===a.data("options")||c.doRequiredCheck(a,b,c)&&c.doRegexCheck(a,b,c)&&c.doMaxLengthCheck(a,b,c)&&c.doPostalCodeCheck(a,b,c)&&c.doCardAvailabilityCheck(a,b,c)},Bose.TextInput.doCardAvailabilityCheck=function(a,b,c){var d,e=a.hasClass("bose-cardNumber__input"),f=$jq(Bose.TextInput.selectors.cardSection).data("card-found");return!(e&&a.val().length>6&&!f)||(d=a.data("options").messages.notAvailable,c.markInvalid(b,d,c),!1)},Bose.TextInput.doRequiredCheck=function(a,b,c){if(void 0!==a.attr("data-required")&&""===a.val()){var d=a.data("options").messages.required;return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.doMaxLengthCheck=function(a,b,c){if(""!==a.val()&&void 0!==a.data("options").maxLength&&""!==a.data("options").maxLength&&(a.val(a.val().trim()),a.val().length>a.data("options").maxLength)){var d=a.data("options").messages.maxLength;return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.doRegexCheck=function(a,b,c){if(""!==a.val()&&void 0!==a.data("options").regex&&""!==a.data("options").regex){var d=new RegExp(a.data("options").regex);if(a.val(a.val().trim()),!d.test(a.val())){var e=a.data("options").messages.wrongFormat;return c.markInvalid(b,e,c),!1}}return!0},Bose.TextInput.doPostalCodeCheck=function(a,b,c){if(void 0!==a.attr("data-required")&&a.hasClass("bose-textField--invalidPostalCode")){var d=a.data("blockedpostalcodemessage");return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.setActiveLabel=function(a){$jq(a.selectors.field).each(function(){var b=$jq(this),c=b.closest(a.selectors.container);b.val()&&!c.hasClass(a.classes.readOnly)&&c.addClass(a.classes.active)})},Bose.TextInput.setErrorMessage=function(a,b){a.find("input").attr("aria-invalid",!0),a.next(".bose-newErrorMessage").text(b)},Bose.TextInput.showErrorMessage=function(a){a.next(".bose-newErrorMessage").addClass("-show"),a.next(".bose-newErrorMessage").parent().find(".bose-shoppingBag__addItem__input").addClass("-extraMargin")},Bose.TextInput.hideErrorMessage=function(a){a.find("input").attr("aria-invalid",!1),a.next(".bose-newErrorMessage").innerHTML="",a.next(".bose-newErrorMessage").removeClass("-show"),a.next(".bose-newErrorMessage").parent().find(".bose-shoppingBag__addItem__input").removeClass("-extraMargin")},$jq(window).on("unload",function(){$jq(window).unbind("unload")});var Bose=Bose||{};Bose.BazaarVoice=function(){function a(a){if("undefined"!=typeof $BV){var c=$jq(a),d=c.data("product-code");void 0!==d&&d.toString().length>0&&($BV.configure("global",{productId:d.toString(),events:{submissionLoad:function(){Bose.DataCapture.disable()},bvRender:function(){Bose.Tabs.resetWaypoints(),Bose.Utils.getURLHashParam(e.submit)&&($BV.ui("rr","submit_review",{productId:d.toString()}),Bose.Tabs.scrollToAnchorWithStickyMsg("ProductTabs_tab999"))}}}),$BV.ui("rr","show_reviews",{doShowContent:function(){Gridle.isActive("small")&&b()}}))}}function b(){var a=$jq("#BVRRContainer").closest(".bose-tabContent__content.ui-accordion-content");if(a.is(":hidden")){a.prev().click(),setTimeout(c,625)}}function c(){var a=$jq("#BVRRContainer").closest(".bose-tabContent__content.ui-accordion-content").prev().offset().top;$jq("body").scrollTop(a)}function d(){for(var a=Bose.DataLayer.Data.Order.details,b=Bose.DataLayer.Data.Page.locale,c=Bose.DataLayer.Data.Order.currency,d=[],e=0;e<a.length;e++)d.push({sku:a[e].sku,quantity:a[e].quantity,price:a[e].price});"undefined"!=typeof BV&&BV.pixel.trackTransaction({currency:c,orderId:Bose.DataLayer.Data.Order.orderNumber,total:Bose.DataLayer.Data.Order.totalAmountWithTax,items:d,email:Bose.DataLayer.Data.Order.billingEmail,locale:b.replace("-","_")})}var e={submit:"submit"};return{getRatingsAndReviews:a,trackTransactionPageView:d,hashParams:e}}();var Bose=Bose||{};Bose.Geolocation=function(){function a(){if(Bose.DataLayer.Data.Settings&&Bose.DataLayer.Data.Settings.geolocationEnabled){if(b(Bose.DataLayer.Data.Settings.geolocationEnabled,Bose.CookieStore.getGeolocationCookie())){var a=Bose.DataLayer.Data.Settings.microServiceUrl;$jq.ajax(a,{method:"GET"}).done(function(a){c(a)}).fail(function(){d()})}}}function b(a,b){var c=void 0!==a&&"true"===a,d=void 0===b,e=-1!==Bose.DataLayer.Data.Page.referrerUrl.indexOf("global.bose.com"),f=CQ.WCM&&CQ.WCM.isEditMode();return c&&d&&!e&&!f}function c(a){var b,c=a.country,d=g(a.domain,c);e(d,c)?(b=Bose.Popup.display(j(a,d),{onClose:i,cloneContent:!1}),$jq(l.closeButton).on("click",function(){Bose.Popup.close(b)})):i()}function d(){i(!0)}function e(a,b){var c=Bose.DataLayer.Data.Page.locale,d=-1!==c.indexOf(b),e=void 0!==a;return"PR"!==b&&"VI"!==b||"en-US"!==c||(d=!0),!d&&e}function f(a,b){var c="true"===Bose.DataLayer.Data.Settings.ecommerceEnabled,d=Bose.Translation.getSiteTranslation("country_name");return-1===b.indexOf("global.bose.com")?h()?Bose.Translation.getSiteTranslation("Geolocation.Message3",[d]):c?Bose.Translation.getSiteTranslation("Geolocation.Message1",[d,a,d,a,b]):Bose.Translation.getSiteTranslation("Geolocation.Message2",[d,a,b]):h()?Bose.Translation.getSiteTranslation("Geolocation.Message6",[d]):c?Bose.Translation.getSiteTranslation("Geolocation.Message4",[d,a,d,a,b]):Bose.Translation.getSiteTranslation("Geolocation.Message5",[d,a,b])}function g(a,b){var c;return $jq("link").each(function(){if(-1!==this.hreflang.indexOf(b))return c=this.href,!1}),c||h()||(c="https://"+a),c}function h(){var a=Bose.DataLayer.Data.Page.type,b=Bose.DataLayer.Data.Page.path;return-1!==a.indexOf("support")||-1!==b.indexOf("support")}function i(a){a?Bose.CookieStore.setGeolocationCookie(!0,!0):Bose.CookieStore.setGeolocationCookie(!0)}function j(a,b){var c={message:f(a.name,a.domain),redirectText:Bose.Translation.getSiteTranslation("Redirect"),stayHereText:Bose.Translation.getSiteTranslation("Stay here"),targetUrl:b};return $jq(nano('<div class="bose-geolocation">    <div class="bose-geolocation__text">       {message}   </div>   <div class="bose-geolocation__buttonsContainer">       <div class="bose-geolocation__buttonsContainer__button bose-geolocation__buttonsContainer__redirect">           <a role="button" aria-label="{redirectText}" class="bose-buttonLink bose-buttonLink--type1 -withBorder" title="{redirectText}" target="_self" href="{targetUrl}">               <span>                   {redirectText}               </span>           </a>       </div>       <div class="bose-geolocation__buttonsContainer__button">           <a role="button" aria-label="{stayHereText}" class="bose-buttonLink bose-buttonLink--type1 -withBorder js-bose-geolocation__buttonsContainer__close" title="{stayHereText}">               <span>                   {stayHereText}               </span>           </a>       </div>   </div></div>',c))}function k(){$jq(document).on("locale-choice-done",a)}var l={closeButton:".js-bose-geolocation__buttonsContainer__close"};return{init:k,_selectors:l}}();var Bose=Bose||{};Bose.Components=Bose.Components||{},Bose.Components.LocaleSelector=function(){function a(a){if(Bose.Components.LocaleSelector.$component=$jq(a),!0===Bose.Components.LocaleSelector.$component.data("multilingual-site")){if("undefined"!=typeof CQ&&void 0!==CQ.WCM&&(CQ.WCM.isEditMode(!0)||CQ.WCM.isDesignMode(!0))||void 0!==Bose.CookieStore.getSelectedLanguage())b();else{if(!0===Bose.Components.LocaleSelector.$component.data("show-modal")){var c=$jq(document).width()*(Gridle.isActive("small")?.8:.4);$jq.fancybox.open($jq(".bose-localeSelector--modal"),{minWidth:c,scrolling:"no",arrows:!1,afterClose:function(){void 0===Bose.CookieStore.getSelectedLanguage()&&d(),b()}})}else{e(Bose.Components.LocaleSelector.$component.data("default-locale"),Bose.Components.LocaleSelector.$component.data("url"))}}$jq(".bose-localeSelector__languages > .bose-localeSelector__link, .bose-localeSelector__languages > .bose-localeSelector__link2016").on("click",function(a){a.preventDefault();var b=$jq(this),c=b.data("locale"),d=b.attr("href"),f=!1;b.hasClass("js-removePrivacyCookie")&&(f=!0),e(c,d,f)})}else b()}function b(){$jq(document).trigger("locale-choice-done")}function c(){return Bose.Utils.getCurrentHref().match(/\/([a-z]{2}_[a-z]{2})\//).pop()}function d(){e(c())}function e(a,b,d){var e=c();if(Bose.CookieStore.setSelectedLanguage(a),void 0!==b&&e!==a)return d&&Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile),void Bose.Utils.setWindowLocation(b);$jq.fancybox.close()}return{init:a}}();var Bose=Bose||{};Bose.CookiePolicyChanger=function(){function a(){$jq(".bose-cookiePolicy").each(function(){var a=$jq(this),d=Bose.CookiePrivacyProfile.getPrivacyProfile(),e={expires:365},f=a.data("cookie-category"),g=!0;d.hasOwnProperty("initial")?(delete d.initial,d[f]="1",c(a,"enabled")):d.hasOwnProperty(f)&&"1"!==d[f]?(e.expires=31,c(a,"disabled"),g=!1):(d[f]="1",c(a,"enabled")),Bose.CookiePrivacyProfile.setPrivacyProfile(d,e),Bose.CookieStore.setSatTrack(g),a.on("click",b)})}function b(a){var b=Bose.CookiePrivacyProfile.getPrivacyProfile(),c=$jq(this).data("cookie-category"),d={expires:365},e=!0;"enabled"===a.target.value?b[c]="1":(b[c]="0",e=!1);for(var f in b)b.hasOwnProperty(f)&&"0"===b[f]&&(d.expires=31);Bose.CookiePrivacyProfile.setPrivacyProfile(b,d),Bose.CookieStore.setSatTrack(e)}var c=function(a,b){a.find("input[type='radio'][value='"+b+"']").prop("checked",!0)};return{init:a}}();var Bose=Bose||{};Bose.DataCapture=function(){function a(){r=!1}function b(){r=!0,clearTimeout(m),Bose.DataCapture.close(0,!0)}function c(a,b){m=setTimeout(function(){!r&&k(a)&&(n=a,d(a))},1e3*b)}function d(a){var b="/"+Bose.DataLayer.Data.Page.formattedLocale+"/forms.datacapture."+a+".html";$jq.ajax({type:"GET",url:b,success:function(a){e(a)},error:function(){}})}function e(a){f(a),g()}function f(a){var b=$jq("<div/>").append("string"==typeof a?$jq.parseHTML(a,null,!0):a),c=b.find(".bose-dataCapture"),d="-"+c.data("datacapture-type");o=parseInt(c.data("datacapture-maxdisplays"),10),p=$jq("<div/>",{class:"bose-dataCaptureWrapper "+d,html:c})}function g(){$jq("body").append(p),j(),h(),Bose.Utils.initElements();var a=p.find(".bose-formFlowPanel--active");a.length&&$jq(document).trigger("forms.trackFormLoaded",[a.find("form:first")]),p.addClass("-show"),setTimeout(function(){p.addClass("-animateIn"),setTimeout(function(){p.addClass("-opened")},600)})}function h(){var a=parseInt(Bose.CookieStore.getDataCaptureViews(n),10);isNaN(a)&&(a=0),Bose.CookieStore.setDataCaptureViews(n,++a),a>=o&&Bose.CookieStore.setDataCaptureViewed(n)}function i(a,b){var c=a;void 0!==p&&((void 0===c||c<0)&&(c=0),void 0!==b&&b?p.remove():setTimeout(function(){p.removeClass("-animateIn"),setTimeout(function(){Bose.CookieStore.setDataCaptureViewed(n),p.remove()},600)},1e3*c))}function j(){$jq(q.closeButton).on("click",i)}function k(a){var b=!1;if(!$jq.fancybox.isOpen&&!Bose.Popup.isOpen()&&!Gridle.isActive("small")&&void 0!==Bose.DataLayer.Data.Page.dataCaptureEnabled&&"true"===Bose.DataLayer.Data.Page.dataCaptureEnabled){var c=Bose.CookieStore.isDataCaptureViewed(a);void 0!==c&&c||(b=!0)}return b}function l(){return $jq.find(q.wrapper).length}var m,n,o,p,q={closeButton:".bose-dataCapture__close",wrapper:".bose-dataCaptureWrapper"},r=!1;return{enable:a,disable:b,popup:e,trigger:c,close:i,isOpen:l}}();var Bose=Bose||{};Bose.Text=function(){function a(){$jq(b.headingScalable).wrapInner('<span class="slabtext"></span>'),$jq(b.headingScalable).slabText({postTweak:!1,maxFontSize:80})}var b={headingScalable:".bose-richText__headingScalable"};return{init:a,_selectors:b}}(),$jq(document).ready(function(){Bose.CookiePolicyChanger.init()}),$jq(document).ready(function(){Bose.Story.init()}),$jq(document).ready(function(){Bose.ExpandableContentContainer.init($jq(".bose-expandableContentContainer"))}),$jq(document).ready(function(){Bose.DTM.init()}),$jq(document).ready(function(){Bose.Tabs.init()}),$jq(document).ready(function(){Bose.Button.init()}),$jq(document).ready(function(){Bose.Header.init()}),$jq(document).ready(function(){Bose.ExpandableContent.init($jq(".bose-expandableContent__title"))}),$jq(document).ready(function(){Bose.Components.DynamicVideo.init($jq(".bose-videoContainer"))}),$jq(document).ready(function(){Bose.Overlay.init()}),$jq(document).ready(function(){Bose.Geolocation.init()}),$jq(document).ready(function(){Bose.Components.LocaleSelector.init($jq(".bose-localeSelector"))}),$jq(document).ready(function(){Bose.BrightcovePlayer.init()}),$jq(document).ready(function(){Bose.Popup.init()}),$jq(document).ready(function(){Bose.VariantChangeListener.init()}),$jq(document).ready(function(){Bose.Text.init()});var Bose=Bose||{};Bose.Panel=function(){function a(){$jq(b.panelAdaptiveImage).on("lazyloaded",function(){Bose.Utils.reMatchHeights()})}var b={panelAdaptiveImage:".bose-panel .js-adaptiveImage"};return{init:a,_selectors:b}}(),$jq(document).ready(function(){Bose.Panel.init()});var Bose=Bose||{};Bose.SmsButton=function(){function a(){$jq(b.smsLinkClass).each(function(){var a=$jq(this).attr("number");$jq(this).attr("href",a)})}var b={smsLinkClass:".js-boseSmsLink"};return{init:a,selector:b}}(),$jq(document).ready(function(){Bose.SmsButton.init()});var Bose=Bose||{};Bose.SiteMap=function(){function a(){0!==$jq(e.siteMap).length&&b()}function b(){var a=Bose.Utils.isAuthorMode()?"en_us":Bose.DataLayer.Data.Page.formattedLocale,b=Bose.Utils.getWindowLocation().href,f=b.substring(0,b.indexOf(a));b.indexOf("index")>=0?(f=b.substring(0,b.indexOf("index")),d=f+"index.sitemap.json"):d=f+"sitemap.json",$jq.ajax({type:"GET",url:d,dataType:"json",success:function(a){for(var b=0;b<a.length;b++){var d='<a href="'+a[b].loc+'">'+a[b].loc+"</a><br>";$jq(e.siteMap).append(d),c(a[b].languagePages,"LanguagePages"),c(a[b].categoryPages,"CategoryPages")}}})}function c(a,b){for(var c="",d=0;d<a.length;d++)if(c+='<a href="'+a[d].loc+'">'+a[d].loc+"</a><br>",void 0!==a[d].productPages&&"CategoryPages"===b)for(var f=0;f<a[d].productPages.length;f++)c+='<a href="'+a[d].productPages[f].loc+'">'+a[d].productPages[f].loc+"</a><br>";$jq(e.siteMap).append(c)}var d,e={siteMap:".js-siteMap-value"};return{init:a,_selectors:e}}(),$jq(document).ready(function(){Bose.SiteMap.init()});
var Bose=Bose||{};Bose.StoreLocatorIframe=function(){function a(){Gridle.isActive("large")?$jq(b.iframecontainer).attr("src",$jq(b.iframecontainer).data("desktop")):$jq(b.iframecontainer).attr("src",$jq(b.iframecontainer).data("mobile"))}var b={iframecontainer:".bose-storeLocator__iframeContainer"};return{init:a,_classes:b}}();var Bose=Bose||{};Bose.StoreHours=function(){function a(a){for(var b=[],c=0;c<7;c++){var h=g[c];b.push({day:h,hours:void 0===a[h][0].openingTime?[]:a[h].map(e).sort(d).map(f)})}return b}function b(a){return a.map(c).sort(d).map(function(a){var b=a.openingTime;return{day:g[b.getDay()],date:b.toLocaleDateString().substring(0,b.toLocaleDateString().length-5),hours:a.closed?void 0:f(a)}})}function c(a){var b=a.date.split("-"),c=[0,0,0],d=[0,0,0],e=!0;return a.openingTime&&(e=!1,c=a.openingTime.split(":"),d=a.closingTime.split(":")),{closed:e,openingTime:new Date(b[0],b[1]-1,b[2],c[0],c[1],c[2]),closingTime:new Date(b[0],b[1]-1,b[2],d[0],d[1],d[2])}}function d(a,b){return a.openingTime.getTime()-b.openingTime.getTime()}function e(a){var b=a.openingTime.split(":"),c=a.closingTime.split(":");return{openingTime:new Date(1970,0,1,b[0],b[1],b[2]),closingTime:new Date(1970,0,1,c[0],c[1],c[2])}}function f(a){var b={hour:"2-digit",minute:"2-digit"};return a.openingTime.toLocaleTimeString(Bose.DataLayer.Data.Page.locale,b)+" - "+a.closingTime.toLocaleTimeString(Bose.DataLayer.Data.Page.locale,b)}var g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return{getSortedStoreHours:a,getSortedSpecialStoreHours:b}}();var Bose=Bose||{};Bose.StoreSelector=function(){function a(){var a=$jq(N.storeSelector);0!==a.length&&(C=Bose.DataLayer.Data.Page.country,D=$jq(N.storeContainer),B=a.data("pyxisUrl"),z=a.data("googleMapsApiUrl"),A=a.data("googleMapsApiKey"),$jq(document).on("click",N.store.select,t),$jq(document).on("click",N.findStores,f),$jq(document).on("click",N.nextPage,c),$jq(document).on("click",N.geolocation,l),$jq(document).on("keypress",N.locationInput,e))}function b(){var a,b=$jq(this),c=b.closest(N.storeContainer).find(N.store.details);c.toggleClass(O.store.detailsHidden),a=b.data(c.hasClass(O.store.detailsHidden)?"details-more":"details-hide"),b.text(a),b.prop("title",a)}function c(){Bose.Popup.showLoadingIcon(y),m(E,F,++G,d)}function d(a){var c=$jq(N.popup).find(N.nextPageContainer);G=a.currentPage,H=a.totalPages,G===H?c.hide():c.show(),v();for(var d=0;d<a.stores.length;d++)o(a.stores[d]);n(),$jq(N.store.toggleDetails).on("click",b)}function e(a){a.which===R&&f(a)}function f(a){var b=$jq(N.popup).find(N.locationInput),c=b.val();if(b.trigger("doValidation"),Bose.TextField.isValid(b,Bose.TextField)){if(!T)return a&&a.stopImmediatePropagation(),void g();Bose.Popup.showLoadingIcon(y),M.geocode({address:c},i)}}function g(){$jq("head").append('<script src="'+z+"?key="+A+'&callback=Bose.StoreSelector.apiLoaded"><\/script>')}function h(){T=!0,M=new google.maps.Geocoder,f()}function i(a,b){var c=P.error;if("OK"!==b)return"ZERO_RESULTS"===b&&(c=P.badAddress),w(c),void n();var d=a[0].geometry.location.lat(),e=a[0].geometry.location.lng();E=d,F=e,G=Q,m(d,e,G,j)}function j(a){k(),0===a.stores.length?w(P.noStores):d(a),n()}function k(){$jq(N.popup).find(N.storeContainer).remove()}function l(){var a={enableHighAccuracy:!1,timeout:5e3,maximumAge:0},b=null,c=document.documentMode;void 0!==navigator.geolocation&&(Bose.Popup.showLoadingIcon(y),S&&c?b=navigator.geolocation.watchPosition(function(a){m(a.coords.latitude,a.coords.longitude,Q,j),navigator.geolocation.clearWatch(b),b=null},function(){Bose.Popup.hideLoadingIcon(y)},a):navigator.geolocation.getCurrentPosition(function(a){m(a.coords.latitude,a.coords.longitude,Q,j),S=!0},function(){x(),Bose.Popup.hideLoadingIcon(y)}))}function m(a,b,c,d){$jq.ajax({url:B+"/storelocator/bopis/stores",method:"GET",dataType:"json",data:{variantCode:I,quantity:J,country:C,facets:"location="+a+","+b,page:c,pageSize:5},success:d,complete:n})}function n(){Bose.Popup.hideLoadingIcon(y)}function o(a){var b=D.clone(),c="",d=b.find(N.store.stock);b.attr("data-id",a.id),b.find(N.store.name).text(a.name),b.find(N.store.street).text(a.address.streetNumber+" "+a.address.street),b.find(N.store.city).text(a.address.city+" "+a.address.region+" "+a.address.postalCode),a.bopisEnabled?a.inStock?(c=d.data("i18n-instock"),d.removeClass(O.store.outOfStock)):(c=d.data("i18n-outofstock"),b.find(N.store.select).remove(),d.addClass(O.store.outOfStock)):(c=d.data("i18n-nobopis"),b.find(N.store.select).remove(),d.addClass(O.store.outOfStock)),d.text(c),void 0!==a.openingHours&&p(b,a.openingHours),b.find(N.store.phoneNumber).text(a.address.phone),b.find(N.store.phoneNumber).attr("href","tel:"+a.address.phone),b.insertBefore($jq(N.popup).find(N.nextPageContainer))}function p(a,b){void 0!==b.weekdayOpeningResults&&(q(a,b.weekdayOpeningResults),r(a,b.specialOpeningDayResults))}function q(a,b){for(var c=Bose.StoreHours.getSortedStoreHours(b),d=a.find(N.store.details),e=a.find(N.store.openingHours),f="<tr><td>{day}</td><td>{hour}</td></tr>",g=0;g<c.length;g++){var h=c[g];0===h.hours.length?e.append(nano(f,{day:d.data("i18n-"+h.day),hour:d.data("i18n-closed")})):h.hours.forEach(function(a,b){e.append(nano(f,{day:0===b?d.data("i18n-"+h.day):"",hour:a}))})}}function r(a,b){var c=a.find(N.store.specialOpeningHoursTable),d=a.find(N.store.details);b&&(Bose.StoreHours.getSortedSpecialStoreHours(b).forEach(function(a){c.append(nano("<tr><td>{day}</td><td>{hour}</td></tr>",{day:d.data("i18n-"+a.day)+" "+a.date,hour:void 0===a.hours?d.data("i18n-closed"):a.hours}))}),a.find(N.store.specialOpeningHours).show())}function s(a,b,c,d,e){I=$jq(N.selectedVariant).data("variantCode"),J=b,K=d,L=e,!0===c&&$jq(N.storeSelector).addClass(O.storePopup),$jq(N.popup).length<1&&(y=Bose.Popup.display($jq(N.storeSelector),{wrapCss:"bose-popupInner--storeSelector "+O.popup,onClose:u})),$jq(document).on("shown.popup",function(){Bose.StoreSelector.init()})}function t(){var a=$jq(this),b=a.closest(N.storeContainer),c=a.closest(N.storeSelectedInfo),d=b.data("id"),e={storeName:c.find(N.storeSelectedInfoName).text(),storeStreet:c.find(N.storeSelectedInfoStreet).text(),storeCity:c.find(N.storeSelectedInfoCity).text()};L=void 0,Bose.Popup.close(y),a.parents(N.storeSelectedPopup).length?($jq(N.storeSelectedCheck).hide(),$jq(N.storeSelectedChange).show(),$jq(N.storeSelectedContainer).html("").attr("data-store-id",d).append("<p>"+e.storeName+"</p><p>"+e.storeStreet+"</p><p>"+e.storeCity+"</p>"),$jq("#storeId-hidden").val(d)):(K(b.attr("data-id")),K=void 0)}function u(){var a=$jq(".bose-buttonLink--inProgress"),b=$jq(".bose-popup"),c=$jq(".zoomContainer");"function"==typeof L&&L(),Bose.ButtonLink.removeProgressBar(a),b.removeClass("bose-popupInner--storeSelector js-storeSelector-popup"),c.remove()}function v(){$jq(N.popup).find(N.infoMessage).hide(),$jq(N.nextPage).show()}function w(a){var b=$jq(N.popup).find(N.infoMessage);b.text(b.data("i18n-"+a)),$jq(N.nextPage).hide(),k(),b.show()}function x(){w(P.error),n()}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={storeSelector:".js-storeSelector",stores:".js-storeSelector-stores",findStores:".js-storeSelector-find",locationInput:".js-storeSelector-locationInput",geolocation:".js-storeSelector-geolocation",popup:".js-storeSelector-popup",nextPage:".js-storeSelector-nextPage",nextPageContainer:".js-storeSelector-nextPageContainer",storeContainer:".js-storeSelectorStore",infoMessage:".js-storeSelector-infoMessage",selectedVariant:".bose-colorItem--selected",store:{select:".js-storeSelectorStore-selectStore",name:".js-storeSelectorStore-name",street:".js-storeSelectorStore-street",city:".js-storeSelectorStore-city",stock:".js-storeSelectorStore-stock",openingHour:".js-storeSelectorStore-openingHour",openingHours:".js-storeSelectorStore-openingHours",specialOpeningHours:".js-storeSelectorStore-specialOpeningHours",specialOpeningHoursTable:".js-storeSelectorStore-specialOpeningHoursTable",phoneNumber:".js-storeSelectorStore-phoneNumber",details:".js-storeSelectorStore-details",toggleDetails:".js-storeSelectorStore-toggleDetails"},storeSelectedPopup:".bose-storeSelector-productPage",storeSelectedInfo:".bose-storeSelectorStore__info",storeSelectedInfoName:".js-storeSelectorStore-name",storeSelectedInfoStreet:".js-storeSelectorStore-street",storeSelectedInfoCity:".js-storeSelectorStore-city",storeSelectedContainer:".js-shippingMethod-selectedStore",storeSelectedCheck:".js-bose-link-check",storeSelectedChange:".js-bose-link-change"},O={popup:"js-storeSelector-popup",storePopup:"bose-storeSelector-productPage",store:{detailsHidden:"bose-storeSelectorStore__details--hidden",outOfStock:"bose-storeSelectorStore__stock--outOfStock",openingHour:"bose-storeSelectorStore__openingHour"}},P={badAddress:"badaddress",noStores:"nostores",error:"error"},Q=1,R=13,S=!1,T=!1;return{init:a,apiLoaded:h,displayPopup:s,_selectors:N,_classes:O}}(),$jq(document).ready(function(){Bose.StoreSelector.init()});
var Bose=Bose||{};Bose.Search=Bose.Search||{},Bose.Search.selectors={searchFiltersMobCollapse:".bose-searchFilters__mobCollapse",searchResultSetSwitcher:".bose-search__resultSetSwitcher.bose-searchResultSetSwitcher",searchResultSetSwitcherItem:".bose-searchResultSetSwitcher__item",searchResultPanel:".bose-search__results",searchResultFilters:".bose-search__filters",searchResultFilterBoxes:".bose-searchFilters__mobCollapse .bose-searchFilters__mobCollapsePart .bose-searchFilters__filterColumn .bose-searchFilters__filterItem",searchResultFilterItem:".bose-searchFilters__filterItem",infiniteSearchResultBox:".bose-search__results",clearButton:".bose-searchFilters__clearButton",showMoreButton:".bose-search__showMoreButton",activeTabCount:".bose-searchResultSetSwitcher__item.-active .bose-searchResultSetSwitcher__total"},Bose.Search.inifiteObj=null,Bose.Search.maxInfinitScrollScrolls=3,Bose.Search.currentFilterCat="",Bose.Search.$currentResultsPannel="",Bose.Search.defaultFilterCat="",Bose.Search.initResults=function(a){var b=!1,c=$jq(".searchResult").prev(".search").find(".bose-singleInputForm__input").val(),d=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+'[data-resultset = "accessory"]').data("accessories-search");Bose.Search.initialized=!1,Bose.Search.isLoading=!1,Bose.Search.$searchBlock=a,Bose.Search.$searchFiltersMobCollapse=a.find(Bose.Search.selectors.searchFiltersMobCollapse),Bose.Search.$searchResultSetSwitcher=a.find(Bose.Search.selectors.searchResultSetSwitcher),Bose.Search.$searchResultSetSwitcherItem=Bose.Search.$searchResultSetSwitcher.find(Bose.Search.selectors.searchResultSetSwitcherItem),Bose.Search.$searchResultPanels=a.find(Bose.Search.selectors.searchResultPanel),Bose.Search.$searchResultFilters=a.find(Bose.Search.selectors.searchResultFilters),Bose.Search.$searchResultBoxes=a.find(Bose.Search.selectors.infiniteSearchResultBox),Bose.Search.initFiltersPanel(),Bose.Search.initInfiniteScroll(),Bose.Search.$searchResultBoxes.each(function(){var a=$jq(this),b=a.find('input[type="hidden"].searchPromoteUrl');a.data("searchPromoteUrl",b.val()),a.data("currentSearchPromoteUrl",a.data("initial-url"))}),Bose.Search.showHideFilterDiv(),Bose.Search.initSearchForms();var e=Bose.Utils.getURLHashParam("tabname");e&&Bose.Search.selectTab(e),void 0!==d&&($jq.each(d,function(a,d){var e=d.toLowerCase();if(e.match(new RegExp(c,"gi"))||-1!==c.search(e))return b=!0,!1}),b&&Bose.Search.selectTab("accessory")),Bose.Search.initialized=!0},Bose.Search.isInitialized=function(){return Bose.Search.initialized},Bose.Search.selectTab=function(a){var b=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+"[data-resultset="+a+"]");b.data("popState","true"),b.click()},Bose.Search.showHideFilterDiv=function(){var a=Bose.Search.$searchBlock.find(".bose-search__resultSetSwitcher .bose-searchResultSetSwitcher__item.-active"),b=a.data("resultset"),c=Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultFilters+"#searchFilters_"+b+" "+Bose.Search.selectors.searchResultFilterBoxes);Bose.Search.currentFilterCat=b,Bose.Search.$searchResultFilters.removeClass("-active"),c.length&&Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultFilters+"#searchFilters_"+b).addClass("-active")},Bose.Search.initDestroyCollapsibleFiltersPanel=function(){Gridle.isActive("small")||Gridle.isActive("medium")?Bose.Search.$searchFiltersMobCollapse.hasClass("ui-accordion")||Bose.Search.$searchFiltersMobCollapse.accordion({collapsible:!0,active:!0,animate:200,heightStyle:"content",icons:{header:"bose-icon bose-icon--plus -withBg",activeHeader:"bose-icon bose-icon--minus -withBg"}}):Bose.Search.$searchFiltersMobCollapse.hasClass("ui-accordion")&&Bose.Search.$searchFiltersMobCollapse.accordion("destroy")},Bose.Search.initSearchForms=function(){$jq("form.bose-singleInputForm").submit(function(){var a=$jq(this).find("input[name=queryForDisplay]");$jq(this).find("input[name=query]").val(a.val().toLowerCase())})},Bose.Search.initFiltersPanel=function(){var a=$jq(".bose-searchFilters__filterColumn"),b=a.find(Bose.Checkbox.selectors.field),c=a.find(".bose-select--sort "+Bose.Select.selectors.field),d=$jq(Bose.Search.selectors.clearButton);Bose.Search.initDestroyCollapsibleFiltersPanel(),Gridle.on("update",Bose.Search.initDestroyCollapsibleFiltersPanel),Bose.Search.$searchResultSetSwitcherItem.on("click",Bose.Search.showHideFiltersPanel),Bose.Search.$searchResultSetSwitcherItem.on("keydown",Bose.Search.captureKeys),Bose.Search.defaultFilterCat=Bose.Search.$searchResultSetSwitcherItem.filter(".-active").data("resultset"),Bose.Search.$currentResultsPannel=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),d.on("click",Bose.Search.clearFilters),c.on("selectmenuchange",Bose.Search.sortResults),b.each(function(){var a=$jq(this);a.data("initial-url",a.val())}),b.on("click",Bose.Search.clickFilter)},Bose.Search.sortResults=function(a,b){Bose.Search.doSearchWithUrl(b.item.value)},Bose.Search.clearFilters=function(){var a=$jq(this),b=a.data("initial-url"),c=$jq("#searchFilters_"+Bose.Search.currentFilterCat+" .bose-searchFilters__filterColumn"),d=c.find(Bose.Checkbox.selectors.field);a.hasClass("-disabled")||(d.each(function(){$jq(this).prop("checked",!1)}),history.replaceState({"Bose.Search.restoreTabState":Bose.Search.currentFilterCat,"Bose.Search.doSearchWithUrl":b},document.title,document.location.href),Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl",b),Bose.Search.doSearchWithUrl(b))},Bose.Search.clickFilter=function(){var a=$jq(this);a.is(":disabled")||(history.replaceState({"Bose.Search.restoreTabState":Bose.Search.currentFilterCat,"Bose.Search.doSearchWithUrl":a.val()},document.title,document.location.href),Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl",a.val()),Bose.Search.doSearchWithUrl(a.val()))},Bose.Search.doSearchWithUrl=function(a,b){Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible").data("searchPromoteUrl",a),Bose.Search.doSearch(!0),b&&Bose.Search.saveSearchToHistory(a,Bose.Search.currentFilterCat)},Bose.Search.saveSearchToHistory=function(a,b){if(history&&(!history.state||!history.state["Bose.Search.doSearchWithUrl"])){var c=Bose.Search.defaultFilterCat,d=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible").data("initial-url");history.replaceState({"Bose.Search.restoreTabState":c,"Bose.Search.doSearchWithUrl":d},document.title,document.location.href)}history.pushState({"Bose.Search.restoreTabState":b,"Bose.Search.doSearchWithUrl":a},document.title,document.location.href)},Bose.Search.showHideFiltersPanel=function(){if(!Bose.Search.isLoading){var a=$jq(this),b=a.data("resultset");Bose.Search.currentFilterCat=b,Bose.Search.$currentResultsPannel=Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultPanel+"#searchResults_"+Bose.Search.currentFilterCat),Bose.Search.$searchResultPanels.removeClass("-active").css("display",""),Bose.Search.$currentResultsPannel.addClass("-active"),Bose.Search.$searchResultSetSwitcherItem.removeClass("-active"),Bose.Search.$searchResultSetSwitcherItem.attr("aria-selected","false"),a.addClass("-active"),a.attr("aria-selected","true"),Bose.Search.showHideFilterDiv(),$jq.waypoints("refresh");var c=Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl");history.replaceState({"Bose.Search.restoreTabState":b,"Bose.Search.doSearchWithUrl":c},document.title,document.location.href)}},Bose.Search.restoreTabState=function(a){var b=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+"[data-resultset="+a+"]");Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultPanel+"#searchResults_"+a).data("currentSearchPromoteUrl",history.state["Bose.Search.doSearchWithUrl"]),b.click()},Bose.Search.setLoadingState=function(){Bose.IconLoader.show(".bose-search__loadingIcon"),Bose.Search.isLoading=!0},Bose.Search.endLoadingState=function(){Bose.IconLoader.hide(".bose-search__loadingIcon"),Bose.Search.isLoading=!1,$jq.waypoints("refresh")},Bose.Search.doSearch=function(a){var b=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),c=b.data("searchPromoteUrl"),d=b.data("pagesAutoLoaded"),e=$jq(".bose-searchResultSetSwitcher").data("results-template"),f=$jq("#searchFilters_"+Bose.Search.currentFilterCat+" .bose-searchFilters__filterColumn"),g={$facetCheckboxes:f.find(Bose.Checkbox.selectors.field),$facetSortDropdowns:f.find(".bose-select--sort "+Bose.Select.selectors.field),$clearFilterButtons:$jq(Bose.Search.selectors.clearButton)},h="/"+Bose.Utils.getCurrentPath()+".search.html",i=0;c&&e&&(g.$facetCheckboxes.trigger("setDisabled"),g.$facetSortDropdowns.trigger("setDisabled"),g.$clearFilterButtons.addClass("-disabled"),a&&(b.empty(),b.data("pagesAutoLoaded",0)),Bose.Search.setLoadingState(),$jq(Bose.Search.selectors.showMoreButton).removeClass("bose-search__showMoreButton--show"),$jq.ajax({url:h,method:"GET",data:{spUrl:c,path:e,tab:Bose.Search.currentFilterCat},dataType:"json",success:function(c){i=$jq(document).scrollTop(),Bose.Search.onAjaxDone(c,b,g,d,a,i),Bose.BackToTopButton.reCalculate()}}))},Bose.Search.onAjaxDone=function(a,b,c,d,e,f){Bose.Search.populateFacets(a,c.$facetCheckboxes),Bose.Search.populateSortDropdown(a,c.$facetSortDropdowns);var g=a.total,h=void 0===a.nextPageUrl?null:a.nextPageUrl;b.data("searchPromoteUrl",h),e?b.html(a.htmlResult):b.append(a.htmlResult);var i=$jq(Bose.Search.selectors.activeTabCount);null!==g&&i.length>0&&i.html(g),Bose.Search.hideResult(b),c.$clearFilterButtons.removeClass("-disabled"),Bose.Utils.initElements(b),Bose.Search.showResult(b),Bose.Search.endLoadingState(),e||$jq("html,body").scrollTop(f),d===Bose.Search.maxInfinitScrollScrolls&&b.data("searchPromoteUrl")&&$jq(".bose-searchResultSetSwitcher").data("results-template")?$jq(Bose.Search.selectors.showMoreButton).addClass("bose-search__showMoreButton--show"):$jq(Bose.Search.selectors.showMoreButton).removeClass("bose-search__showMoreButton--show")},Bose.Search.toggleTileHeight=function(a,b){a?b.find(".bose-productReference").css("height","auto"):b.find(".bose-productReference").css("height","700px")},Bose.Search.hideResult=function(a){a.hide(),Bose.Search.toggleTileHeight(!1,a)},Bose.Search.showResult=function(a){Bose.Search.toggleTileHeight(!0,a),a.show()},Bose.Search.populateSortDropdown=function(a,b){a.sortOptions&&(b.each(function(b,c){var d=$jq(c);d.find("option").remove(),$jq.each(a.sortOptions,function(a,b){var c=$jq("<option>",{value:b.value,text:b.label,selected:b.selected});d.append(c)}),d.selectmenu("refresh")}),b.trigger("setEnabled"))},Bose.Search.populateFacets=function(a,b){a.facets&&b.each(function(b,c){for(var d=$jq(c),e=0;e<a.facets.length;e++){var f=a.facets[e];d.prop("name")===f.value+"chk"&&(d.trigger("setEnabled"),f.undolink?d.val(f.undolink):d.val(f.link),d.prop("checked",f.selected))}})},Bose.Search.initInfiniteScroll=function(){Bose.Search.$searchResultBoxes.data("pagesAutoLoaded",0),Bose.Search.$searchResultBoxes.waypoint({handler:function(a){var b,c;"down"===a&&(b=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),c=b.data("pagesAutoLoaded"),!Bose.Search.isLoading&&c<Bose.Search.maxInfinitScrollScrolls&&Bose.Search.isInitialized()&&(c++,b.data("pagesAutoLoaded",c),Bose.Search.doSearch()))},offset:"bottom-in-view"})},Bose.Search.captureKeys=function(a){var b=a.which;13!==b&&32!==b||$jq(a.target).click()};var Bose=Bose||{};Bose.Search=Bose.Search||{},Bose.Search.AutoComplete=function(){function a(){var a;$jq(l.globalSearchInput).on("focus",g),$jq(l.body).on("mouseup",h),$jq(document).on("keydown",l.globalSearchInput,e).on("keydown",l.quickLinkMenuItems,e).on("keydown",l.jqUIItem,e).on("blur",".bose-singleInputForm__submit--2016",h).on("focus",l.quickLinkMenuItems,d),$jq('input[type="search"]').addClass("bose-singleInputForm__autoComplete"),$jq('input[type="search"].bose-singleInputForm__autoComplete').each(function(d){var e=$jq(this);void 0!==e.siblings("input[name=query]").data("autocompletesearchurl")&&(0===d?(a={select:i,source:j,minLength:3,appendTo:$jq(".js-bose-suggestionContainer"),open:c,close:f,position:{offset:"0 20"}},b(e,a)):(a="serial"===$jq('input[type="search"].bose-singleInputForm__autoComplete')[d].name?{select:i,source:j,minLength:4,position:{offset:"0 20"}}:{select:i,source:j,minLength:3,position:{offset:"0 20"}},b(e,a)))})}function b(a,b){a.autocomplete(b).data("ui-autocomplete")._renderItem=k}function c(a){var b,c=$jq(l.visibleAutoCompleteList),d=$jq('<div class="bose-quickLinks__autoSuggestions"></div>'),e=$jq(a.target).parent().find(l.quickLinks);c.addClass(m.autoCompleteMbl),$jq(l.searchInput).parent().find(l.quickLinks).removeClass(m.show),Gridle.isActive("large")?(c.css("width",$jq(a.target).parent().width),e.find(".-animateNav").removeClass(m.animateNav),d.appendTo(c),b=e.html(),d.html(""),d.html(b)):c.addClass(m.fullScreen)}function d(){$jq(this).addClass("js-bose-state-focus")}function e(a){var b=$jq(this),c=$jq(l.quickLinkMenuItems).first().get(0),d=$jq(l.quickLinkMenuItems).last().get(0);if(["ArrowUp","ArrowDown","Spacebar"," ","Down","Up"].indexOf(a.key)>-1&&!$jq(document.activeElement).hasClass(m.searchInput)&&a.preventDefault(),["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&("Enter"===a.key||"Spacebar"===a.key||" "===a.key?b.click():document.activeElement!==$jq(l.topSearchForm).find(l.globalSearchInput)[0]&&(h(a),a.stopPropagation())),("ArrowDown"===a.key||"Down"===a.key)&&document.activeElement===$jq(l.topSearchForm).find(l.globalSearchInput)[0])return void c.focus();"ArrowDown"!==a.key&&"Down"!==a.key||document.activeElement===d||document.activeElement===$jq(l.topSearchForm).find(l.globalSearchInput)[0]||$jq(document.activeElement).next().focus(),"ArrowUp"!==a.key&&"Up"!==a.key||document.activeElement===c?"ArrowUp"!==a.key&&"Up"!==a.key||document.activeElement!==c||$jq(l.topSearchForm).find(l.globalSearchInput).focus():$jq(document.activeElement).prev().focus()}function f(){$jq(l.autoCompleteList).removeClass(m.autoCompleteMbl),$jq(l.searchInput).parent().find(l.quickLinks).addClass(m.show)}function g(){var a=$jq(this),b=a.closest(l.headerSearchContainer),c=b.find(l.quickLinks);c.find(l.quickLinkMenuItems).each(function(a){$jq(this).attr("id","link-"+a)}),a.attr("aria-expanded",!0),b.addClass(m.extendWidth),c.addClass(m.show),c.find(".bose-quickLinks__navItems, .bose-quickLinks__title").addClass(m.animateNav),Gridle.isActive("large")||($jq(l.serviceBar).addClass(m.newMobileMenu),$jq(l.headerBar).addClass(m.newMobileMenu),c.addClass(m.quickLinksMbl),$jq(l.signInRegister).hide())}function h(a){var b=$jq(l.topSearchForm).find(l.globalSearchInput),c=b.closest(l.headerSearchContainer),d=c.find(l.quickLinks),e=$jq(".ui-autocomplete"),f=d.add(b).add(e);b.attr("aria-expanded",!1),(!f.is(a.target)&&0===f.has(a.target).length||"Escape"===a.key)&&(c.removeClass("-extendedWidth"),d.removeClass("-show"),d.find(".bose-quickLinks__navItems, .bose-quickLinks__title").removeClass("-animateNav"),Gridle.isActive("large")||($jq(l.serviceBar).removeClass("-openMobileMenu2018"),$jq(l.headerBar).removeClass("-openMobileMenu2018"),d.removeClass("-quickLinksMobile"),$jq(l.signInRegister).show()))}function i(a,b){var c=$jq(a.target);c.val(b.item.value),Bose.Search.initSearchForms(),Bose.Search.setLoadingState(),"serial4digittextSearch"===$jq(l.searchType).html()&&"serial"===a.target.name?Bose.SerialNumberLookup.handleSerialNumberLookupInfo():"searchArticle"===$jq(l.searchType).html()&&"searchText"===a.target.name?Bose.SearchArticle.handleSearchArticleInfo():c.closest("form").submit()}function j(a,b){var c=encodeURIComponent(a.term.trim()),d=$jq(this.element).siblings("input[name=query]").data("autocompletesearchurl")+c;$jq.ajax({url:d,type:"get",dataType:"jsonp",success:function(a){var c=[];$jq.each(a,function(a,b){var d={};if(b.substr(0,3).indexOf("_")>-1){var e;e=b.split("_").map(function(a){return a.trim()}),d.id=e[1],d.value=decodeURIComponent(e[1])}else d.id=b,d.value=decodeURIComponent(b);c.push(d)}),b(c)}})}function k(a,b){var c=new RegExp("("+this.term+")","gi"),d=b.label.replace(c,"<strong>$1</strong>");return $jq("<li/>").html(d).appendTo(a)}var l={headerSearchContainer:".bose-header2016__search",topSearchForm:".bose-singleInputForm--searchTop",body:"body",searchInput:'input[type="search"].bose-singleInputForm__autoComplete',globalSearchInput:'input[type="search"].bose-singleInputForm__globalSearch.bose-singleInputForm__autoComplete',quickLinks:".bose-quickLinks",serviceBar:".bose-serviceBar2016",headerBar:".bose-header2016",autoCompleteList:".ui-autocomplete",visibleAutoCompleteList:".ui-autocomplete:visible",quickLinkMenuItems:".bose-quickLinks__navItems",jqUIItem:".ui-menu-item",searchType:".js-searchType",signInRegister:".js-accountWidget-hamburger"},m={extendWidth:"-extendedWidth",show:"-show",animateNav:"-animateNav",newMobileMenu:"-openMobileMenu2018",quickLinksMbl:"-quickLinksMobile",autoCompleteMbl:"-openAutoCompleteMobile",fullScreen:"-fullScreen",searchInput:"bose-singleInputForm__globalSearch"};return{selectCallback:i,getSource:j,renderItem:k,_selectors:l,_classes:m,init:a}}();var Bose=Bose||{};Bose.ProductDrawer=function(){function a(){if(!g()){b(),j(),d(),h(),c(),i(),K.$drawer.data("initialized",!0);var a=K.$queryUrl.val();void 0!==a&&a.length>0&&(Bose.Checkbox.init(),p(a))}window.addEventListener("hashchange",h)}function b(){K={$drawer:$jq(".bose-productDrawer"),$resultsContainer:$jq(".bose-productDrawer__resultContainer"),$results:$jq(".bose-productDrawer__results"),$filtersContainer:$jq(".bose-productDrawerFiltersPanel__filtersContainer"),$loadingIcon:$jq(".bose-productDrawer__resultContainer__loadingIcon"),$displayMoreContainer:$jq(".bose-productDrawer__resultContainer__showMoreContainer"),$filtersCheckboxes:$jq(".bose-productDrawerFiltersPanel__filtersContainer").find(Bose.Checkbox.selectors.field+", .js-productDrawerFacetRadioButton"),$queryUrl:$jq(".js-productDrawer-queryURL"),$productDrawerPromotions:$jq(L.showPromotionalOffers)}}function c(){F(0),I=!1,K.$resultsContainer.closest(".bose-popup").length?K.$displayMoreContainer.waypoint({handler:function(a){f(a)},context:".bose-popup",offset:"bottom-in-view"}):K.$displayMoreContainer.waypoint({handler:function(a){f(a)},offset:"bottom-in-view"})}function d(){var a="promotionApplied|promotionApplied",b=a.split("|");if(K.$productDrawerPromotions.length>0){e();var c=$jq('.bose-productDrawerFiltersPanel__filters[data-facet-key="'+b[0]+'"]'),d=c.find('.bose-checkbox__input[name="'+b[1]+'chk"]');d.length&&p(d.val())}}function e(){$jq(".bose-productDrawerFiltersPanel__filters:not(.bose-productDrawerFiltersPanel__filters--sort)").hide()}function f(a){"down"!==a||E()>=J||I||(F(E()+1),g()&&q())}function g(){return $jq(".bose-productDrawer").data("initialized")}function h(){var a=K.$drawer.data("selected-facets")||Bose.Utils.getURLHashParam("facet")||K.$drawer.data("hash-param");if(a){a=a.split("|");var b=$jq('.bose-productDrawerFiltersPanel__filters[data-facet-key="'+a[0]+'"]'),c=b.find('.bose-checkbox__input[name="'+a[1]+'chk"]');c.length||(c=b.find('.js-productDrawerFacetRadioButton[name="'+a[1]+'"]')),c.length&&p(c.val())}}function i(){Bose.RadioButton.init()}function j(){var a=K.$filtersCheckboxes;$jq(".bose-productDrawerFiltersPanel__dropdownLabel, .bose-productDrawer__closeFilterButton").click(k),$jq(".bose-productDrawer__clearButton").click(o),a.each(function(){var a=$jq(this);a.data("initial-url",a.val())}),a.on("click",l)}function k(){$jq(".bose-productDrawerFiltersPanel").toggleClass("-open"),$jq.waypoints("refresh")}function l(){var a=$jq(this);return a.is(":disabled")||p(a.val()),K.$drawer.hasClass("-inOverlay")||"NEWchk"!==a.attr("name")||(Bose.Utils.getURLHashParam("facet")?n():m()),!1}function m(){Bose.Utils.updateURLHashParam("drawer","show"),Bose.Utils.updateURLHashParam("facet","productStatus|NEW"),window.history.pushState(null,null,Bose.Utils.getCurrentHref())}function n(){var a=window.location.href.toString(),b=a.split("#")[0];window.history.pushState(null,null,b)}function o(){var a=$jq(this),b=a.data("initial-url"),c=K.$filtersCheckboxes;a.hasClass("-disabled")||(c.each(function(){$jq(this).prop("checked",!1)}),p(b))}function p(a){K.$results.data("searchpromoteurl",a),q(!0)}function q(a){var b=K.$results.data("searchpromoteurl"),c=K.$drawer.data("producttiletemplate"),d=K.$drawer.data("results-template"),e=$jq(".js-productDrawer-allAvailableFacets").val(),f={facetCheckboxes:{},$facetSort:$jq('.js-productDrawerFacetRadioButton[name="productDrawer_sortOptions-group"]'),$clearFilterButtons:$jq(".bose-productDrawer__clearButton")},g="/"+Bose.Utils.getCurrentPath()+".search.html";"true"===K.$resultsContainer.attr("data-is-accessories")&&(d+=".prodDrawerAccsResultSet"),K.$filtersContainer.find(".bose-productDrawerFiltersPanel__filters").each(function(a,b){var c=$jq(b);f.facetCheckboxes[c.data("facet-key")]=c.find(Bose.Checkbox.selectors.field+", .js-productDrawerFacetRadioButton")}),b&&d&&(s(f),a&&(K.$results.empty(),F(0)),G(),$jq.ajax({url:g,method:"GET",data:{spUrl:b,path:d,tab:"Product",facets:e,productTileTemplate:c},dataType:"json",success:function(c){r(b),t(c,f,a,$jq(document).scrollTop())}}))}function r(a){K.$queryUrl.val(a)}function s(a){for(var b in a.facetCheckboxes)a.facetCheckboxes.hasOwnProperty(b)&&a.facetCheckboxes[b].trigger("setDisabled");a.$clearFilterButtons.addClass("-disabled")}function t(a,b,c,d){var e=a.total,f=$jq(".bose-productDrawer__numResCount");a.allFacets&&(y(a,b.facetCheckboxes),w(a,b.$facetSort)),K.$results.data("currentsearchpromoteurl",K.$results.data("searchpromoteurl")),a.nextPageUrl?K.$results.data("searchpromoteurl",a.nextPageUrl):K.$results.data("searchpromoteurl",null),u(c,a.htmlResult,d),E()>=J&&a.nextPageUrl&&K.$displayMoreContainer.addClass("-isVisible"),null!==e&&f.length&&f.html(e),b.$clearFilterButtons.removeClass("-disabled")}function u(a,b,c){var d=$jq(b);a?K.$results.append(d.children()):(v(),K.$results.append(d.children()),$jq("html,body").scrollTop(c)),H()}function v(){K.$results.find(".js-productDrawer-layoutResult").remove()}function w(a,b){if(void 0!==a.drawerSortOptions&&a.drawerSortOptions.length){b.prop("checked",!1),b.removeAttr("checked");for(var c=0;c<a.drawerSortOptions.length;c++)b.filter("[data-index='"+c+"']").val(a.drawerSortOptions[c].value),a.drawerSortOptions[c].selected&&b.filter("[data-index='"+c+"']").prop("checked",!0)}}function x(a){a.undefined.each(function(){$jq(this).trigger("setEnabled")})}function y(a,b){if(a.allFacets)for(var c in b)b.hasOwnProperty(c)&&z(c,a,b);else x(b)}function z(a,b,c){c[a].each(function(){var c=$jq(this);if(c.is(":radio")&&(c.trigger("setEnabled"),D(c).hide()),c.prop("checked",!1),b.allFacets[a])for(var d=0;d<b.allFacets[a].length;d++){var e=b.allFacets[a][d];C(c,e)?B(e,c):A(c,e)}})}function A(a,b){if(b.children)for(var c=0;c<b.children.length;c++){var d=b.children[c];C(a,d,b.value)&&B(d,a)}}function B(a,b){b.trigger("setEnabled"),b.prop("checked",a.selected),a.selected?(b.is(":radio")||(b.val(a.undolink),b.closest(Bose.Checkbox.selectors.container).attr("aria-checked","true")),D(b).show()):(b.val(a.link),a.children&&D(b).hide(),b.closest(Bose.Checkbox.selectors.container).attr("aria-checked","false"))}function C(a,b,c){var d=c?c+"_"+b.value:b.value;return a.attr("name")===d||a.attr("name")===d+"chk"}function D(a){return a.closest(".bose-productDrawerFacet").next(".bose-productDrawerFacetChildFacetContainer")}function E(){return K.$resultsContainer.data("pagesAutoLoaded")}function F(a){K.$resultsContainer.data("pagesAutoLoaded",a)}function G(){K.$displayMoreContainer.removeClass("-isVisible"),K.$loadingIcon.show(),I=!0}function H(){K.$loadingIcon.hide(),K.$displayMoreContainer.removeClass("-isVisible"),$jq.waypoints("refresh"),I=!1}var I,J=3,K={},L={showPromotionalOffers:".js-productDrawer__showPromotionalOffers"};return{init:a,doSearch:q,populateFacets:y,checkSortOptions:w}}();var Bose=Bose||{};Bose.ProductDrawerOverlay=function(){function a(){b(),window.onhashchange=function(){b()}}function b(){var a=$jq(c.categoryPage).data("drawer-url"),b="show"===Bose.Utils.getURLHashParam(d.drawer),e=Bose.Utils.getURLHashParam(d.facet);if(b&&a){var f;-1===a.indexOf(".html")&&(a+=".html"),e&&(f={selectedFacet:e}),Bose.Popup.displayAjax(a,{wrapCss:"bose-popupInner--fullWidth bose-popupInner--productDrawer",addExtraLogicProductDrawer:!0,urlParameters:f})}}var c={categoryPage:".parent.bose-categoryPage",drawerButton:".js-productDrawerButton"},d={facet:"facet",drawer:"drawer"};return{init:a}}(),$jq(document).ready(function(){Bose.Search.initResults($jq(".bose-search"))}),$jq(document).ready(function(){Bose.Search.AutoComplete.init()}),$jq(document).ready(function(){Bose.ProductDrawer.init()}),$jq(document).ready(function(){Bose.ProductDrawerOverlay.init()});var Bose=Bose||{};Bose.ProductSupportArticles=function(){function a(){$jq(document).on("click",g.activeButton,b).on("click",g.activeButton,d).on("click",g.submitButton,d).on("click",g.fancyboxClose,c).on("focus",g.fancyboxClose,e),$jq(g.overlayLink).on("click",f),i=!1}function b(){$jq(g.btnContainer).hide();var a=$jq(this),b=$jq(g.commentBox);a.hasClass("-selected")||b.find(".bose-textArea__input").val(""),a.hasClass(h.yesButton)?($jq(h.yesMessage).show(),$jq(g.jsIsHelpful).val("true"),Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","yes")):($jq(h.noMessage).show(),$jq(g.jsIsHelpful).val("false"),Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","no")),$jq(document).trigger("trackTroubleShootingArticleCustomerResponse"),b.show()}function c(){$jq(".fancybox-inner").find(".bose-articleOverlay").length>0&&!i&&(Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","close"),$jq(document).trigger("trackTroubleShootingArticleCustomerResponse"))}function d(){i=!0;var a=$jq(this),b="true"===$jq(g.jsIsHelpful).val(),c=a.closest(".bose-formYesNo__submitButton").length,d=$jq(g.commentBox).find(".bose-textArea__input").val().length;c?($jq(g.fancyboxOverlay).hide(),$jq(".fancybox-close").trigger("click")):a.addClass("-selected"),$jq(document).trigger("formYesNoClick",[b,c,d])}function e(){var a=$jq(".fancybox-inner"),b=$jq(g.youTubePlayer);if(b.data("heightFixed"))return!1;a.find(".bose-youtubePlayer").length>0&&a.find(".bose-articleOverlay").length>0&&(a.css("width","100%"),b.each(function(){var a=$jq(this),b=a.width(),c=b/1.77;a.height(c).data({heightFixed:!0})}))}function f(){Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking",""),Bose.DataLayer.setVariable("Product","inboundproductCode",$jq(g.productCode).val()),Bose.DataLayer.setVariable("Product","issueCategory",$jq(g.issueDescription).val()),Bose.DataLayer.setVariable("Product","serviceType",$jq(g.serviceType).val()),Bose.DataLayer.setVariable("Product","warrantyStatus",$jq(g.warrantyStatus).val()),Bose.DataLayer.setVariable("TroubleShootingArticle","articleTitle",$jq(this).data("articleTitle"));var a=$jq(this).data("supporttype");Bose.DataLayer.setVariable("TroubleShootingArticle","categories",a.substring(a.indexOf(":")+1,a.indexOf("/"))),Bose.DataLayer.setVariable("TroubleShootingArticle","subCategories",a.substring(a.lastIndexOf("/")+1,a.length)),Bose.DataLayer.setVariable("TroubleShootingArticle","sourcePageName",$jq(g.pageName).val()),$jq(document).trigger("trackTroubleShootingArticles")}var g={activeButton:".bose-articleOverlay .bose-formYesNo__button:not(.-disabled)",yesButton:".bose-formYesNo__button--yes",submitButton:".bose-articleOverlay .bose-formYesNo__submitButton",noButton:".bose-formYesNo__button--no",jsIsHelpful:".js-isHelpful",commentBox:".bose-formYesNo__commentBox",fancyboxOverlay:".fancybox-overlay-fixed",fancyboxClose:".fancybox-close",youTubePlayer:".bose-youtubePlayer__player",btnContainer:".js-buttonContainer",overlayLink:".bose-productSupportArticles .bose-link",productCode:".js-hidden-productCode",issueDescription:".js-hidden-issueDescription",serviceType:".js-hidden-serviceType",warrantyStatus:".js-hidden-warrantyStatus",pageName:".js-hidden-pageName"},h={yesButton:"bose-formYesNo__button--yes",yesMessage:".bose-formYesNo__yesMessage",noMessage:".bose-formYesNo__noMessage"},i=!1;return{init:a,selectors:g,trackClick:d,youtubeHeight:e,setActive:b,closeArticle:c,enableButton:f}}(),$jq(document).ready(function(){Bose.ProductSupportArticles.init()}),$jq(document).ready(function(){Bose.SerialNumberLookup.init()});var Bose=Bose||{};Bose.SerialNumberLookup=function(){function a(){$jq(s.lookupSerialNumberField).val(""),$jq(s.lookupSerialNumberButton).on("click",n).on("mousedown",d),$jq(s.lookupSerialNumberField).on("keydown",m).on("change",l).val(""),$jq(s.findSerialNumberLink).on("click",b),Bose.TextField.markValid($jq(s.lookupSerialNumberField),Bose.TextField),$jq(s.lookupSerialNumberField).attr("autocomplete","off"),$jq(s.serialNumberLookupInvalidAttempsCount).length&&null!==$jq(s.serialNumberLookupInvalidAttempsCount).text()&&(r=parseInt($jq(s.serialNumberLookupInvalidAttempsCount).text(),10))}function b(){$jq(document).trigger("trackFindMySerialNumber")}function c(){null!==v&&(v=!1)}function d(a){a.preventDefault(),$jq(s.lookupSerialNumberButton).focus()}function e(){var a=$jq(s.lookupSerialNumberInput),b=$jq(s.serialNumberLookupEmptyValueErrorMsg).text(),c=$jq(s.serialNUmberLookupInvalidValueErrorMsg).text();if(null!==v&&v&&""!==a.val().trim())return void(v=!1);""===a.val().trim()?(Bose.TextField.markInvalid(a,b,Bose.TextField),Bose.TextInput.showErrorMessage(a)):g()?(Bose.TextField.markValid(a,Bose.TextField),Bose.TextInput.hideErrorMessage($jq(s.lookupSerialNumberInput))):(Bose.TextField.markInvalid(a,c,Bose.TextField),Bose.TextInput.showErrorMessage(a))}function f(){$jq(s.serialNumberLookupValidationErrorMsg).addClass(t.hide)}function g(){var a=$jq(s.lookupSerialNumberField);return Bose.TextInput.isValid(a,Bose.TextField)}function h(a){var b=$jq(s.lookupSerialNumberInput);Bose.ErrorHandler.hideError(s.serialNumberLookup),a&&404===a.status?(Bose.TextField.markInvalid(b,$jq(s.serialNumberLookupInvalidInputMsg).text(),Bose.TextField),Bose.TextInput.showErrorMessage(b),null!==u&&u++,p()):Bose.ErrorHandler.showError({message:$jq(s.serialNumberLookup).attr("data-error-message"),eventMessage:"Error in serial number",targetSelector:s.serialNumberLookup,classes:""})}function i(a,b){var c=$jq(s.lookupSerialNumberButton),d=$jq(s.lookupSerialNumberField).val(),e=$jq(s.redirectBose).attr("href").replace("html","searchProduct.html"),f=$jq(s.searchType).html(),g=$jq(s.lookupSerialNumberInput),i=$jq(s.textErrorMessage).text();void 0!==a&&j(a)&&"serial4digitSearch"===f?(Bose.TextField.markInvalid(g,$jq(s.serialNumberLookupInvalidInputMsg).text(),Bose.TextField),Bose.TextInput.showErrorMessage(g),q()):void 0===a||null===a||j(a)?u=0:(u=0,k(b,a)),"serial4digittextSearch"===f&&(void 0===a||null===a||j(a)?$jq.ajax({url:e,type:"GET",data:{searchTerm:d},dataType:"json"}).done(function(c){"0"===c.total?(Bose.TextField.markInvalid(g,i,Bose.TextField),Bose.TextInput.showErrorMessage(g),$jq(s.serialNumberLookup).find(s.globalErrorMsg).html(i)):(Bose.TextField.markValid($jq(s.lookupSerialNumberField),Bose.TextField),u=0,k(b,a))}).fail(function(){h()}).always(function(){Bose.ButtonLink.enable(c)}):(u=0,k(b,a))),Bose.ErrorHandler.hideError(s.serialNumberLookup)}function j(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function k(a,b){var c="serial4digitSearch"===$jq(s.searchType).html(),d="serial4digittextSearch"===$jq(s.searchType).html(),e=$jq(s.serialNumberLookup),f="";if(c&&(null!==b.partOf&&(f="true"),e.length&&(e.find(s.dateOfManufacturingHiddenField).val(b.dateOfManufacture),e.find(s.productCodeHiddenField).val(b.productCode),e.find(s.productVariantCodeHiddenField).val(b.variantCode),e.find(s.serialNumberHiddenField).val(a.valueOf()),e.find(s.serialNumberLookupHiddenFieldPartOf).val(f),Bose.Forms.submitForm($jq(s.lookupSerialNumberButton)))),d&&void 0!==b&&null!==b){
null!==b.partOf&&(f="true"),e.length&&(e.find(s.dateOfManufacturingHiddenField).val(b.dateOfManufacture),e.find(s.productCodeHiddenField).val(b.productCode),e.find(s.productVariantCodeHiddenField).val(b.variantCode)),e.find(s.serialNumberHiddenField).val(a.valueOf()),e.find(s.serialNumberLookupHiddenFieldPartOf).val(f);var g=$jq(s.redirectBose).attr("href"),h=window.location.origin;g=b.productCode?h+g+"?serialNumber="+encodeURIComponent(a.valueOf())+"&productCode="+b.productCode:h+g+"?serialNumber="+encodeURIComponent(a.valueOf()),window.location.href=g}}function l(){var a=$jq(s.lookupSerialNumberField);a.length&&a.val(a.val().toUpperCase()),Bose.ErrorHandler.hideError(s.serialNumberLookup)}function m(a){var b=$jq(s.lookupSerialNumberField),c=b.val(),d=$jq(s.searchType).html();"serial4digitSearch"===d&&c.length>=w&&b.val(b.val().substr(0,w)),"serial4digittextSearch"===d&&c.length>=x&&b.val(b.val().substr(0,x)),13===a.keyCode&&(a.preventDefault(),n())}function n(){var a,b=$jq(s.lookupSerialNumberButton),c=$jq(s.lookupSerialNumberField),d=c.val().toUpperCase(),f=$jq(s.searchType).html(),j=$jq(s.lookupSerialNumberInput);return"serial4digitSearch"===f&&g(),v=!0,$jq(s.lookupSerialNumberApiUrlField).length&&(a=$jq(s.lookupSerialNumberApiUrlField).val()+"/products/"+d),$jq(s.serialNumberfirstErrorMsg).length&&(Bose.TextInput.showErrorMessage(j),Bose.TextInput.setErrorMessage(j,"")),$jq(s.serialNumberLookupValidationErrorMsg).length&&(Bose.TextInput.showErrorMessage(j),Bose.TextInput.setErrorMessage(j,"")),c.val(d),o(),c.trigger("doValidation",!0),""===c.val().trim()?void e():g()||"serial4digitSearch"!==f?(Bose.ButtonLink.disable(b),void $jq.ajax({type:"GET",url:a,dataType:"json"}).done(function(a){i(a,d)}).fail(function(a){"serial4digitSearch"===f?h(a):i({},d)}).always(function(){Bose.ButtonLink.enable(b)})):void q()}function o(){var a=$jq(s.serialNumberLookupExceedsInvalidCountMessage),b=$jq(s.serialNumberfirstErrorMsg);b.hasClass(t.hide)||b.addClass(t.hide),a.hasClass(t.hide)||a.addClass(t.hide)}function p(){var a=$jq(s.serialNumberLookup),b=$jq(s.lookupSerialNumberField).val();if(null!==u&&$jq(s.serialNumberLookupExceedsInvalidCountMessage).length&&$jq(s.serialNumberfirstErrorMsg).length){var c="";u>r?(c=$jq(s.serialNumberLookupExceedsInvalidCountMessage).html(),b&&(Bose.DataLayer.setVariable("Product","SerialNumber",b),$jq(document).trigger("trackSerialNumber"))):c=$jq(s.serialNumberfirstErrorMsg).text(),null!==c&&(Bose.TextInput.showErrorMessage($jq(s.lookupSerialNumberInput)),a.find(s.globalErrorMsg).html(c))}Bose.ErrorHandler.hideError(s.serialNumberLookup)}function q(){null!==u&&u++,p()}var r,s={lookupSerialNumberField:".js-serialNumberLookupField input[name=serial]",lookupSerialNumberInput:".js-serialNumberLookupInput",lookupSerialNumberButton:".js-serialNumberLookupSubmitButton",lookupSerialNumberApiUrlField:".js-serialNumberLookupApiUrlField",productCodeHiddenField:".js-productCodeHiddenField",productVariantCodeHiddenField:".js-productVariantCodeHiddenField",dateOfManufacturingHiddenField:".js-dateOfManufacturingHiddenField",textField:".js-serialNumberLookup-textField",path:".js-serialNumberLookup-path",serialNumberHiddenField:".js-serialNumberHiddenField",serialNumberfirstErrorMsg:".js-serialNumberLookup-errorMsgWithInLimit",serialNumberLookupRedirectURL:".js-serialNumberLookup-redirectURL",serialNumberLookupInvalidInputMsg:".js-serialNumberLookup-invalidInput",serialNumberLookupErrorMessage:".bose-newErrorMessage",serialNumberLookupInvalidAttempsCount:".js-serialNumberLookup-attemptsCount",serialNumberLookupExceedsInvalidCountMessage:".js-serialNumberLookup-errorMsgAfterLimit",serialNumberLookupValidationErrorMsg:".js-serialNumberLookup-validationErrMsg",serialNumberLookupEmptyValueErrorMsg:".js-emptyValueErrorMessage",serialNUmberLookupInvalidValueErrorMsg:".js-invalidErrorMessage",serialNumberLookup:".bose-serialNumberLookup",globalErrorMsg:".bose-newErrorMessage",serialNumberLookupHiddenFieldPartOf:".js-serialNumberHiddenFieldPartOf",serialNUmberInputContainer:".bose-serialNumberLookup__inputFieldContainer",searchType:".js-searchType",textErrorMessage:".js-errorMsgTextSearchNoResults",findSerialNumberLink:".bose-serialNumberLookup__findSerialLink",redirectBose:".js-redirectBose"},t={hide:"hide"},u=0,v=!1,w=17,x=100;return{init:a,selectors:s,handleSelectedProduct:k,showErrorMessage:p,hideErrorMessage:o,isValidInputValue:g,showAndHideErrorMessagesOnClientValidations:e,handleSerialNumberLookupInfo:n,handleHaystackError:h,handleOnFocusEvent:c,showValidationErrorMessage:f,findMySerialNumberAnalytics:b}}(),$jq(document).ready(function(){Bose.ProductId.init()});var Bose=Bose||{};Bose.ProductId=function(){function a(){$jq(e.productIdButton).on("click",c),$jq(".productId").length>0&&$jq(e.serialNumber).val()&&b(),$jq(e.searchArticleTitle).hide(),$jq(e.loadMoreErrorMessage).hide(),$jq(e.searchArticleTitle).length<=f&&$jq(e.loadMore).hide(),$jq(e.searchArticleTitle).slice(0,f).show(),$jq(e.loadMore).on("click",d)}function b(){Bose.DataLayer.setVariable("Product","SerialNumber",$jq(e.serialNumber).val()),$jq(document).trigger("trackProductIssue")}function c(){var a=$jq(this).closest(e.variantButtonContainer),b=a.data("productName"),c=a.data("productCode"),d=a.data("variantColour");$jq(e.variantProductName).val(b),$jq(e.variantProductCode).val(c),$jq(e.variantColourField).val(d),Bose.Forms.submitForm(this)}function d(a){a.preventDefault();var b=$jq(e.searchArticleTitleHidden),c=$jq(e.loadMoreErrorMessage);b.slice(0,f).show(),0===$jq(e.searchArticleTitleHidden).length&&($jq(this).hide(),c.show())}var e={variantProductCode:".js-productCodeHiddenField",variantProductName:".js-productNameHiddenField",productIdButton:".js-bose-productId__confirmButton",variantButtonContainer:".bose-productId__buttonContainer",variantColourField:".js-variantColourHiddenField",serialNumber:".js-serialNumberHiddenField",searchArticleTitle:".js-bose-searchArticleTitle",searchArticleTitleHidden:".js-bose-searchArticleTitle:hidden",loadMore:".js-loadMoreButton",loadMoreErrorMessage:".bose-searchArticle__buttonContainer"},f=12;return{init:a,selectors:e}}(),$jq(document).ready(function(){Bose.SearchArticle.init()});var Bose=Bose||{};Bose.SearchArticle=function(){function a(){$jq(i.searchArticleField).val(""),$jq(i.searchArticleButton).on("click",d).on("mousedown",c),$jq(i.searchArticleField).on("keydown",g).on("focusout",b).val(""),Bose.TextField.markValid($jq(i.searchArticleField),Bose.TextField),$jq(i.searchArticleField).attr("autocomplete","off")}function b(){$jq(i.globalSearchErrorMsg).html("")}function c(a){a.preventDefault(),$jq(i.searchArticleButton).focus()}function d(){var a=$jq(i.searchArticleButton),b=$jq(i.searchArticleField).val(),c=$jq(i.productCodeHiddenSearchField).val(),d=$jq(i.redirectBose).attr("href").replace("html","searchArticle.html")+"?searchTerm="+encodeURIComponent(b)+"&productCode="+c;if(h(),""===b)return void e($jq(i.searchArticleEmptyValueErrorMsg).html());$jq.ajax({url:d,type:"GET"}).done(function(a){"0"===a.total?e($jq(i.searchArticleEmptyResult).html()):(Bose.TextField.markValid($jq(i.searchArticleField),Bose.TextField),f(b))}).fail(function(){e($jq(i.searchArticleEmptyResult).html())}).always(function(){Bose.ButtonLink.enable(a)})}function e(a){var b=$jq(i.globalSearchErrorMsg);b.html(a),b.show(),Bose.TextField.markInvalid($jq(i.searchArticleInput),a,Bose.TextField)}function f(a){var b=$jq(i.productCodeHiddenSearchField).val(),c=$jq(i.redirectBose).attr("href"),d=window.location.origin,e=d+c+"?productCode="+b+"&searchTerm="+encodeURIComponent(a);window.location.href=e}function g(a){"Enter"!==a.key&&13!==a.keyCode||(a.preventDefault(),d())}function h(){var a=$jq(i.globalSearchErrorMsg);a.hasClass(j.hide)||a.addClass(j.hide)}var i={searchArticleField:".js-searchArticleField input[name=searchText]",searchArticleInput:".js-searchArticleInput",searchArticleButton:".js-searchArticleSubmitButton",productCodeHiddenSearchField:".js-productCodeHiddenSearchField",searchArticlefirstErrorMsg:".js-searchArticle-errorMsgWithInLimit",searchArticleInvalidInputMsg:".js-searchArticle-invalidInput",searchArticleInvalidAttempsCount:".js-searchArticle-attemptsCount",searchArticleExceedsInvalidCountMessage:".js-searchArticle-errorMsgAfterLimit",searchArticleEmptyValueErrorMsg:".js-searchEmptyValueErrorMessage",searchArticleEmptyResult:".js-errorMsgTextSearchArticleNoResults",searchArticle:".bose-searchArticle",globalSearchErrorMsg:".bose-newErrorMessage",redirectBose:".js-redirectBose",currentUrl:".js-currentPath"},j={hide:"hide"};return{init:a,selectors:i,handleSearchArticleInfo:d}}();
var Bose=Bose||{};Bose.Forms=function(a){function b(a){var b=$jq("form#"+a.formId),c=b.data("validationError"),g=b.find("input:visible, textarea, select").filter(".js-bose-setFocus"),i=$jq(g).prop("tagName"),k=b.data("dtm-event"),l=b.find(x.errorMessage).data("errorMessage");if(void 0!==l&&"string"==typeof l)switch(k){case"loginB2B_login":$jq(document).trigger("forms.B2BloginError",[l]);break;case"b2bcheckout_placeorder":$jq(document).trigger("forms.B2BCheckoutError",[l])}b.data("options",a),d(b),e(),j(g,i),void 0!==c&&$jq(document).trigger("forms.validationError",[c]),0===b.closest(".bose-formFlowPanel").length&&$jq(document).trigger("forms.trackFormLoaded",[b]),"true"===a.ajaxEnabled?f(a.formId):m(a.formId),$jq(document).on("highLightErrorFields",h)}function c(){$jq(this).closest("form").submit()}function d(a){a.hasClass(y.submitOnEnter)&&a.find("input").keypress(function(a){a.which===z&&n(a.currentTarget)})}function e(){Bose.TextField.setActiveLabel(Bose.TextField),Bose.TextArea.setActiveLabel(Bose.TextArea),Bose.Select.setActiveLabel()}function f(a){$jq("form#"+a+".ajax-enabled").submit(g)}function g(a,b){a&&a.preventDefault();var c=$jq(this),d=!0,e=c.attr("id");return(b||void 0===b)&&(d=Bose.Forms.Validation.isValid(c)),d?(c.find(".bose-button").trigger("setLoading"),$jq(document).trigger("enableCheckoutLoader"),$jq.ajax({url:c.attr("action"),method:c.attr("method"),dataType:"json",data:c.serialize(),success:function(a){c.find(".bose-button").trigger("setCompleted"),$jq(document).trigger("disableCheckoutLoader");var b=v[e];void 0===b?i(a):b(a),Bose.Select.resetSelectMenuToNative()},error:function(a,b){c.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader");var d=w[e];void 0===d?l(a,b):d(a,b)}}).done(function(){h()})):(c.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader")),!1}function h(){var a,b=$jq("form[data-validation-error]:visible"),c=b.find(x.errorMessage);c.is(":visible")&&void 0!==c.data("associated-fields")&&(a=c.data("associated-fields").split(","),$jq.each(a,function(a,b){var c=$jq('[name$="'+b+'"]'),d=$jq('[name$="'+b+'"]').closest(Bose.TextField.selectors.container);c.is("input")?(Bose.TextField.init(d),Bose.TextInput.markInvalid(d,"",Bose.TextField)):c.is("select")&&Bose.Select.markInvalid(c.closest(Bose.Select.selectors.container),"")})),c.is(":visible")&&void 0!==c.data("error-message")&&-1!==c.data("error-message").indexOf("postcode")&&$jq(x.zipCodeField).blur()}function i(a){if(void 0!==a&&void 0!==a.redirectUrl)window.location=a.redirectUrl;else if(void 0!==a&&void 0!==a.stepId){var b=$jq('.bose-formWrapper[data-step-name="'+a.stepId+'"]'),c=b.closest(".bose-formFlow").data("disabledStepHistory");void 0===c&&(c=!1),b.html(a.content),Bose.FormFlow.openStep(a.stepId,!c,a.additionalContent),Bose.Forms.initFields(b),"step_payment"===a.stepId&&(Bose.Tooltip.init(),$jq('input[name="payment.cardNumber"]').val(""),$jq('input[name="payment.ccv"]').val(""),$jq(".bose-paymentControl .bose-select__select .ui-selectmenu-text").text(""),$jq('select[name$="payment."]').closest(".bose-select").attr("class","bose-select"))}}function j(a,b){a.length>0&&("select"===b.toLowerCase()?Bose.Select.openAndFocus.call(a):Bose.TextField.autoFocus(a))}function k(a){Bose.HiddenField.init(a),Bose.TextField.init(a),Bose.Checkbox.init(a),Bose.Select.init(a),Bose.Button.init(),Bose.AddressValidation.init(a),Bose.AddressValidationSuggestions.init(a),Bose.Overlay.init()}function l(a,b){$jq(document).trigger("forms.submitError",[b])}function m(a){$jq("form#"+a).not(".ajax-enabled").submit(function(){var a=$jq(this),b=!!a.data("validated")||Bose.Forms.Validation.isValid(a,!0);return a.find(".bose-button").trigger(b?"setCompleted":"setError"),b})}function n(a,b){var c=$jq(a),d=c.closest("form"),e=d.find('input[type="hidden"][name="payment.paymentInfoType"]:not([disabled="disabled"])');if(!Bose.Forms.Validation.isValid(d,!0))return d.find(".bose-button").trigger("setError"),void $jq(document).trigger("disableCheckoutLoader");(void 0!==b||void 0===Bose.AddressValidation||p(d,c,b))&&(e.length&&"CreditCardPaymentInfo"===e.val()&&!b?Bose.Payment.submit(d,Bose.PaymentControl.getPaymentProvider(d)):o(c,d,b))}function o(a,b,c){var d=b.find('input[type="hidden"][name="payment.paymentInfoType"]:not([disabled="disabled"])');$jq(document).trigger("forms.actualSubmit",[a]),a.trigger("setLoading"),$jq(document).trigger("enableCheckoutLoader"),d.length&&"CreditCardPaymentInfo"===d.val()&&!c?Bose.Payment.submit(b,Bose.PaymentControl.getPaymentProvider(b)):a.closest("form").submit()}function p(a,b,c){var d=a.find(".bose-address .bose-address__form:visible");if(!d.length)return!0;d=d.closest(".bose-address");var e=$jq(d[0]),f=e.data("avs-enabled"),g=e.data("avs-type"),h=!1,i=!1;if(f){if(d.each(function(){var b=$jq(this),c=b.find(".bose-address__addressInfo"),d=q(c);if("assisted"===g||"assisted-lookup"===g){if(d)return;if(!c.filter(":visible").length)return Bose.Forms.Validation.displayError(a,Bose.Translation.getSiteTranslation("Error"),Bose.Translation.getSiteTranslation("Please search for an address, or fill one in manually.")),a.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader"),void(i=!0)}Bose.AddressValidation.isDirty(b)&&(h=!0)}),i)return!1;if(h&&"assisted-lookup"!==g)return $jq.when(Bose.AddressValidation.validateForm(a)).done(function(){o(b,a,c)}).fail(function(){b.trigger("setDefault")}),!1}return!0}function q(a){return 0===a.find('input[required="required"],input[data-required="required"]').length}function r(a,b){v[a]=b}function s(a,b){w[a]=b}function t(a){return nano('<div class="bose-form bose-form--showErrors"><div class="bose-form__errorTitle">{errorTitle}</div><div class="bose-form__errorMessage" data-error-message={errorCode}>{errorMessage}</div></div>',{errorTitle:a.errorTitle,errorMessage:a.errorMessage,errorCode:a.errorCode})}function u(a){history.replaceState({},document.title,location.protocol+"//"+location.host+location.pathname),a.find(".bose-form--showErrors").remove()}var v={},w={},x={submitOnClick:".js-form-submitOnClick",formContent:".bose-formFlowPanel__content",errorMessage:".bose-form__errorMessage",zipCodeField:'input[name="shipping.postalCode"]'},y={submitOnEnter:"js-form-submitOnEnter"},z=13;return $jq(document).on("click",x.submitOnClick,c),a.initForm=b,a.doActualAjaxSubmit=g,a.doActualSubmit=o,a.submitForm=n,a.initFields=k,a.registerSuccessCallBack=r,a.registerErrorCallBack=s,a.generateHtmlErrorBlock=t,a.removeErrorsFromForm=u,a._classes=y,a}(Bose.Forms||{});var Bose=Bose||{};Bose.Forms=function(a){function b(){h=[Bose.TextField,Bose.HiddenField,Bose.Checkbox,Bose.Select,Bose.TextArea,Bose.DatePicker,Bose.RadioButton,Bose.QuantitySelector,Bose.UploadButton],$jq(document).trigger("highLightErrorFields")}function c(a){return d(a,!1,!0)}function d(a,b,c){var d=!0,e=!0,i={type:"CLIENT",key:"form_validation_error",fields:[]},j=[],k=b;if(void 0===k&&(k=!1),!a.hasClass("bose-noValidation")){if(h.forEach(function(b){if(void 0!==b){var c=b.selectors.field+(k?':not([name*=".search."])':""),f=a.find(c);f.trigger("doValidation",!0),f.each(function(){var a=$jq(this);if("disabled"!==a.attr("disabled")&&!b.isValid(a,b)){d=!1,b!==Bose.HiddenField&&(e=!1);var c=a.attr("name");j.push(c),i.fields.push({name:c})}})}}),c)return d;if(d)g(a);else{var l=a.data("options");if(void 0!==l.hideError&&"false"!==l.hideError||f(a,l.fieldErrorTitle,e?"":l.fieldErrorMessage),i.fields.length>0){var m=$jq(".js-errorValidate:visible").first().offset();$jq(document).trigger("forms.validationError",[i]),m&&$jq("html, body").animate({scrollTop:m.top-70},500)}}}return d}function e(a){var b=a.data("options");Bose.Forms.Validation.displayError(a,b.fieldErrorTitle,b.fieldErrorMessage)}function f(a,b,c){a.find(".bose-form__errorTitle").html(b).show(),a.find(".bose-form__errorMessage").html(c).show(),a.find(".bose-button").trigger("setError"),$jq("html, body").animate({scrollTop:$jq(".bose-form__errorTitle").first().offset().top},500)}function g(a){a.find(".bose-form__errorTitle").text("").hide(),a.find(".bose-form__errorMessage").text("").hide()}var h=[];return a.Validation={init:b,isValid:d,isValidSilent:c,displayDefaultError:e,displayError:f,hideError:g},a}(Bose.Forms||{});var Bose=Bose||{};Bose.Checkbox=Bose.Checkbox||{},Bose.Checkbox.selectors={container:".bose-checkbox",field:".bose-checkbox:not(.bose-checkbox--simple) .bose-checkbox__input:not(.bose-checkbox__input--hidden)"},Bose.Checkbox.selectors.fieldNotInitialized=Bose.Checkbox.selectors.field+":not([data-initialized])",Bose.Checkbox.init=function(a){var b,c=a;c?b=c.find(Bose.Checkbox.selectors.fieldNotInitialized):(b=$jq(Bose.Checkbox.selectors.fieldNotInitialized),c=$jq(Bose.Checkbox.selectors.container)),b.on("change",Bose.Checkbox.doValidation),b.on("change",Bose.Checkbox.doAriaAttribs),c.on("keydown",Bose.Checkbox.captureKeys),b.bind("setEnabled",Bose.Checkbox.enableField).bind("setDisabled",Bose.Checkbox.disableField).bind("doValidation",Bose.Checkbox.doValidation),b.attr("data-initialized",!0)},Bose.Checkbox.disableField=function(){$jq(this).prop("disabled",!0),$jq(this).closest(Bose.Checkbox.selectors.container).addClass("bose-checkbox--readOnly")},Bose.Checkbox.enableField=function(){$jq(this).prop("disabled",!1),$jq(this).closest(Bose.Checkbox.selectors.container).removeClass("bose-checkbox--readOnly")},Bose.Checkbox.resetState=function(a){a.removeClass("bose-checkbox--error bose-checkbox--valid bose-checkbox--active"),a.find("span.bose-checkbox__label-title").show(),a.find("span.bose-checkbox__errorMessage").text("")},Bose.Checkbox.isValid=function(a){var b=a.closest(Bose.Checkbox.selectors.container);return!b.is(":visible")||!b.hasClass("bose-checkbox--error")},Bose.Checkbox.markValid=function(a){a.removeClass("bose-checkbox--error").removeClass("bose-checkbox--active").addClass("bose-checkbox--valid"),a.find("span.bose-checkbox__errorMessage").text("")},Bose.Checkbox.markInvalid=function(a,b){a.removeClass("bose-checkbox--valid").removeClass("bose-checkbox--active").addClass("bose-checkbox--error"),a.find("span.bose-checkbox__errorMessage").text(b)},Bose.Checkbox.doValidation=function(){var a=$jq(this),b=$jq(a.siblings(".bose-checkbox__input--hidden")),c=a.closest(Bose.Checkbox.selectors.container);if(c.hasClass("bose-checkbox--readOnly"))return void Bose.Checkbox.resetState(c);var d=b.data("options"),e=a.is(":checked"),f=b.data("sendfalsewhenunchecked")?"false":"";if(b.val(e?a.val():f),"true"!==d.required)e?Bose.Checkbox.markValid(c):Bose.Checkbox.resetState(c);else if(e)Bose.Checkbox.markValid(c);else{var g=d.messages.required;Bose.Checkbox.markInvalid(c,g)}},Bose.Checkbox.doAriaAttribs=function(){var a=$jq(this),b=a.parent(Bose.Checkbox.selectors.container),c=a.siblings(".bose-checkbox__input--hidden"),d=c.val();d&&"false"!==d?b.attr("aria-checked","true"):b.attr("aria-checked","false")},Bose.Checkbox.captureKeys=function(a){var b=a.which;13!==b&&32!==b||$jq(a.target).find("input[data-initialized]").click()};var Bose=Bose||{};Bose.RadioButton=function(){function a(a){var f;f=a?a.find(q.uninitialized):$jq(q.uninitialized),f.on("setEnabled",d).on("setDisabled",e).on("click",m).on("change",c),f.addClass(r.initialized),f.each(function(){b($jq(this).closest(q.field))})}function b(a){a.hasClass(r.initializedGroup)||(a.on("doValidation",f),a.addClass(r.initializedGroup))}function c(){var a=$jq(this);a.closest(q.field).find(q.radioButton).removeClass(r.checked),a.addClass(r.checked)}function d(){var a=$jq(this);a.find(q.input).prop("disabled",!1),a.removeClass(r.readOnly)}function e(){var a=$jq(this);a.find(q.input).prop("disabled",!0),a.addClass(r.readOnly)}function f(){var a=$jq(this);g(a)&&k(a)}function g(a){return void 0===a.data("required")||(h(a).filter(":checked:visible:not(:disabled)").length>0||(i(a,a.data("requiredMessage")),!1))}function h(a){var b=a.data("name");return"string"==typeof b&&b.length>0?$jq(q.input).filter('[name="'+b+'"]'):a.find(q.input)}function i(a,b){if(j(a),a.addClass(r.errorGroup),void 0!==b){var c=a.find(q.errorMessage);c.length?c.text(b):a.prepend(n(b))}}function j(a){h(a).closest(q.radioButton).addClass(r.error)}function k(a){a.removeClass(r.errorGroup),h(a).closest(q.radioButton).removeClass(r.error),a.find(q.errorMessage).remove()}function l(a){return!a.hasClass(r.errorGroup)}function m(){var a=$jq(this),b=a.closest(q.field);0===b.length&&(b=$jq('[data-name="'+a.find(q.input).attr("name")+'"]')),k(b)}function n(a){return $jq(nano('<span class="bose-radioButtonGroup__errorMessage js-radioButtonGroup-errorMessage">{msg}</span>',{msg:a}))}function o(a){return p(a),nano('<div class="bose-radioButton {styleClass} {disabledClass}">     <label class="bose-radioButton__label">         <input name="{name}" type="radio" class="bose-radioButton__input {inputClass}" value="{value}" {disabled} {checked}/>         <span class="bose-radioButton__inputIcon bose-radioButton__inputIcon--short"></span>         {text}     </label> </div>',a)}function p(a){a.checked=a.checked?"checked":"",a.disabled=a.disabled?"disabled":"",a.disabledClass=a.disabled?"-readOnly":""}var q={uninitialized:".bose-radioButton:not(.js-radioButton--initialized)",input:".bose-radioButton__input",radioButton:".bose-radioButton",field:".js-radioButtonGroup",errorMessage:".js-radioButtonGroup-errorMessage"},r={initialized:"js-radioButton--initialized",initializedGroup:"js-radioButtonGroup--initialized",error:"bose-radioButton--error",errorGroup:"bose-radioButtonGroup--error",readOnly:"-readOnly",checked:"bose-radioButton--checked"};return{init:a,isValid:l,create:o,selectors:q,_classes:r}}();var Bose=Bose||{};Bose.TextArea=$jq.extend(!0,{},Bose.TextInput),Bose.TextArea.classes={active:"bose-textArea--active",valid:"bose-textArea--valid",error:"bose-textArea--error js-errorValidate",readOnly:"bose-textArea--readOnly",type:"textarea"},Bose.TextArea.selectors={container:".bose-textArea",field:".bose-textArea .bose-textArea__input"},Bose.TextArea.init=function(a){Bose.TextInput.init(a,Bose.TextArea)};var Bose=Bose||{};Bose.TextField=$jq.extend(!0,{},Bose.TextInput),Bose.TextField.classes={active:"bose-textField--active",valid:"bose-textField--valid",error:"bose-textField--error js-errorValidate",readOnly:"bose-textField--readOnly",type:"input"},Bose.TextField.selectors={container:".bose-textField",field:".bose-textField .bose-textField__input",hiddenEmailValidationStatus:'input[name="emailValidationStatus"]',error:".bose-textField--error"},Bose.TextField.init=function(a){Bose.TextInput.init(a,Bose.TextField)},Bose.TextField.autoFocus=function(a){var b=$jq(a),c=b.closest(Bose.TextField.selectors.container),d=b.parent().find(".bose-textField__label-title").text();c.hasClass(Bose.TextField.classes.readOnly)||c.addClass(Bose.TextField.classes.active),b.focus().attr("aria-label",d)},Bose.TextField.doChecks=function(a,b,c){return Bose.TextInput.doChecks(a,b,c)&&c.doLuhnCheck(a,b,c)&&c.doIbanCheck(a,b,c)&&c.doEmailCheck(a,b,c)},Bose.TextField.doEmailCheck=function(a,b,c){if(void 0!==a.data("options")&&"emailaddressValidator"===a.data("options").validator){if(""===a.val())return!1;var d=b.find(Bose.TextField.selectors.hiddenEmailValidationStatus);if(d.length){var e=Bose.DataLayer.Data.Page.country.toUpperCase(),f=Bose.DataLayer.Data.Page.language.toLowerCase(),g=d.data("stub"),h={address:{emailAddress:a.val()}},i="/bin/avs/emailaddress?countryCode="+e+"&languageCode="+f+"&stub="+g;$jq.ajax(i,{contentType:"application/json",method:"POST",data:JSON.stringify(h)}).done(function(e){if("valid"===e.status||"unknown"===e.status)c.markValid(b,c);else{var f=a.data("options").messages.invalid;c.markInvalid(b,f,c)}d.val(e.status)}).fail(function(){d.val("client_error")})}}return!0},Bose.TextField.doLuhnCheck=function(a,b,c){if(void 0!==a.data("options")&&"true"===a.data("options").luhn){if(""===a.val())return!1;for(var d=a.val(),e=parseInt(d.substr(d.length-1),10),f=d.slice(0,-1),g=f.split("").reverse().join(""),h=g.split(""),i=0,j=[],k=2,l=0;l<h.length;l++){if(k%2==0){var m=2*h[l];m>9&&(m-=9),j.push(m)}else j.push(parseInt(h[l],10));k++}for(var n=0;n<j.length;n++)i+=j[n];if((i+=e)%10!=0){var o=a.data("options").messages.wrongFormat;return c.markInvalid(b,o,c),!1}}return!0},Bose.TextField.doIbanCheck=function(a,b,c){if(void 0!==a.data("options")&&"true"===a.data("options").ibanCheck){if(""===a.val())return!1;var d=a.val().replace(/\s+/g,""),e=d.substring(0,2).toUpperCase(),f=(e.charCodeAt(0)-55).toString().concat((e.charCodeAt(1)-55).toString()),g=d.substring(4).concat(f+d.substring(2,4));if(isNaN(g))return!1;for(;g.length>9;){g=g.substring(0,9)%97+g.substring(9)}if(g%97!=1){var h=a.data("options").messages.wrongFormat;return c.markInvalid(b,h,c),!1}}return!0};var Bose=Bose||{};Bose.PasswordField=function(){function a(){$jq(d.component).length>0&&($jq(d.passwordToggle).on("click",b),$jq(document).on("forms.actualSubmit",c))}function b(){var a,b=$jq(this),c=b.closest(d.component),f=c.find(d.input),g=c.find(d.passwordToggle);"password"===f.attr("type")?(a="text",g.addClass(e.iconActive)):(a="password",g.removeClass(e.iconActive)),f.attr("type",a)}function c(){$jq(d.input).each(function(a,c){var d=$jq(c);"password"!==d.attr("type")&&b.call(d)})}var d={component:".js-passwordField",passwordToggle:".js-passwordField-togglePW",input:".js-passwordField-input"},e={iconActive:"bose-passwordField__icon--active"};return{init:a,_selectors:d}}();var Bose=Bose||{};Bose.Address=function(){function a(a){var d=$jq('input[name="'+a+'"]');d.on("change",c),l("multipleAddresses",!d.first().prop("checked")),b()}function b(){$jq(m.checkoutPanel).find(m.email).addClass("js-bose-setFocus"),$jq(m.state).on("selectmenuchange change",function(){d.call(this),j()}),$jq(m.town).on("selectmenuchange change",function(){d.call(this),j()}),$jq(m.country).on("selectmenuchange change",function(){g.call(this),j()}),$jq(m.postalcode).on("blur",k).on("updateFields blur",h),$jq(m.billingpostalcode).on("blur",k).on("updateFields blur",h),Bose.Select.init(),$jq(m.country).each(function(){g.call(this)}),j(),$jq(m.country+' option[value="US"]').length&&i(),Bose.Select.resetSelectMenuToNative(),Bose.Tooltip.initTooltip($jq(m.infoIcon),{content:{text:$jq(m.infoIcon).data("content")},position:{target:"event"},style:{classes:"bose-tooltip bose-tooltip--text"}})}function c(){var a=$jq(this),b=a.closest(".bose-address"),c=b.parent().find(".bose-address--summary"),d=c.is(":visible");b.find(".bose-address__form").toggle(),c.removeClass("hide").removeClass("show"),d?c.hide():c.show(),l("multipleAddresses",!a.first().prop("checked")),$jq(m.postalCheck)?$jq(m.billingpostalcode).on("blur",k):$jq(m.billingpostalcode).off("blur",k)}function d(){var a,b=$jq(this).find(":selected"),c=b.val(),d=b.data("country"),e=b.data("overrideCountry"),g=$jq(this).closest(".bose-address"),h=g.find(m.state).length?g.find(m.state):g.find(m.town),i=g.find(m.country),j=i.val(),k=i.attr("name"),l=null;i.find("option").prop("selected",!1),e?(l=i.find("option[data-override-state="+e+"]"),l.attr("selected","selected")):d&&(l=i.children().filter(function(){return void 0===$jq(this).data("overrideState")&&$jq(this).val()===d}),l.attr("selected","selected")),null===l?void 0===i.find('option[value="US"]').val()?(a=i.find("option").first().val(),i.val(a),i.find("option[value="+a+"]").first().attr("selected","selected")):(i.val("US"),i.find('option[value="US"]').attr("selected","selected")):(i.val(d),i.find("option[value="+d+"]").prop("selected",!0)),i.selectmenu().selectmenu("refresh"),(d||e)&&Bose.Select.setActive.call(i),n[k]=i.val(),n[k]!==j&&h.length>0&&(f(h,n[k]),h.val(c),h.selectmenu().selectmenu("refresh"),Bose.Select.setActive.call(h))}function e(a,b,c){for(var d=0;d<b.length;d++)if("-1"===c||b[d].country===c){var e=$jq('<option value="'+b[d].state+'"> '+b[d].label+"</option>");b[d].country&&e.data("country",b[d].country),b[d].override&&e.data("override-country",b[d].override),a.append(e)}}function f(a,b){var c=[];a.data("initialStates")||(a.find("option").each(function(a,b){var d=$jq(b);c.push({country:d.data("country"),state:d.val(),label:d.text(),override:d.data("override-country")})}),a.data("initialStates",c)),0===c.length&&(c=a.data("initialStates")),b&&(a.find("option").remove(),c&&$jq.isArray(c)&&c.length>0&&e(a,c,b),a.find("option").length>=1&&a.prepend('<option value="-1"></option>'))}function g(){var a,b,c=$jq(this).find(":selected").val(),d=$jq(this).find(":selected").data("overrideState"),e=$jq(this).closest(".bose-address"),g=e.find(m.state).length?e.find(m.state):e.find(m.town),h=$jq(this).attr("name");if(g.length>0){var i=g.val();f(g,c),b=0!==g.find('option[value="-1"]').length,a=d||(b?"-1":g.find('option[data-country="'+c+'"]').first().val()),g.val(i),(null===g.val()||d)&&a&&g.val(a),g.selectmenu().selectmenu("refresh"),Bose.Select.setActive.call(g)}n[h]=c}function h(a){var b=$jq.trim(this.value),c=Bose.DataLayer.Data.Page.formattedLocale;a.stopPropagation(),"en_us"===c&&$jq.ajax({url:"/"+c+"/checkout.zipcode.html/zipcodeLookup",method:"POST",dataType:"json",data:{zipcodeValue:b},success:function(a){$jq(m.city).focus().val(a.zipCode.city).blur(),$jq(m.country).val(a.zipCode.countryCode),$jq(m.state).val(a.zipCode.countryStateCode),$jq(m.country+","+m.state).trigger("change"),Gridle.isActive("large")&&$jq(m.country+","+m.state).selectmenu().selectmenu("refresh")},error:function(){$jq(m.city).val(""),$jq(m.state).val("-1").trigger("change"),$jq(m.country).val("US").trigger("change"),Gridle.isActive("large")&&$jq(m.country+","+m.state).selectmenu().selectmenu("refresh"),$jq(m.state).closest(".bose-select--error").removeClass("bose-select--error js-errorValidate").next(".bose-newErrorMessage").hide()}})}function i(){$jq(m.country).each(function(){$jq(this).find('option[value="PR"]').attr("data-override-state","PR-PR"),$jq(this).find('option[value="VI"]').attr("data-override-state","VI-VI")}),$jq(m.state).each(function(){$jq(this).find('option[value="US-PR"]').attr("data-override-country","US-PR"),$jq(this).find('option[value="US-VI"]').attr("data-override-country","US-VI")})}function j(){$jq(m.country).selectmenu().selectmenu("refresh").selectmenu("close"),$jq(m.country).css("display","inline-block"),$jq(m.state).selectmenu().selectmenu("refresh").selectmenu("close"),$jq(m.state).css("display","inline-block"),Bose.Select.resetSelectMenuToNative()}function k(a){var b=$jq(this),c=b.data("blockedpostalcode");0!==c.length&&(b.removeClass("bose-textField--invalidPostalCode"),($jq('input[name="shippingAddressSameAsBillingchk"]').is(":checked")&&"shipping.postalCode"!==$jq(this).attr("name")||"shipping.postalCode"===$jq(this).attr("name"))&&$jq.each(c,function(c,d){if(d===b.val())return b.addClass("bose-textField--invalidPostalCode"),b.trigger("doValidation"),a.preventDefault(),!1}))}function l(a,b){Bose.DataLayer.setVariable("Address",a,b)}var m={country:'select[name$=".country.isocode"]',state:'select[name$=".state"]',town:'select[name$=".town"]',city:'input[name$=".town"]',postalcode:'input[name="shipping.postalCode"]',billingpostalcode:'input[name="billing.postalCode"]',errorMessageContainer:".bose-form__errorTitle",textFieldContainer:".bose-textField",infoIcon:".js-bose-infoIcon",postalCheck:".bose-checkbox__input:checked",email:'input[type="email"]',checkoutPanel:".bose-formFlowPanel--checkoutPanel"},n={};return{init:a,initDropdownListener:b,updateCountrySelect:d,populateInitialStates:f,updateStateSelect:g,addUSStateAsCountryOverride:i,refreshDropdown:j,_selectors:m}}();var Bose=Bose||{};Bose.CheckoutShipping=function(){function a(){!1===$jq(h.checkoutMethodList).find('input[name="shipping.option"]').prop("checked")?$jq(h.selectedDeliveryMode).val("US_express"):$jq(h.selectedDeliveryMode).val("US_expedited"),$jq(h.state).is(":visible")?($jq(document).on("selectmenuchange",h.state,e),$jq(document).on("selectmenuchange",h.country,e),$jq(document).on("selectmenuchange",h.state,f),$jq(document).on("selectmenuchange",h.country,f),$jq(document).on("change",'input[type="radio"][name="shipping.option"]',b),$jq(h.state).trigger("selectmenuchange"),$jq(document).on("click",h.deliveryOptions,c)):d(),f()}function b(){var a=$jq(this);a.data("address")&&($jq(h.streetField).val(a.data("address")),$jq(h.postalField).val(a.data("postalcode")),$jq(h.town).val(a.data("city")),$jq(h.state).val(a.data("isocode")),$jq(h.state).selectmenu().selectmenu("refresh"))}function c(){sessionStorage.setItem("deliveryMode",$jq(this).val())}function d(){var a,b=$jq(h.stateWithDeliveryModes).find("option"),c={};$jq(h.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),$jq(h.deliverMethodContainer).html(""),b.each(function(b,d){var e=$jq(d);c.deliveryModeLabel=e.data("namelabel"),c.deliveryTime=e.data("desclabel"),c.deliveryPrice=e.data("cost"),c.deliveryModeValue=e.data("code"),c.deliveryMode=e.data("free"),a='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" checked disabled value="{deliveryModeValue}"/><span class="bose-checkoutShipping__rightContent"> <span class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--highlight">{deliveryMode}</span> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span>  {deliveryTime}</span></div>',$jq(h.deliverMethodContainer).append(nano(a,c))})}function e(){var a,b,c,e,f=$jq(h.stateWithDeliveryModes),i=$jq(h.state).val(),j=f.find("option"),k=f.find("option[data-isocode ="+i+"]"),l=f.find("option[data-facilitypickupaddress-isocode]").length;if($jq(j).each(function(){var c=$jq(this);void 0===c.data("isocode")&&void 0===c.data("facilitypickupaddressLine1")&&(c.data("express")?b=c:a=c)}),c={deliveryModeLabel:$jq(a).data("namelabel"),deliveryTime:$jq(a).data("desclabel"),deliveryPrice:$jq(a).data("cost"),deliveryModeValue:$jq(a).data("code"),deliveryMode:$jq(a).data("free"),deliveryModeLabelExpress:$jq(b).data("namelabel"),deliveryTimeExpress:$jq(b).data("desclabel"),deliveryModeValueExpress:$jq(b).data("code"),deliveryPriceExpress:$jq(b).data("cost")},"-1"===i&&(i=0,k=f.find("option[data-isocode ="+i+"]")),1===j.length)return void d();$jq(h.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),k.length>0&&k.length!==l?e='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" checked value="{deliveryModeValueExpress}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabelExpress}<span>:</span></span>  {deliveryTimeExpress}<div class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--price"><span>+  </span>{deliveryPriceExpress}</div></span></div>':0!==k.length&&k.length!==l||(e='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" checked value="{deliveryModeValue}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--highlight">{deliveryMode}</span> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span> {deliveryTime}</span></div><div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" value="{deliveryModeValueExpress}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabelExpress}<span>:</span></span>  {deliveryTimeExpress}<div class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--price"><span>+  </span>{deliveryPriceExpress}</div></span></div>'),$jq(h.deliverMethodContainer).html(""),$jq(h.deliverMethodContainer).append(nano(e,c)),(k.length<=0||1!==f.find("option").length)&&g()}function f(){var a,b=$jq(h.stateWithDeliveryModes),c=b.find("option"),d={};$jq(h.accDeliverMethodContainer).html(""),$jq(h.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),$jq(c).each(function(){var b=$jq(this);d={},void 0===b.data("isocode")&&void 0!==b.data("facilitypickupaddressLine1")&&$jq(h.state).val()===b.data("facilitypickupaddressIsocode")&&(d={deliveryModeLabel:b.data("namelabel"),deliveryTime:b.data("desclabel"),deliveryPrice:b.data("cost"),deliveryModeValue:b.data("code"),deliveryMode:b.data("free"),deliveryAddress:b.data("facilitypickupaddressStreetnumber")+" "+b.data("facilitypickupaddressLine1"),deliveryIsoCode:b.data("facilitypickupaddressIsocode"),deliveryPostalCode:b.data("facilitypickupaddressPostalcode"),deliveryCity:b.data("facilitypickupaddressTown")},a='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" value="{deliveryModeValue}" data-isocode ="{deliveryIsoCode}" data-postalcode="{deliveryPostalCode}" data-address="{deliveryAddress}" data-city="{deliveryCity}" /><span class="bose-checkoutShipping__rightContent"> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span> {deliveryTime}</span></div>',$jq(h.accDeliverMethodContainer).append(nano(a,d)),g())})}function g(){if(null!==sessionStorage.getItem("deliveryMode")){var a=sessionStorage.getItem("deliveryMode");$jq(h.checkoutMethodList).find('input[name="shipping.option"][value='+a+" ]").attr("checked","checked")}}var h={state:'select[name$=".state"]',country:'select[name$=".country.isocode"]',streetField:'input[name="shipping.line1"]',postalField:'input[name="shipping.postalCode"]',town:'input[name="shipping.town"]',stateWithDeliveryModes:"select.js-stateDeliverModes",rowWithDeliveryModes:".js-bose-checkoutShippingRow",deliverMethodContainer:".js-bose-checkoutShipping__method",productDescriptionContainer:".bose-shoppingCart__productContainerDescriptionInStock",freeHighlighter:".bose-checkoutShipping__method__deliveryMode--highlight",deliveryModeLabel:".bose-checkoutShipping__method__deliveryMode",accDeliverMethodContainer:".js-bose-accChekoutShipping__method",deliveryOptions:'input[name$=".option"]',selectedDeliveryMode:".js-selectedDeliveryMethod",checkoutMethodList:".bose-checkoutShipping__method__list"};return{init:a,_selectors:h}}(),$jq(document).ready(function(){Bose.CheckoutShipping.init()});var Bose=Bose||{};Bose.AddressValidation=function(){function a(a){b(a)}function b(a){var b,f,g;a?(b=a.find(z.searchButton),f=a.find(z.manualAddress),g=a.find(z.showSearchButton)):(b=$jq(z.searchButton),f=$jq(z.manualAddress),g=$jq(z.showSearchButton)),b.on("click",c),f.on("click",d),g.on("click",e)}function c(a){var b=$jq(a.delegateTarget),c=b.closest(z.address);!b.hasClass("bose-button--loading")&&n(c)&&(q(c),j(c,f(c,!0)))}function d(a){var b=$jq(a.delegateTarget).closest(z.address);s(b),y(b,"MANUAL"),o(b)}function e(a){var b=$jq(a.delegateTarget).closest(z.address),c=b.closest("form");Bose.Forms.Validation.hideError(c),p(b)}function f(a,b){var c={},d=["shipping","billing","communication"];return a.find(":input").serializeArray().forEach(function(a){var e=a.name;if(b){if(-1===e.indexOf("search."))return;e=e.replace("search.","")}d.forEach(function(a){var b=a+".";-1!==e.indexOf(b)&&(e=e.replace(b,""))}),c[e]="state"===e?$jq("select[name='"+a.name+"'] option:selected").text():a.value}),{address:c}}function g(a){return h(a.find(".bose-address .bose-address__form:visible").closest(".bose-address"))}function h(a){var b=$jq(a[0]),c=[],d=w(b),e=b.closest("form"),g=$jq.Deferred();return a.each(function(){var a=$jq(this);u(a)&&c.push({address:f(a,!1),$address:a})}),Bose.AddressValidationService.validateAddresses(c,"validate",d).done(function(a){i(e,a),g.resolve()}).fail(function(a){i(e,a),g.reject()}),g.promise()}function i(a,b){b.forEach(function(a){y(a.$address,a.status),a.address&&m(a.$address,a.address)}),Bose.Forms.Validation.hideError(a)}function j(a,b){var c=a.closest("form"),d=w(a),e=[{address:b,$address:a}];if(k(a),!n(a))return void r(a)
;Bose.AddressValidationService.validateAddresses(e,"search",d).done(function(b){var d=b[0];Bose.Forms.Validation.hideError(c),y(d.$address,d.status),void 0!==d.error?d.error.code===Bose.AddressValidation.NO_ADDRESSES||d.error.code===Bose.AddressValidation.TOO_MANY_ADDRESSES?(l(a,"avs."+d.error.code),r(a)):(Bose.Forms.Validation.displayError(c,"avs.search.error.title","avs.error.message"),o(a)):d.address?(m(d.$address,d.address),o(a)):o(a)}).fail(function(){r(a)})}function k(a){a.find(".bose-addressSearchError").hide()}function l(a,b){var c=a.find(".bose-addressSearchError");c.find(".bose-addressSearchError__message").text(Bose.Translation.getSiteTranslation(b)),c.show()}function m(a,b){if(a.find(":input").filter(':not([name*="search"])').each(function(){var a=$jq(this),c=a.prop("name");for(var d in b)if(b.hasOwnProperty(d)&&"country"!==d&&-1!==c.indexOf(d)&&-1===c.indexOf("search")){var e=b[d];"state"===d&&(e=$jq('select[name="'+c+'"] option').filter(':contains("'+b[d]+'")').val()),void 0!==e&&(a.val(e),a.trigger("change"))}}),!a.find('.bose-address__addressInfo [name$="houseNumber"]').length&&b.houseNumber){var c=a.find('.bose-address__addressInfo [name$="line1"]');"street-housenumber"===x(a)?c.val(c.val()+" "+b.houseNumber):c.val(b.houseNumber+" "+c.val()),c.trigger("change")}t(a)}function n(a){var b=a.find('input[name*="search"]'),c=!0;return b.trigger("doValidation"),b.each(function(){Bose.TextField.isValid($jq(this),Bose.TextField)||(c=!1)}),c}function o(a){a.find(z.addressInfo).show(),a.find(z.addressSearch).hide(),r(a)}function p(a){a.find(z.addressInfo).hide(),a.find(z.addressSearch).show()}function q(a){Bose.Button.setLoading.call(a.find(z.searchButton))}function r(a){Bose.Button.setDefault.call(a.find(z.searchButton))}function s(a){var b=a.closest(z.address);a.closest(z.addressInfo).length&&v(b,!0)}function t(a){v(a,!1)}function u(a){var b=a.find(".bose-address__form").data("dirty");return void 0===b&&(b=!0,v(a,b)),b}function v(a,b){a.find(".bose-address__form").data("dirty",b)}function w(a){return a.data("avs-stub")||!1}function x(a){return a.data("avs-address-line1-format")}function y(a,b){a.find('input[name$="addressValidationStatus"]').val(b)}var z={address:".bose-address",addressForm:".bose-address__form",addressInfo:".bose-address__addressInfo",showSearchButton:".bose-address__showSearch",addressSearch:".bose-addressSearch",searchButton:".bose-addressSearch__searchButton",manualAddress:".bose-addressSearch__manualAddress"};return{init:a,dirtyAddress:s,isDirty:u,validateForm:g,searchForAddress:j,searchClick:c,SAME_ADDRESS:"SAME_ADDRESS",RETRY_ADDRESS:"RETRY_ADDRESS",MANUAL_ADDRESS:"MANUAL_ADDRESS",USE_SUGGESTED_ADDRESS:"USE_SUGGESTED_ADDRESS",TOO_MANY_ADDRESSES:"too.many.matches",NO_ADDRESSES:"no.matches"}}();var Bose=Bose||{};Bose.AddressValidationService=function(){function a(){s={post:function(a,b){return $jq.ajax(a,{contentType:"application/json",method:"POST",data:JSON.stringify(b)})},search:function(a,b,c){var d="/bin/avs/address/search?countryCode="+a+"&stub="+b;return this.post(d,c)},getAddress:function(a,b,c,d){var e="/bin/avs/address/get?countryCode="+a+"&languageCode="+b+"&stub="+c;return this.post(e,d)}},Bose.DataLayer.Data.Page&&(Bose.DataLayer.Data.Page.country&&(q=Bose.DataLayer.Data.Page.country.toUpperCase()),Bose.DataLayer.Data.Page.language&&(r=Bose.DataLayer.Data.Page.language.toLowerCase()))}function b(a,b,d){return k(),m=$jq.Deferred(),o=b,p=d,n=a,c(),m.promise()}function c(){if(n.length){var a=n.splice(0,1)[0];s.search(q,p,a.address).done(function(b){d(b,a)}).fail(function(){l(a.$address),c()})}else w.length?e():i()}function d(a,b){if(a.status===t.perfectMatch||a.status===t.unknown){var d={address:{id:a.suggestions[0].id}};s.getAddress(q,r,p,d).done(function(a){h(a,b.$address),c()}).fail(function(){l(b.$address),c()})}else a.status===t.list?(w.push({address:b,suggestions:a.suggestions}),c()):"search"===o||a.error.code!==Bose.AddressValidation.NO_ADDRESSES&&a.error.code!==Bose.AddressValidation.TOO_MANY_ADDRESSES?(x.push({error:a.error,status:a.status,$address:b.$address}),c()):(w.push({address:b,suggestions:[],reason:a.error.code}),c())}function e(){Bose.AddressValidationSuggestions.showSuggestions(w,o).done(function(a){v=a,f()}).fail(function(a){y=!0,v=a,f()})}function f(){if(v.length){g(v.splice(0,1)[0])}else y?j():i()}function g(a){var b=a.$address;if(a.choice===Bose.AddressValidation.SAME_ADDRESS||a.choice===Bose.AddressValidation.MANUAL_ADDRESS)x.push({status:u.manual,$address:b}),f();else if(a.choice===Bose.AddressValidation.RETRY_ADDRESS)y=!0,f();else if(a.choice===Bose.AddressValidation.USE_SUGGESTED_ADDRESS){var c={address:{id:a.value}};s.getAddress(q,r,p,c).done(function(c){c.status===t.perfectMatch?x.push({status:c.status,address:c.address,$address:a.$address}):x.push({status:u.serverError,error:c.error,$address:b}),f()}).fail(function(){l(b),f()})}}function h(a,b){a.status===t.perfectMatch?x.push({status:a.status,address:a.address,$address:b}):x.push({status:u.serverError,error:a.error,$address:b})}function i(){m.resolve(x)}function j(){m.reject(x)}function k(){m=void 0,v=[],w=[],x=[],y=!1}function l(a){x.push({status:u.clientError,$address:a})}var m,n,o,p,q,r,s,t={perfectMatch:"perfect_match",unknown:"unknown",list:"list",error:"error"},u={success:"success",manual:"MANUAL",serverError:"ERROR",clientError:"CLIENT_ERROR",cancel:"cancel"},v=[],w=[],x=[],y=!1;return{init:a,validateAddresses:b}}();var Bose=Bose||{};Bose.AddressValidationSuggestions=function(){function a(a){var b,e;a?(b=a.find(u.useSuggestionButton),e=a.find(u.overrideAddress)):(b=$jq(u.useSuggestionButton),e=$jq(u.overrideAddress)),b.on("click",c),e.on("click",d)}function b(a,b){x=[],y=[];var c=a[0].address.$address;return y=a,q=b,p=$jq.Deferred(),s=Bose.Popup.display(c.find(u.overlay),{onClose:f,wrapCss:t.overlayWrapper}),g(),p.promise()}function c(a){var b=$jq(a.target).closest(u.overlay).find("input[name=addressSuggestion]:checked");e(b.data("choice"),b.val())}function d(){e(Bose.AddressValidation.MANUAL_ADDRESS,"")}function e(a,b){p&&(x.push({choice:a,value:b,$address:r.address.$address}),y.length?g():(p.resolve(x),p=void 0,Bose.Popup.close(s)))}function f(){p&&(p.reject(x),p=void 0)}function g(){if(y.length){var a=y.splice(0,1)[0];r=a,h(a)}}function h(a){var b=$jq(u.overlayWrapper);i(b,a),j(b,a),m(b,a),n(b,a),o(b,a)}function i(a,b){var c=a.find(u.overlaySuggestions);if(c.empty(),b.suggestions.length)b.suggestions.forEach(function(a){c.append(k(a.address,a.id,Bose.AddressValidation.USE_SUGGESTED_ADDRESS,"bose-addressValidationOverlay__suggestion"))}),c.find("input").filter(":first").prop("checked",!0);else{var d=k("","",Bose.AddressValidation.RETRY_ADDRESS,"bose-addressValidationOverlay__suggestion");d.find(".bose-radioButton__label").prepend($jq("<span/>",{class:"bose-radioButton__label__text",text:Bose.Translation.getSiteTranslation(w.returnText)})).prepend($jq("<span/>",{class:"bose-radioButton__label__text",text:Bose.Translation.getSiteTranslation("avs."+b.reason)})),c.append(d)}}function j(a,b){var c=a.find(".bose-addressValidationOverlay__oldAddress"),d=a.find(u.overrideAddress);"search"===q?(d.show(),c.hide()):(d.hide(),c.show(),c.find(".bose-addressValidationOverlay__oldAddress__address").text(l(b)),c.find("input").filter(":first").prop("checked",!0))}function k(a,b,c,d){return $jq("<div/>",{class:"bose-radioButton "+d}).append($jq("<label/>",{class:"bose-radioButton__label",text:a}).append($jq("<input/>",{class:"bose-radioButton__input bose-addressValidation__radioButton",type:"radio",name:"addressSuggestion",value:b,data:{choice:c}})).append($jq("<span/>",{class:"bose-radioButton__inputIcon"})))}function l(a){var b="";return v.forEach(function(c){var d=a.address.address.address[c.field];void 0!==d&&d.length&&(b+=d+(c.comma?", ":" "))}),b=b.substr(0,b.length-2)}function m(a,b){var c=a.find(u.title),d=/bose-address--(\w*)/.exec(b.address.$address.attr("class"))[1];c.text(Bose.Translation.getSiteTranslation(d+" address"))}function n(a,b){b.suggestions.length||a.find(u.subTitle).text(Bose.Translation.getSiteTranslation(w.subTitle.requireAction))}function o(a,b){b.suggestions.length||a.find(u.useSuggestionButtonLabel).text(Bose.Translation.getSiteTranslation("Continue"))}var p,q,r,s,t={overlayWrapper:"bose-addressValidationOverlayWrapper"},u={overlay:".bose-addressValidationOverlay",overlaySuggestions:".bose-addressValidationOverlay__suggestions",title:".bose-addressValidationOverlay__title",subTitle:".bose-addressValidationOverlay__subTitle",useSuggestionButton:".bose-addressValidationOverlay__useSuggestionButton",useSuggestionButtonLabel:".bose-addressValidationOverlay__useSuggestionButton span",overrideAddress:".bose-addressValidation__overrideAddress",overlayWrapper:"."+t.overlayWrapper},v=[{field:"houseNumber",comma:!1},{field:"line1",comma:!0},{field:"line2",comma:!0},{field:"town",comma:!1},{field:"postalCode",comma:!0}],w={returnText:"I shall try again by returning to the address form.",subTitle:{requireAction:"Please confirm to continue:"}},x=[],y=[];return{init:a,showSuggestions:b}}();var Bose=Bose||{};Bose.SelectNewBrand=function(){function a(){$jq(d.select).each(function(){var a=$jq(this),d=a.data("prefix"),e={disableOnMobile:!1,arrowButtonMarkup:'<div class="arrow"></div>'};void 0!==d&&(e.labelBuilder='<span class="labelPrefix">'+d+'</span><span class="labelText">{text}</span>'),a.on("disable",b),a.on("enable",c),a.selectric(e)})}function b(){$jq(this).attr("disabled","disabled").selectric("refresh")}function c(){$jq(this).prop("disabled",!1).selectric("refresh")}var d={select:".js-selectNewBrand"};return{init:a}}();var Bose=Bose||{};Bose.ProductRegistration=function(){function a(){k=void 0,$jq(l.lookupSerialNumberButton).on("click",b),$jq(l.productSelectionDropdown).on("selectmenuchange",f),$jq(l.country).on("selectmenuchange",g),$jq(l.submitButton).on("click",c),i(),j()}function b(){var a=$jq(l.lookupSerialNumberInput).find("input").val(),b=$jq(l.lookupSerialNumberApiUrl).val()+"/products/"+a;k=void 0,i(),j(),$jq(l.productSelectionDropdown).empty().append('<option selected="selected"></option>'),$jq.ajax({type:"GET",url:b,datatype:"json",success:function(b){$jq(l.serialNumberHiddenInput).val(a),k=d(b),1===k.length?($jq(l.productCodeHiddenInput).val(k[0].productCode),$jq(l.productNameContainer).html(Bose.Utils.getGraniteTranslation("productname_"+k[0].productCode)),$jq(l.skuHiddenInput).val(k[0].sku),h()):k.length>=2&&($jq(l.productCodeHiddenInput).val(""),$jq(l.productNameContainer).empty(),$jq(l.skuHiddenInput).val(""),e(k)),Bose.TextField.markValid($jq(l.lookupSerialNumberInput),Bose.TextField)},error:function(){Bose.TextField.markInvalid($jq(l.lookupSerialNumberInput),Bose.Translation.getSiteTranslation("error.serialnr.notfound"),Bose.TextField)}})}function c(){var a=$jq(this),b=a.closest("form");void 0!==k&&$jq(document).trigger("productRegistration.submitRegistration",[b.find(l.country).val(),k]),b.submit()}function d(a){var b=[];if(void 0===a.partOf||null===a.partOf?b.push({productCode:a.productCode}):void 0!==a.soldSeparately&&null!==a.soldSeparately&&!1!==a.soldSeparately&&b.push({productCode:a.productCode}),void 0!==a.partOf&&null!==a.partOf)for(var c=a.partOf,d={},e=0;e<c.length;e++){var f=c[e];d[f.productCode]||(d[f.productCode]=!0,b.push({productCode:f.productCode}))}return b}function e(a){$jq.each(a,function(a,b){$jq(l.productSelectionDropdown).append('<option value="'+b.productCode+'">'+Bose.Utils.getGraniteTranslation("productname_"+b.productCode)+"</option>")}),$jq(l.productSelectionContainer).removeClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionDropdown).selectmenu("refresh")}function f(){var a=$jq(l.productSelectionDropdown).find(":selected").val();void 0!==a&&a.length?($jq(l.productCodeHiddenInput).val(a),h()):($jq(l.productCodeHiddenInput).val(""),i())}function g(){Bose.DatePicker.setLocale($jq(l.purchaseDate),$jq(this).val())}function h(){Bose.Utils.isAuthorMode()||$jq(l.productRegistrationContainer).removeClass("bose-productRegistration__customerData--hidden")}function i(){Bose.Utils.isAuthorMode()?$jq(l.productRegistrationContainer).removeClass("bose-productRegistration__customerData--hidden"):($jq(l.productRegistrationContainer).addClass("bose-productRegistration__customerData--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").removeClass("bose-newErrorMessage--hidden"))}function j(){Bose.Utils.isAuthorMode()?($jq(l.productSelectionContainer).removeClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").removeClass("bose-newErrorMessage--hidden")):($jq(l.productSelectionContainer).addClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").addClass("bose-newErrorMessage--hidden"))}var k,l={lookupSerialNumberApiUrl:".js-serialNumberLookupApiUrl",lookupSerialNumberButton:".js-serialNumberLookupSubmit",lookupSerialNumberInput:".js-productRegistration-serialNumber",serialNumberHiddenInput:'.bose-productRegistration__productData input[name="serialnumber"]',productCodeHiddenInput:'.bose-productRegistration__productData input[name="productcode"]',skuHiddenInput:'.bose-productRegistration__productData input[name="sku"]',productNameContainer:".js-productDataProductName",productRegistrationContainer:".js-customerDataContainer",productSelectionContainer:".js-productRegistration__productSelectionContainer",productSelectionDropdown:".js-productRegistration__productSelectionDropdown",submitButton:".js-productRegistration-submit",country:".js-productRegistration-country",purchaseDate:".js-productRegistration-purchaseDate"};return{init:a,_selectors:l}}();var Bose=Bose||{};Bose.DatePicker=function(){function a(a,b){A[a]=b}function b(){v=void 0,$jq(w.field).not("."+x.initialised).each(d)}function c(a){a.find(w.field).each(function(){$jq(this).removeClass(x.initialised)})}function d(){var a=$jq(this),b=t(a),c=new Pikaday({field:a.find(w.interceptor)[0],theme:"bose-pikaDay",i18n:u(),disableDayFn:function(c){return h(b.dayValidator)(a,c)},onSelect:function(b){i(a,b)},onOpen:function(){f(a)},onClose:function(){g(a)}});z[a.attr("id")]=c,o(a,b.minDate),p(a,b.maxDate),q(a,b.value||b.minDate),a.addClass(x.initialised),a.on("doValidation",l)}function e(a,b){a.find(w.hiddenField).on("change",function(){b(a)})}function f(a){a.data("popupOpen",!0)}function g(a){a.data("popupOpen",!1)}function h(a){return a&&A[a]?A[a]:function(){}}function i(a,b){var c=a.closest(w.field),d=c.find(w.hiddenField),e=c.find(w.textField),f=b.getDate(),g=b.getMonth()+1,h="";h+=b.getFullYear(),h+="-",h+=g<10?"0"+g:g,h+="-",h+=f<10?"0"+f:f,d.val(h),j(a,b),e.trigger("change"),a.data("popupOpen")&&(d.trigger("change"),a.data("popupOpen",!1)),e.trigger("doValidation")}function j(a,b){var c=a.closest(w.field),d=c.find(w.textField),e="en-US";void 0!==b&&null!==b&&(a.data(y.locale)?e=a.data(y.locale):void 0!==Bose.DataLayer.Data.Page.locale&&(e=Bose.DataLayer.Data.Page.locale),d.val(k(b,e)))}function k(a,b){return a.toLocaleDateString(b).replace(/[.-]/g,"/")}function l(){var a=$jq(this),b=a.closest(w.field),c=b.find(w.textField);Bose.TextField.doValidation.call(c,void 0,Bose.TextField)}function m(a){return Bose.TextField.isValid(a.find(w.textField),Bose.TextField)}function n(a,b){a.data(y.locale,b),j(a,s(a).getDate())}function o(a,b){var c=!(!b||""===b)&&new Date(b);s(a).setMinDate(c)}function p(a,b){var c=!(!b||""===b)&&new Date(b);s(a).setMaxDate(c)}function q(a,b){var c=b&&""!==b?new Date(b):new Date;s(a).setDate(c)}function r(a){return a.find(w.hiddenField).val()}function s(a){return z[a.attr("id")]}function t(a){return{value:a.data(y.value),required:a.data(y.required),requiredMessage:a.data(y.requiredMessage),minDate:a.data(y.minDate),maxDate:a.data(y.maxDate),dayValidator:a.data(y.dayValidator)}}function u(){return void 0===v&&(v={previousMonth:Bose.Translation.getSiteTranslation("bose_previous_month"),nextMonth:Bose.Translation.getSiteTranslation("bose_next_month"),months:Bose.Utils.getGraniteTranslations(["bose_January","bose_February","bose_March","bose_April","bose_May","bose_June","bose_July","bose_August","bose_September","bose_October","bose_November","bose_December"]),weekdays:Bose.Utils.getGraniteTranslations(["bose_Sunday","bose_Monday","bose_Tuesday","bose_Wednesday","bose_Thursday","bose_Friday","bose_Saturday"]),weekdaysShort:Bose.Utils.getGraniteTranslations(["bose_Sun","bose_Mon","bose_Tue","bose_Wed","bose_Thu","bose_Fri","bose_Sat"])}),v}var v,w={field:".bose-datePicker",interceptor:".js-datePicker-interceptor",hiddenField:".js-datePicker-hiddenField",textField:".js-datePicker-textField"},x={initialised:"js-datePicker-initialised"},y={value:"value",required:"required",requiredMessage:"requiredMessage",minDate:"minDate",maxDate:"maxDate",dayValidator:"dayValidator",locale:"locale"},z={},A={};return{init:b,unInit:c,registerDayValidator:a,isValid:m,setMinDate:o,setMaxDate:p,setDate:q,setLocale:n,getDate:r,onChange:e,selectors:w,_classes:x}}(),$jq(document).ready(function(){Bose.Checkbox.init()}),$jq(document).ready(function(){Bose.RadioButton.init()}),$jq(document).ready(function(){Bose.TextArea.init()}),$jq(document).ready(function(){Bose.TextField.init()}),$jq(document).ready(function(){Bose.PasswordField.init()}),$jq(document).ready(function(){Bose.AddressValidation.init(),Bose.AddressValidationService.init(),Bose.AddressValidationSuggestions.init()}),$jq(document).ready(Bose.SelectNewBrand.init),$jq(document).ready(function(){Bose.Forms.Validation.init()}),$jq(document).ready(function(){Bose.ProductRegistration.init()}),$jq(document).ready(function(){Bose.DatePicker.init()});var Bose=Bose||{};Bose.HiddenField=function(){function a(a){var b;b=a?a.find(g.field):$jq(g.field),b.on("change",f).bind("doValidation",f)}function b(a){return!a.hasClass(h.hiddenFieldErrorModifier)}function c(a){a.removeClass(h.hiddenFieldErrorModifier).addClass(h.hiddenFieldValidModifier),a.find(g.errorMessage).text("")}function d(a,b){a.removeClass(h.hiddenFieldValidModifier).addClass(h.hiddenFieldErrorModifier),a.find(g.errorMessage).text(b)}function e(a){a.removeClass(h.hiddenFieldErrorModifier+h.hiddenFieldValidModifier),a.find(g.errorMessage).text("")}function f(){var a=$jq(this),b=a.find(g.input);"disabled"===b.attr("disabled")?c(a):b.prop("required")?""===b.val()?d(a,b.data("options").messages.required):c(a):""===b.val()?e(a):c(a)}var g={field:".bose-hiddenField",input:".bose-hiddenField__input",errorMessage:".bose-hiddenField__errorMessage"},h={hiddenFieldErrorModifier:"bose-hiddenField--error",hiddenFieldValidModifier:"bose-hiddenField--valid"};return{init:a,isValid:b,markValid:c,markInvalid:d,resetState:e,doValidation:f,selectors:g}}(),$jq(document).ready(function(){Bose.HiddenField.init()});var Bose=Bose||{};Bose.EmailTextField=function(){function a(){$jq(".js-encryptApiUrlField").next().find("input[type=email]").on("blur",b)}function b(){var a=$jq(".js-encryptApiUrlField").next().find("input[type=email]").val().trim();if(a.length){var b=$jq(c.encryptApiUrlField).val()+"/"+a;$jq.ajax({type:"GET",url:b,dataType:"text",crossDomain:!0,success:function(a){Bose.DataLayer.setVariable("UserContext","encryptedEmailAddress",a)}})}}var c={encryptApiUrlField:".js-encryptApiUrlField"};return{init:a,selectors:c}}(),$jq(document).ready(function(){Bose.EmailTextField.init()});
var Bose=Bose||{};Bose.OnlineResellers=function(){function a(){"1"===Bose.Utils.getParameterByName("online_resellers")&&c()}function b(){c()}function c(){var a=$jq(f.ecommerceArea);a.length&&a.data(g.onlineResellingEnabled)&&(d().insertAfter($jq(f.primaryCta)),e())}function d(){var a=Bose.Translation.getSiteTranslation("ONLINE_RESELLER");return $jq("<a/>",{class:"js-onlineReseller__button bose-buttonLink bose-buttonLink--type1 bose-buttonLink--cta -wide -iconOnlineReseller -withBorder",html:"<span>"+a+"</span>",title:a,href:"javascript:;"})}function e(){$jq(f.ecommerceArea).on("click",f.onlineResellersButton,function(){Bose.WhereToBuy.loadResellers(this,"iceleads")})}var f={primaryCta:".js-cta__primary",ecommerceArea:".js-ecommerceArea",onlineResellersButton:".js-onlineReseller__button"},g={onlineResellingEnabled:"onlineResellingEnabled"};return{init:a,load:b}}();var Bose=Bose||{};Bose.SocialMedia=function(){function a(){c()&&(j={},b(),$jq(h.facebookContainer).length&&($jq.ajaxSetup({cache:!0,async:!0}),$jq.getScript("//connect.facebook.net/".concat(Bose.DataLayer.Data.Page.locale.replace("-","_"),"/sdk.js"),function(){FB.init({appId:"878190328913680",version:"v2.3"})})),d())}function b(a){j=$jq.extend({},i,j,a)}function c(){return $jq(".bose-socialMedia").length}function d(){var a=$jq(h.facebookHandler),b=$jq(h.twitterHandler),c=$jq(h.weiboHandler);a.on("click",function(b){b.preventDefault(),e("u",a,!0)}),b.on("click",function(a){a.preventDefault(),e("url",b,!0)}),c.on("click",function(a){return a.preventDefault(),e("url",c,!0),!0}),$jq(h.shortUrlReadOnlyFieldHandler).on("focus",function(){e("u",a,!1),e("url",b,!1),e("url",c,!1),$jq(h.shortUrlReadOnlyFieldHandler).select()}),e("u",a,!1),e("url",b,!1),e("url",c,!1)}function e(a,b,c){var d=$jq(h.shortenDataHandler),e=d.data("shortenserviceurl"),g=d.data("shortenservicelogin"),i=d.data("shortenserviceapikey"),k=d.data("shortenservicedatatype"),l=window.location.href;j.refreshShortURL?(j.refreshShortURL=!1,void 0===e?f(window.location.href,b,a,d,c):$jq.ajax({url:e,data:{longUrl:l,login:g,apiKey:i},dataType:k,async:!1,success:function(e){f(e.data.url,b,a,d,c)}})):f(d.data("shorturl"),b,a,d,c)}function f(a,b,c,d,e){var f=a||window.location.href,i=b.attr("href"),j=g(i,c,f);b.attr("href",j),d.data("shorturl",f);var k=$jq(h.shortUrlReadOnlyFieldHandler);k.val(f),k.select(),e&&Bose.Utils.openWindow(b.attr("href"),"_blank")}function g(a,b,c){var d=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e="&";return void 0!==a&&-1!==a.indexOf("?")||(e="?"),void 0!==a&&a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c}var h={facebookHandler:".customShare.bose-icon--facebook",facebookContainer:".js-socialMedia__facebook",twitterHandler:".customShare.bose-icon--twitter",weiboHandler:".customShare.bose-icon--weibo",shortUrlReadOnlyFieldHandler:".shortUrl",shortenDataHandler:".bose-socialMedia__shortenData"},i={refreshShortURL:!0},j={};return{init:a,setOptions:b,selectors:h}}();var Bose=Bose||{};Bose.quantityChanger=function(){function a(){$jq(f.qtySelect).not(f.initialised).on("selectmenuchange",b).addClass(g.initialised),h||($jq(document).on("variantChanged",c),h=!0)}function b(){var a=$jq(this);a.trigger("quantity_changed",a.val())}function c(a,b,c){$jq(".bose-quantityChanger").filter('[data-product-code="'+b+'"]').filter("[data-variant-code]").removeClass("bose-quantityChanger--show").addClass("bose-quantityChanger--hide"),$jq(".bose-quantityChanger").filter('[data-variant-code="'+c+'"]').removeClass("bose-quantityChanger--hide").addClass("bose-quantityChanger--show")}function d(a){var b=a.closest(f.qtySelectContainer);return parseInt(b.data("quantity"),10)}function e(a){return parseInt(a.val(),10)}var f={qtySelect:".bose-shoppingCart_quantityInput .bose-select__native, .bose-shoppingBag__qtyInput .bose-select__native",initialised:".js-quantitySelector-initialised",qtySelectContainer:".js-cartItem-qtySelect"},g={initialised:"js-quantitySelector-initialised"},h=!1;return{init:a,getOldValue:d,getNewValue:e}}();var Bose=Bose||{};Bose.ProductATP=function(){function a(){$jq(document).on("variantChanged",b),c()}function b(a,b,c){var d=$jq(g.container).filter('[data-product-code="'+b+'"]');d.filter("[data-variant-code]").addClass(h.hidden),d.filter('[data-variant-code="'+c+'"]').removeClass(h.hidden)}function c(){if("true"===Bose.DataLayer.Data.Settings.ecommerceEnabled){var a=[];$jq(g.container).each(function(){var b=$jq(this).data("url"),c=Bose.CookieStore.get(Bose.CookieStore.CONST.UserName)||"anonymous";void 0!==b&&(b=b.replace("{userId}",c)),-1===a.indexOf(b)&&(a.push(b),$jq.ajax({url:b,dataType:"json",success:function(a,b,c){var e="";Bose.DataLayer.Data.Product.productCode===a.code&&Bose.DataLayer.setVariable("Product","stockStatus",a.variantOptions[0].stockStatusData.stockStatus),void 0!==c&&null!==c.getResponseHeader("Date")&&(e=c.getResponseHeader("Date"));var f=(new Date).toUTCString();new Date(e)<new Date(f)&&(i=Number((new Date(f)-new Date(e))/1e3/60)),a.variantOptions.forEach(d)}}))})}}function d(a){var b="",c="";void 0!==a.atpData&&void 0!==a.atpData.message&&(b=a.atpData.message);var d=$jq(g.container).filter('[data-variant-code="'+a.code+'"]');c=!!d.data("enableaccuratedelivery")&&d.data("enableaccuratedelivery"),c&&d.addClass("bose-productATP--accurate"),c&&$jq(g.boseProductATPShow).length>0&&i>=1&&(-1!==b.indexOf("hr")||-1!==b.indexOf("min"))?b=e(b,i):c||void 0===a.stockStatusData||(b=Bose.Translation.getSiteTranslation(a.stockStatusData.stockStatus)),d.html(b),void 0!==a.stockStatusData&&"OUT_OF_STOCK"===a.stockStatusData.stockStatus?d.addClass("-bold"):d.removeClass("-bold"),$jq(document).trigger("variantUpdatedATP",a)}function e(a,b){var c=a,d=0,e="",g=!1,h=0,i="",j=!1,k=0,l=a.indexOf('textBold">'),m="";-1!==a.indexOf("mins")?(i="mins",j=!0):-1!==a.indexOf("min")&&(i="min",j=!0),m=a.substring(l+10,a.indexOf(i)+i.length),-1!==a.indexOf("hrs")?(e="hrs",g=!0):-1!==a.indexOf("hr")&&(e="hr",g=!0),g&&j?h=m.substring(0,m.indexOf(e)):g&&(m=a.substring(l+10,a.indexOf(e)+e.length),h=m.substring(0,m.indexOf(e))),j&&(k=m.substring(m.indexOf(e)+e.length,m.indexOf(i))),d=g?Math.round(60*h)+Math.round(k):Math.round(k);var n=d-b;return n<1&&(n=1),n>0&&(g||j)&&(c=a.replace(m,f(n,g)+" ")),c}function f(a,b){var c="hr",d="min",e=0,f=0,g=0;b&&(f=a/60,e=Math.floor(f)),b&&e>1&&(c="hrs"),g=b?60*(f-e):a;var h=Math.round(g);h>1&&(d="mins");var i="";return b&&0!==e&&(i=e+" "+c),0!==h&&(i+=" "+h+" "+d+" "),i}var g={container:".js-productATP",boseProductATPShow:".bose-productATP--show"},h={hidden:"bose-productATP--hide"},i=0;return{init:a,_selectors:g,_classes:h}}();var Bose=Bose||{};Bose.Payment=function(){function a(a){delete f[a]}function b(a,b){var c=void 0===b?a.getName():b;f[c]=a}function c(a,b){var c=f[b];void 0===c?e(a):c.submit(a,d,e)}function d(a){Bose.Forms.doActualAjaxSubmit.call(a,null,!1)}function e(a,b,c){void 0!==b&&void 0!==c?Bose.Forms.Validation.displayError(a,b,c):Bose.Forms.Validation.displayDefaultError(a)}var f={};return{registerPaymentModule:b,unregisterPaymentModule:a,submit:c}}();var Bose=Bose||{};Bose.PaymentControl=function(){function a(a){var j=$jq(k.paymentGroupInput);$jq(k.icon).on("mouseover",d).on("click",e).on("mouseleave",f),$jq(".bose-paymentGroup__radioButton").on("change",g),$jq(".bose-paymentGroup__singleGroup").length&&h(),a&&i(a);var l=$jq(k.selectedMethod).val();if(void 0!==l&&!l.length){var m=$jq('section[data-step-name="step_payment"]').find(".bose-button");m.addClass("-inactive"),m.prop("onclick",function(){return!1})}$jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").is(":checked")?$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").show():$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").hide(),$jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").on("change",c),"true"===$jq(".js-hasPickupItems").val()&&($jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").prop("checked",!1),$jq(".checkoutSelectPaymentOptionsForm .bose-address--checkbox").hide(),$jq(".checkoutSelectPaymentOptionsForm .bose-address__form").show(),$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").hide()),b(j)}function b(a){a.length&&a.each(function(){var a=$jq(this);a.is(":checked")&&(a.closest(k.paymentGroupContainer).addClass(l.active),a.closest(k.paymentGroupLabel).focus())})}function c(){$jq(this).is(":checked")?$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").show():$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").hide()}function d(){var a=$jq(this),b=a.parent();b.hasClass(l.readOnly)||(b.find(k.unselectedIcon).addClass(l.inactive),a.removeClass(l.inactive))}function e(){var a=$jq(this),b=a.closest("form"),c=a.closest(k.container);if(!c.hasClass(l.readOnly)&&!a.hasClass(l.selectedIcon)){var d=a.data("hybris-id");c.find(k.selectedIcon).removeClass(l.selectedIcon),a.addClass(l.selectedIcon),c.find(k.unselectedIcon).addClass(l.inactive),b.find(".bose-paymentControl__cardDetailsFormContainer input:visible, .bose-paymentControl__cardDetailsFormContainer select").not('input[name="payment.accountHolderName"]').val(""),b.addClass(l.noValidation),b.find(k.selectedMethod).val(d),$jq("#selectPaymentOptionsSubStep").val("paymentMethod"),Bose.Forms.submitForm(a,!0),b.removeClass(l.noValidation)}}function f(){var a=$jq(this).parent();a.find(k.selectedIcon).length?a.closest(k.container).find(k.unselectedIcon).addClass(l.inactive):a.find(".bose-paymentControl__icon.-inactive").removeClass(l.inactive)}function g(){var a=$jq(this),b=a.closest("form"),c=$jq('input[name="checkout_payment-group"]:checked'),d=c.closest(".bose-paymentGroup__container");if($jq(".bose-paymentGroup__method").hide(),b.find(".bose-paymentControl__cardDetailsFormContainer input:visible, .bose-paymentControl__cardDetailsFormContainer select").not('input[name="payment.accountHolderName"]').val(""),b.addClass(l.noValidation),!1===c.data("multiple-payment-methods")){var e=d.find(".bose-paymentGroup__singlePaymentMethod").data("hybris-id");b.find(k.selectedMethod).val(e)}$jq("#selectPaymentOptionsSubStep").val("paymentMethod"),Bose.Forms.submitForm(a,!0),b.removeClass(l.noValidation)}function h(){var a=$jq('form[name="payment"]'),b=$jq(".bose-paymentGroup__method");if(!1===b.data("multiple-payment-methods")){var c=b.find(".bose-paymentGroup__singlePaymentMethod").data("hybris-id");a.find(k.selectedMethod).val(c)}}function i(a){$jq(".bose-paymentControl__icon.bose-paymentControl__icon-"+a).addClass(l.selectedIcon),$jq(k.container).find(k.unselectedIcon).addClass(l.inactive)}function j(a){return a.find(k.selectedIcon).length?a.find(k.selectedIcon).data("paymentProvider"):a.find(".bose-paymentGroup__singlePaymentMethod:visible").data("paymentProvider")}var k={unselectedIcon:".bose-paymentControl__icon:not(.bose-paymentControl__icon--selected)",selectedIcon:".bose-paymentControl__icon.bose-paymentControl__icon--selected",container:".bose-paymentControl",icon:".bose-paymentControl .bose-paymentControl__icon",paymentGroupInput:".bose-paymentGroup__radioButton",paymentGroupContainer:".bose-paymentGroup__container",selectedMethod:'input[type="hidden"][name="checkout_payment-method"]',paymentGroupLabel:".bose-paymentGroup__label"},l={selectedIcon:"bose-paymentControl__icon--selected",readOnly:"bose-paymentControl--readonly",active:"-active",inactive:"-inactive",noValidation:"bose-noValidation"};return{init:a,getPaymentProvider:j}}();var Bose=Bose||{};Bose.IngenicoPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Ingenico_PaymentProvider"}function c(a,b,c){d(a),f(a,b,c)}function d(a){var b=a.find(i.form.expiryYear).val().substr(2),c=a.find(i.form.expiryMonth).val();a.find(i.ingenico.cardHolder).html(a.find(i.form.cardHolder).val()),a.find(i.ingenico.cardNumber).html(a.find(i.form.cardNumber).val()),a.find(i.ingenico.cvc).html(a.find(i.form.ccv).val()),a.find(i.ingenico.expiryDate).html(c+b)}function e(a){var b="?";return a.find(i.ingenico.formData).children("div").each(function(){var a=$jq(this),c=a.data("param-name"),d=encodeURIComponent(a.html()).replace(/%20/g,"+");b+=c+"="+d,a.next().length&&(b+="&")}),b}function f(a,b,c){var d=a.find(i.ingenico.iframe),f=a.find(i.ingenico.aliasRequestUrl).html()+e(a);d.on("load",function(){g(a,b,c)}),d.attr("src",f)}function g(a,b,c){var d=a.find(i.ingenico.iframe).get(0).contentWindow,e=d.paymentResult;void 0===e?c(a,Bose.Translation.getSiteTranslation("error.payment.ingenico.title"),Bose.Translation.getSiteTranslation("form.error.PaymentAuthorizationException")):"1"===e.status?(h(a,e.values.cardNumber,e.values.cvc),b(a)):c(a,d.errorTitle,d.paymentError)}function h(a,b,c){a.find(i.form.cardNumber).val(b),a.find(i.form.ccv).val(c),a.find(i.form.subscriptionId).val(a.find(i.ingenico.alias).html())}var i={ingenico:{alias:".bose-ingenicoAliasRequestData__alias",aliasRequestUrl:".bose-ingenicoAliasRequestUrl",cardHolder:".bose-ingenicoAliasRequestData__cardHolder",cardNumber:".bose-ingenicoAliasRequestData__cardNumber",cvc:".bose-ingenicoAliasRequestData__cvc",expiryDate:".bose-ingenicoAliasRequestData__expiryDate",iframe:".bose-ingenicoAliasRequestIframe",formData:".bose-ingenicoAliasRequestData"},form:{cardHolder:'input[name="payment.accountHolderName"]',cardNumber:'input[name="payment.cardNumber"]',ccv:'input[name="payment.ccv"]',expiryYear:'select[name="payment.expiryYear"]',expiryMonth:'select[name="payment.expiryMonth"]',subscriptionId:'[name="payment.subscriptionId"]'}};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.CyberSourcePaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"CyberSource_PaymentProvider"}function c(a,b,c){d(a),f(a,b,c)}function d(a){var b=a.find(k.form.expiryYear).val(),c=a.find(k.form.expiryMonth).val();a.find(k.cybersource.cardNumber).html(a.find(k.form.cardNumber).val()),a.find(k.cybersource.cvc).html(a.find(k.form.ccv).val()),a.find(k.cybersource.expiryDate).html(c+"-"+b),$jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").is(":checked")?(a.find(k.cybersource.billToForename).html($jq(k.cybersource.shippingFirstname).val()),a.find(k.cybersource.billToSurname).html($jq(k.cybersource.shippingSurname).val()),a.find(k.cybersource.billToAddressLine1).html($jq(k.cybersource.shippingAddressLine1).val()),a.find(k.cybersource.billToAddressCity).html($jq(k.cybersource.shippingAddressCity).val()),a.find(k.cybersource.billToAddressPostalCode).html($jq(k.cybersource.shippingAddressPostalCode).val()),a.find(k.cybersource.billToAddressState).html($jq(k.cybersource.shippingAddressState).val()),a.find(k.cybersource.billToAddressCountry).html($jq(k.cybersource.shippingAddressCountry).val())):(a.find(k.cybersource.billToForename).html($jq(k.cybersource.billingFirstname).val()),a.find(k.cybersource.billToSurname).html($jq(k.cybersource.billingSurname).val()),a.find(k.cybersource.billToAddressLine1).html($jq(k.cybersource.billingAddressLine1).val()),a.find(k.cybersource.billToAddressCity).html($jq(k.cybersource.billingAddressCity).val()),a.find(k.cybersource.billToAddressPostalCode).html($jq(k.cybersource.billingAddressPostalCode).val()),a.find(k.cybersource.billToAddressState).html($jq(k.cybersource.billingAddressState).val()),a.find(k.cybersource.billToAddressCountry).html($jq(k.cybersource.billingAddressCountry).val()))}function e(a){var b=$jq("<form>",{action:a.find(k.cybersource.tokenRequestUrl).html(),method:"POST",target:"tokenIframe"});return a.find(k.cybersource.formData).children("div").each(function(){var a=$jq(this),c=a.data("param-name"),d=a.html();b.append($jq("<input/>",{name:c,value:d}))}),b}function f(a,b,c){var d,f,h=a.find(k.cybersource.iframe).get(0).contentWindow,l=e(a);$jq("body").append(l),l.submit().remove(),d=setInterval(function(){void 0!==h.paymentResult&&(clearInterval(d),clearTimeout(f),g(a,b,c))},j),f=setTimeout(function(){clearInterval(d),clearTimeout(f),c(a,Bose.Translation.getSiteTranslation("error.payment.cybersource.title"),Bose.Translation.getSiteTranslation("form.error.PaymentAuthorizationException"))},i)}function g(a,b,c){var d=a.find(k.cybersource.iframe).get(0).contentWindow,e=d.paymentResult;"1"===e.status?(h(a,e.values.cardNumber,e.values.cvc,e.values.token),b(a)):c(a,d.errorTitle,d.paymentError)}function h(a,b,c,d){a.find(k.form.cardNumber).val(b),a.find(k.form.ccv).val(c),a.find(k.form.subscriptionId).val(d)}var i=9e3,j=300,k={cybersource:{tokenRequestUrl:".bose-cyberSourceTokenRequestUrl",cardNumber:".bose-cyberSourceTokenRequestData__cardNumber",cvc:".bose-cyberSourceTokenRequestData__cardCvn",expiryDate:".bose-cyberSourceTokenRequestData__cardExpiryDate",iframe:".bose-cyberSourceTokenRequestIframe",formData:".bose-cyberSourceTokenRequestData",billToForename:".bose-cyberSourceTokenRequestData__billToForename",billToSurname:".bose-cyberSourceTokenRequestData__billToSurname",billToEmail:".bose-cyberSourceTokenRequestData__billToEmail",billToAddressLine1:".bose-cyberSourceTokenRequestData__billToAddressLine1",billToAddressCity:".bose-cyberSourceTokenRequestData__billToAddressCity",billToAddressPostalCode:".bose-cyberSourceTokenRequestData__billToAddressPostalCode",billToAddressState:".bose-cyberSourceTokenRequestData__billToAddressState",billToAddressCountry:".bose-cyberSourceTokenRequestData__billToAddressCountry",shippingFirstname:'input[name="shipping.firstName"]',shippingSurname:'input[name="shipping.lastName"]',shippingAddressLine1:'input[name="shipping.line1"]',shippingAddressCity:'input[name="shipping.town"]',shippingAddressPostalCode:'input[name="shipping.postalCode"]',shippingAddressState:'select[name="shipping.state"]',shippingAddressCountry:'input[name="shipping.country.isocode"]',billingFirstname:'input[name="billing.firstName"]',billingSurname:'input[name="billing.lastName"]',billingAddressLine1:'input[name="billing.line1"]',billingAddressCity:'input[name="billing.town"]',billingAddressPostalCode:'input[name="billing.postalCode"]',billingAddressState:'select[name="billing.state"]',billingAddressCountry:'input[name="billing.country.isocode"]'},form:{cardNumber:'input[name="payment.cardNumber"]',ccv:'input[name="payment.ccv"]',expiryYear:'select[name="payment.expiryYear"]',expiryMonth:'select[name="payment.expiryMonth"]',subscriptionId:'[name="payment.subscriptionId"]'}};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.InternalPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Internal_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.IngenicoEcommercePaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Ingenico_Ecommerce_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.SEPAPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"SEPA_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.ISDToolKitPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"ISD_PaymentProvider"}function c(a,b,c){var e=$jq("#order_payment_token_url").val(),g=a.find(f.expiryYear).val().substr(2)+a.find(f.expiryMonth).val(),h='<?xml version="1.0" ?><request><cc>'+a.find(f.cardNumber).val()+"</cc><exp>"+g+"</exp></request>";$jq.ajax({type:"POST",url:e,data:{request:h},dataType:"text",crossDomain:!0,cache:!1,success:function(e){d(a,e,b,c)},error:function(){c(a)}})}function d(a,b,c,d){try{var g=$jq.parseXML(b),h=$jq(g),i=h.find("rc").text(),j=h.find("token").text(),k=h.find("cc").text(),l=-1!==b.indexOf(e);"0"===i?(a.find(f.cardNumber).val(k),a.find(f.subscriptionId).val(j),c(a)):l?d(a,Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.title"),Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.message")):d(a)}catch(c){-1!==c.message.indexOf("Invalid XML")&&-1!==b.indexOf(e)?d(a,Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.title"),Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.message")):d(a)}}var e="#302",f={expiryYear:'[name="payment.expiryYear"]',expiryMonth:'[name="payment.expiryMonth"]',cardNumber:'[name="payment.cardNumber"]',subscriptionId:'[name="payment.subscriptionId"]'};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.ProductStatus=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,e){var f=$jq(c.productStatus).filter('[data-product-code="'+b+'"]'),g=f.find(c.productContainer),h=f.data("status-productcodemapping"),i=$jq(d.productVariantStatus);if(g.html(""),void 0!==h){$jq(c.productStatus).show();var j=h[e];void 0!==j&&""!==j?(g.html(j),i.val(j),f.removeClass(d.productStatusHide)):(g.html(""),i.val(),f.addClass(d.productStatusHide))}}var c={productContainer:".js-productStatusContainer",productStatus:".bose-productStatus--design2016"},d={productStatusHide:"bose-productStatus--hide",productVariantStatus:'input[name="productStatus-variantCode"]'};return{init:a,_selectors:c,_classes:d}}();var Bose=Bose||{};Bose.ProductCallToAction=function(){function a(){$jq(document).on("variantChanged",b),$jq(document).on("variantUpdatedATP",c),$jq(g.resellerOverlayButton).on("click",d),$jq(g.resellerDirectButton).on("click",f),$jq(g.loadResellers).on("click",d),$jq(g.loadResellersFromHatch).on("click",e)}function b(a,b,c){var d=$jq(g.container).filter('[data-product-code="'+b+'"]'),e=d.closest($jq('*[data-product-reference-code="'+b+'"]')).find("a.bose-productLink");d.filter("[data-variant-code]").addClass(h.hidden),d.filter('[data-variant-code="'+c+'"]').removeClass(h.hidden),e.each(function(a,b){var d=$jq(b),e=d.attr("href");d.attr("href",Bose.Utils.updatedHashParam(e,"v",c))})}function c(a,b){var c=$jq(g.container).filter('[data-variant-code="'+b.code+'"]'),d=c.find(g.primary),e=c.data("orderable");(void 0===e||e)&&(b.atpData&&b.atpData.sellable?Bose.ButtonLink.enable(d):Bose.ButtonLink.disable(d))}function d(a){Bose.WhereToBuy.loadResellers(a.target)}function e(a){Bose.WhereToBuy.loadResellers(a.target,"iceleads")}function f(a){var b=$jq(a.target),c=b.closest(".bose-buttonLink").attr("title");$jq(document).trigger("trackResellerDirectLink",c)}var g={resellerOverlayButton:".js-cta__resellerOverlayButton",resellerDirectButton:".js-cta__resellerDirectButton",loadResellers:".js-whereToBuy__loadResellers",loadResellersFromHatch:".js-cta__resellerOverlayButton_activeHatch",container:".js-cta",primary:".js-cta__primary"},h={hidden:"bose-cta--hide"};return{init:a,_selectors:g,_classes:h}}(),$jq(document).ready(function(){Bose.ProductCallToAction.init()});var Bose=Bose||{};Bose.CreditCardDetector=function(){function a(){g=$jq(h.paymentGroup).data("payment-group"),$jq(h.cardNumberField).on("creditCardType",b).on("blur",f)}function b(){var a,b,d,f=$jq(this),g=f.closest(h.cardNumberContainer);if(""===f.val())return e(f),f.parent().addClass("-defaultPayment"),$jq(h.cardSection).data("card-found",!1),$jq(h.tooltipContent).find(h.boseIcon).removeClass().addClass(i.boseIcon+" "+i.cvvIcon),!1;a=c(f),b=$jq.isEmptyObject(a),b&&f.val().length>j?(e(f),g.addClass("-defaultPayment")):!1===b?(d=a.code,f.data("options").regex=a.regex,k.groupCode=a.code,k.methodCode=a.paymentCode,k.provider=a.provider,$jq(h.cardSection).data("card-found",!0),f.closest(h.paymentFieldsContainer).data("hybris-id",a.code).data("payment-provider",a.provider).attr("id",a.code),g.find(h.cardTypeScreenReader).text(a.name),$jq(h.paymentCardTypeInput).val(a.code),$jq(h.paymentCodeInput).val(a.code),$jq(h.paymentInfoInput).val(a.paymentInfoType),$jq(h.paymentMethodInput).val(a.code),$jq(h.cardSelectionInput).val(a.code).attr("id",a.code),$jq(h.paymentTokenURL).val(a.activePaymentMethods[0].aliasUrl),e(f),g.addClass("-"+d.substring(d.indexOf("_")+1)),$jq(h.tooltipContent).find(h.tooltipLabel).html(a.cvvNumberMessage),$jq(h.tooltipContent).find(h.boseIcon).removeClass().addClass(i.boseIcon+" "+i.cvvIcon+" "+i.boseIcon+"--"+d.substring(d.indexOf("_")+1))):b&&(e(f),f.parent().addClass("-defaultPayment"),$jq(h.cardSection).data("card-found",!1))}function c(a){return d(a.val(),g)}function d(a,b){var c={};return $jq.each(b,function(b,d){if(d.hasOwnProperty("detectionRegex")&&"null"!==d.detectionRegex&&new RegExp(d.detectionRegex).test(a))return c.code=d.code,c.name=d.name.replace(/\s/g,""),c.regex=d.validationRegex,c.provider=d.paymentProvider,c.paymentInfoType=d.paymentInfoType,c.paymentCode=d.paymentMethodCode,c.cvvNumberMessage=d.cvvNumberMessage,c.activePaymentMethods=d.activePaymentMethods,!1}),c}function e(a){a.parent().removeClass(function(a,b){return(b.match(/(^|\s)-\S+/g)||[]).join(" ")})}function f(a){var b=$jq(h.cardSection).data("card-found"),c=$jq(this).val(),d=k.provider,e=Bose.DataLayer.Data.Page.formattedLocale;a.stopPropagation(),c.length>j&&b&&"ISD_PaymentProvider"!==d&&$jq.ajax({url:"/"+e+"/checkout.paymentMethodController.html/paymentMethod",method:"POST",dataType:"json",data:k,success:function(a){$jq(document).trigger("disableCheckoutLoader"),"Ingenico_PaymentProvider"===k.provider?($jq(h.ingenicoAuthURL).val(a.AUTHRESPONSEURL),$jq(h.ingenicoURLContainer).text(a.ALIASURL),$jq.each(a,function(a,b){$jq(h.ingenicoSourceRequestDiv).find('div[data-param-name="'+a+'"]').text(b)})):"CyberSource_PaymentProvider"===k.provider&&($jq(h.cyberSourceURLContainer).text(a.token_url),$jq.each(a,function(a,b){$jq(h.cyberSourceRequestDiv).find('div[data-param-name="'+a+'"]').text(b)}))}})}var g,h={cardNumberContainer:".bose-cardNumber",cardNumberField:".bose-cardNumber input",cardTypeScreenReader:".bose-cardNumber__cardType .bose-screenReaderText",paymentGroup:".bose-paymentOptionsForm",cyberSourceURLContainer:".bose-cyberSourceTokenRequestUrl",cyberSourceRequestDiv:".bose-cyberSourceTokenRequestData",ingenicoURLContainer:".bose-ingenicoAliasRequestUrl",ingenicoSourceRequestDiv:".bose-ingenicoAliasRequestData",paymentFieldsContainer:".js-bose-paymentProvider",cardSection:".js-bose-cardSection",cardSelectionInput:".js-bose-creditCardGrouping",ingenicoAuthURL:'input[name="payment.authResponseUrl"]',paymentMethodInput:'input[name="checkout_payment-method"]',paymentCardTypeInput:'input[name="payment.cardType"]',paymentCodeInput:'input[name="payment.code"]',paymentInfoInput:'input[name="payment.paymentInfoType"]',tooltipContent:".bose-tooltipContent--cvv",tooltipButton:".js-bose-cvvTooltip",tooltipLabel:".bose-tooltipContent__text",boseIcon:".bose-icon",paymentTokenURL:"#order_payment_token_url"},i={boseIcon:"bose-icon",cvvIcon:"bose-icon--cvv"},j=6,k={};return{init:a,_selectors:h,_paymentMethodRequest:k}}();var Bose=Bose||{};Bose.VariantDDSelector=Bose.VariantDDSelector||{},Bose.VariantDDSelector.variantSelector=".bose-variantSelector__variants",Bose.VariantDDSelector.selectedVariantSelector=Bose.VariantDDSelector.variantSelector+" option:selected",Bose.VariantDDSelector.ecommerceAreajqSelector=".bose-ecommerceArea__ctaArea .bose-variantSelector__variants",Bose.VariantDDSelector.jqSelector=".bose-variantDDSelector",Bose.VariantDDSelector.jqSelectorItem=".bose-variantSelector__variantItem",Bose.VariantDDSelector.selectedItemClass="bose-variantSelector__variantItem--selected",Bose.VariantDDSelector.jqSelectorLabel=".bose-variantSelector__label",Bose.VariantDDSelector.variantCodeFormFieldSelector='input[name=":product-variantCode"]',Bose.VariantDDSelector.variantPathFormFieldSelector='input[name=":product-path"]',Bose.VariantDDSelector.$allVariantDDSelectors=null,Bose.VariantDDSelector.init=function(){Bose.Select.init(),Bose.VariantDDSelector.$allVariantDDSelectors=$jq(Bose.VariantDDSelector.jqSelector+":not([data-initialized])"),Bose.VariantDDSelector.attachListeners();var a=Bose.Utils.getURLHashParam("v");Bose.VariantDDSelector.navigateToVariant(a),Bose.VariantDDSelector.prependSelect(),Bose.VariantDDSelector.$allVariantDDSelectors.attr("data-initialized",!0)},Bose.VariantDDSelector.Handlers={},Bose.VariantDDSelector.Handlers.selectionChange=function(){var a=$jq(this).find("option:selected"),b=a.data("variant-code"),c=a.data("variant-path"),d=a.attr("title"),e=a.parent().data("variant-image")||a.data("variant-image"),f=a.parents(Bose.VariantDDSelector.jqSelector),g=$jq(this).closest(".bose-productReference__container").find(".bose-productReference__image img"),h=f.data("product-code"),i=!!a.closest(".js-parentProduct").length&&a.closest(".js-parentProduct").data("productcode"),j=a.data("dtmSkip");0===g.length&&(g=a.closest(".bose-productReferences__reference__container").find(".bose-productReference__image")),Bose.VariantDDSelector.updateStyling(a,f),Bose.VariantDDSelector.updateFormField(f,b,c),Bose.VariantDDSelector.updateLabel(f,d),Bose.VariantDDSelector.updateImage(g,e),$jq(document).trigger("variantChanged",[h,b,c,e,i]),void 0!==j&&null!==j&&""!==j&&j||$jq(document).trigger("product.trackVariantChanged"),Bose.Utils.reMatchHeights()},Bose.VariantDDSelector.updateImage=function(a,b){a.attr("src",b)},Bose.VariantDDSelector.Handlers.appendVariantToURI=function(){var a=$jq(this).find("option:selected"),b=a.data("variant-code");Bose.Utils.updateURLHashParam("v",b)},Bose.VariantDDSelector.attachListeners=function(){Bose.VariantDDSelector.$allVariantDDSelectors.find(Bose.VariantDDSelector.variantSelector).on("selectmenuchange",Bose.VariantDDSelector.Handlers.selectionChange),$jq(Bose.VariantDDSelector.ecommerceAreajqSelector).on("selectmenuchange",Bose.VariantDDSelector.Handlers.appendVariantToURI)},Bose.VariantDDSelector.updateStyling=function(a,b){b.find(Bose.VariantDDSelector.jqSelectorItem).removeClass(Bose.VariantDDSelector.selectedItemClass),a.addClass(Bose.VariantDDSelector.selectedItemClass)},Bose.VariantDDSelector.updateLabel=function(a,b){a.find(Bose.VariantDDSelector.jqSelectorLabel).html(b)},Bose.VariantDDSelector.updateFormField=function(a,b,c){var d=a.find(Bose.VariantDDSelector.variantCodeFormFieldSelector),e=a.find(Bose.VariantDDSelector.variantPathFormFieldSelector);d.val(b),e.val(c)},Bose.VariantDDSelector.navigateToVariant=function(a){var b=$jq(Bose.VariantDDSelector.ecommerceAreajqSelector);if(void 0!==a&&""!==a&&b.length){var c=$jq(Bose.VariantDDSelector.ecommerceAreajqSelector+" option[value="+a+"]");c.index()>-1&&(c.attr("data-dtm-skip",!0),b.val(a).trigger("selectmenuchange").selectmenu("refresh"),c.removeAttr("data-dtm-skip"))}},Bose.VariantDDSelector.prependSelect=function(){$jq(".bose-variantDDSelector:not([data-initialized])").each(function(){var a=$jq(this);a.find(".bose-select__select").prepend(a.find(".bose-variantDDSelector__selectMessage"))})};var Bose=Bose||{};Bose.ColorSelector=function(){function a(){var a=$jq(v.component).not(v.initialised);a.find(v.colorItem.component).on("click",g),a.find(v.dimension).on("click",c),$jq(v.addProductCheckbox).on("change",b),u=$jq(v.bundleProductMap).data("bundle-map"),a.addClass(w.initialised),l($jq(v.colorItem.selected)),$jq(v.colorItem.selected).click(),$jq(v.list).find("li:first-child a.js-colorSelector-pckProduct").each(function(){$jq(this).click()})}function b(a){var b=$jq(a.currentTarget),c=b.parent().closest(".bose-packageVariantSelector__addProduct").parent().find(".bose-colorItem--selected");$jq(v.packageVariantListContainer).find("input:checked").length>0?c.click():$jq(v.masterColorList).find("li a.bose-colorItem--selected").click()}function c(a){var b=$jq(a.currentTarget),c=b.data(x.dimension),d=b.closest(v.component);b.hasClass(w.dimensionSelected)||(e(d,c),f(d,c))}function d(a){var b=a.closest(v.component),c=a.closest(v.dimensionColor).data(x.dimension),d=b.find(v.dimension+"[data-"+x.dimension+'="'+c+'"]');d.hasClass(w.dimensionSelected)||(Bose.VariantBlockSelector.updateStyling(b,d),e(b,c))}function e(a,b){var c=a.find(v.dimensionColor),d=c.filter("[data-"+x.dimension+'="'+b+'"]');c.hide(),d.show()}function f(a,b){var c=a.find(v.dimensionColor),d=c.filter("[data-"+x.dimension+'="'+b+'"]'),e=d.find(v.colorItem.selected);e.length||(e=d.find(v.colorItem.component).first()),e.click()}
function g(){var a,b=$jq(this),c=b.closest(v.component),e=c.data("multi-dimensional"),f=c.data("product-code"),g=$jq(v.packageVariantListContainer).find("input:checked"),l=m(b),o=!0;e&&d(b),b.hasClass(w.bundleVariants)?0===g.length&&b.hasClass(w.packageColorSelector)?(c=b.closest(v.packageVariantListContainer),o=!1,j(l),n(e?b.closest(v.dimensionColor):c,b),k(e,b,c,f,l,o)):b.hasClass(w.masterVariants)?(t=b.data("variant-code"),c=b.closest(".js-colorSelector-productPageSelector"),n(e?b.closest(v.dimensionColor):c,b),j(l),o=!0,l.multiVariantCode=h(),a=i(l),l.variantCode=a.variantCode,l.variantPath=a.variantPath,l.variantImage=a.variantImage,l.totalPrice=a.totalPrice,l.totalPriceFormat=a.totalPriceFormat,k(e,b,c,f,l,o)):g.length>0&&b.hasClass(w.packageColorSelector)&&(c=b.closest(v.packageVariantListContainer),n(e?b.closest(v.dimensionColor):c,b),j(l),l.multiVariantCode=h(),a=i(l),l.variantCode=a.variantCode,l.variantPath=a.variantPath,l.variantImage=a.variantImage,l.totalPrice=a.totalPrice,l.totalPriceFormat=a.totalPriceFormat,k(e,b,c,f,l,o)):(n(e?b.closest(v.dimensionColor):c,b),k(e,b,c,f,l,o))}function h(){var a=$jq(v.packageVariantListContainer).find("input:checked"),b=[];return $jq.each(a,function(){var a=$jq(this),c=a.parent().closest(".bose-packageVariantSelector__addProduct").closest(v.packageVariantListContainer).find(".bose-colorItem--selected");b.push(c.data("variant-code"))}),b}function i(a){var b=a.multiVariantCode,c={};for(var d in u)if(u.hasOwnProperty(d)){var e=u[d],f=[];if(e.master.code===t&&void 0!==e.slaves&&e.slaves.length===b.length){for(var g=0;g<e.slaves.length;g++)f.push(e.slaves[g].code);for(var h=0;h<b.length;h++)f=f.filter(function(a){return a!==b[h]});if(0===f.length){c.variantCode=e.code,c.variantPath=e.path,c.variantImage=e.image,c.totalPrice=e.bundleTotalPrice,c.totalPriceFormat=e.bundleTotalPriceFormat;break}}else if(0===b.length&&e.master.code===t&&void 0===e.slaves){c.variantCode=e.code,c.variantPath=e.path,c.variantImage=e.image,c.totalPrice=e.bundleTotalPrice,c.totalPriceFormat=e.bundleTotalPriceFormat;break}}return c}function j(a){$jq(v.subVariantImgContainer).find('img[alt="'+a.title+'"]').attr("src",a.variantImage)}function k(a,b,c,d,e,f){q(b),o(c,e.variantLabel),l(b),f&&(p(c,e.variantCode,e.variantPath),$jq(document).trigger("variantChanged",[d,e.variantCode,e.variantPath,e.variantImage,"",e.totalPrice,e.totalPriceFormat]),void 0!==e.dtmSkip&&null!==e.dtmSkip&&""!==e.dtmSkip&&e.dtmSkip||$jq(document).trigger("product.trackVariantChanged"))}function l(a){var b=a.find(v.bopisEnabledStatus).html();void 0!==b&&("true"===b?($jq(v.shippingMethod).show(),$jq(v.stockDetails).hide()):($jq(v.shippingMethod).hide(),$jq(v.stockDetails).show()))}function m(a){return{variantCode:a.data("variant-code"),variantPath:a.data("variant-path"),variantLabel:a.attr("title"),variantImage:a.data("variant-image"),dtmSkip:a.data("dtmSkip"),title:a.data("product-title")}}function n(a,b){a.find(v.colorItem.component).removeClass(w.selectedItem),b.addClass(w.selectedItem)}function o(a,b){a.find(v.colorName).text(b)}function p(a,b,c){a.find(v.variantCode).length?(a.find(v.variantCode).val(b),a.find(v.variantPath).val(c)):($jq(v.component).find(v.variantCode).val(b),$jq(v.component).find(v.variantPath).val(c))}function q(a){a.find(v.screenReader).html(Bose.Translation.getSiteTranslation(y.selectedColor+a.attr("title"))),a.parent().siblings().each(function(){var a=$jq(this),b=a.find(".bose-colorSelector__colorItem").attr("title");a.find(v.screenReader).html(Bose.Translation.getSiteTranslation(y.color+b))})}function r(a,b){if(void 0!==b&&""!==b&&a.length){s(a.find(v.color).filter("[data-variant-code="+b+"]"))}}function s(a){a.attr("data-dtm-skip",!0),a.click(),a.removeAttr("data-dtm-skip")}var t,u,v={component:".js-colorSelector",initialised:".js-colorSelector-initialised",dimension:".js-colorSelector__dimension",dimensionColor:".js-colorSelector__dimensionColor",variantCode:'input[name=":product-variantCode"]',variantPath:'input[name=":product-path"]',color:".bose-colorSelector__colorItem",colorName:".bose-colorSelector__colorName",masterColorName:".bose-colorSelector__colorName--masterProduct",list:".js-colorSelector-list",screenReader:".bose-screenReaderText",subVariantImgContainer:".bose-packageVariantSelector__imageBlock",addProductCheckbox:".js-varaintSelector__addProduct",packageVariantList:".js-hiddenValues",masterColorList:".js-masterColor-list",packageProductContainer:".bose-packageVariantSelector",packageVariantListContainer:".bose-packageVariantSelector__productDetails",stockDetails:".js-stockDetails",colorItem:{component:".bose-colorItem",selected:".bose-colorItem--selected"},shippingMethod:".bose-shippingMethod",bopisEnabledStatus:".bose-bopisEnabledStatus",bundleProductMap:".js-bose-bundleProduct-map",masterVariant:".bose-colorItem--masterVariant",selectedMasterItem:""},w={initialised:"js-colorSelector-initialised",dimensionSelected:"bose-variantBlockSelector__block--selected",selectedItem:"bose-colorItem--selected",packageColorSelector:"js-colorSelector-pckProduct",bundleVariants:"bose-colorItem__bundleVariant",masterVariants:"bose-colorItem--masterVariant"},x={dimension:"dimension",selectedMaster:""},y={selectedColor:"currently selected color: ",color:"select this color: "};return{init:a,selectVariant:r,_selectors:v,_classes:w,_labels:y,_selectedVariant:t}}();var Bose=Bose||{};Bose.VariantBlockSelector=function(){function a(){$jq(document).on("click",f.variantBlock,b),c($jq(f.selectedVariantBlock))}function b(){var a=$jq(this),b=a.closest(f.container),i=b.find(f.selectorBlock),j=i.data(h.notVariant);if(!a.hasClass(g.variantBlockSelected)){if(e(i,a),!j){var k=i.data(h.productCode),l=a.data(h.code),m=a.data(h.path),n=a.data(h.image);d(b,l,m),$jq(document).trigger("variantChanged",[k,l,m,n])}c($jq(f.selectedVariantBlock))}}function c(a){var b=a.find(f.bopisEnabledStatus).html();void 0!==b&&("true"===b?$jq(f.shippingMethod).show():$jq(f.shippingMethod).hide())}function d(a,b,c){a.find(f.variantCode).val(b),a.find(f.variantPath).val(c)}function e(a,b){a.find(f.variantBlock).removeClass(g.variantBlockSelected),b.addClass(g.variantBlockSelected)}var f={variantCodeInput:'input[name=":product-variantCode"]',variantPathInput:'input[name=":product-path"]',variantBlock:".js-variantBlock--block",container:".js-variantSelector",selectorBlock:".js-variantBlock",parentProduct:".js-parentProduct",variantCode:'input[name=":product-variantCode"]',variantPath:'input[name=":product-path"]',shippingMethod:".bose-shippingMethod",bopisEnabledStatus:".bose-variantBlock-bopisEnabledStatus",selectedVariantBlock:".bose-variantBlockSelector__block--selected"},g={variantBlockSelected:"bose-variantBlockSelector__block--selected"},h={path:"variantPath",code:"variantCode",image:"variantImage",productCode:"productCode",notVariant:"notVariant"};return{init:a,selectVariant:b,updateStyling:e,_selector:f,_classes:g,_dataKeys:h}}();var Bose=Bose||{};Bose.Promo=Bose.Promo||{},Bose.Promo.init=function(){$jq(document).on("variantChanged",Bose.Promo.switchVariant)},Bose.Promo.getElementCssClasses=function(a,b){var c=$jq.trim(a.find(b).attr("class")),d=c.split(" ");return $jq.grep(d,function(a){return a.indexOf("bose-promo")<0}).join(" ")},Bose.Promo.switchVariant=function(a,b,c){var d=$jq(".bose-promoHolder[data-product-code='"+b+"']"),e=Bose.Promo.getElementCssClasses(d,".bose-promo");d.each(function(a,d){var f=$jq(d),g=f.data("text-information"),h=f.data("promo-productcodemapping");if(void 0!==h){var i=h[c];if(f.html(""),void 0!==i)for(var j=0;j<i.length;j++){var k=i[j],l="bose-promo ";"default"===k.customType?l+=" bose-promo--default":l+=" bose-promo--"+k.customType;var m=$jq("<div/>",{class:l});if(k.name&&$jq("<div/>",{class:"bose-promo__title",text:k.name}).appendTo(m),k.description&&$jq("<div/>",{class:"bose-promo__descr",text:k.description}).appendTo(m),k.imageUrl&&$jq("<img/>",{class:"bose-promo__img",src:k.imageUrl,width:90,title:k.name}).appendTo(m),k.moreInfoUrl){var n={href:k.moreInfoUrl,text:g},o=k.promotionTarget,p="bose-promo__cta bose-link bose-link--arrowRight";"OVERLAY"===o?p+=" overlay":"NEW_WINDOW"===o&&(n.target="_blank"),n.class=p;var q=$jq("<a/>",n);"OVERLAY"===o&&Bose.Overlay.doOverlay(q),q.appendTo(m)}m.appendTo(f),$jq(".bose-promoHolder[data-product-code='"+b+"']").find(".bose-promo").addClass(e)}}})};var Bose=Bose||{};Bose.ProductRatings=function(){function a(){$jq(c.container).on("click",b)}function b(){Bose.Tabs.scrollToAnchorWithStickyMsg("ProductTabs_tab999")}var c={container:".js-bose-productRatings__container"};return{init:a,_selectors:c}}();var Bose=Bose||{};Bose.EcommerceArea=function(){function a(){var a=$jq(e.component),d=Bose.Utils.getURLHashParam(f);0!==a.length&&(c(),void 0!==d&&(Bose.ColorSelector.selectVariant(a,d),Bose.VariantBlockSelector.selectVariant(a,d)),Gridle.on("update",c),$jq(document).on("variantChanged",function(a,c,d){b(d)}))}function b(a){Bose.Utils.updateURLHashParam(f,a)}function c(){var a=$jq(e.ctaArea),b=$jq(e.mediaArea);Gridle.isActive("small")?d(a,b):d(b,a)}function d(a,b){var c=a.find("h1.bose-title");c.length>0&&c.prependTo(b)}var e={component:".js-ecommerceArea",mediaArea:".js-ecommerceArea-mediaArea",ctaArea:".js-ecommerceArea-ctaArea"},f="v";return{init:a,_selectors:e}}();var Bose=Bose||{};Bose.ProductPrice=Bose.ProductPrice||{},Bose.ProductPrice.selectors={bundleMapContainer:".js-bose-bundleProduct-map"},Bose.ProductPrice.init=function(){$jq(document).on("variantChanged",Bose.ProductPrice.switchVariant)},Bose.ProductPrice.switchVariant=function(a,b,c,d,e,f,g,h){var i;i=f?$jq('.js-parentProduct[data-productCode="'+f+'"] .bose-price[data-product-code="'+b+'"]'):$jq(".bose-price").filter('[data-product-code="'+b+'"]');var j=i.data("price-productcodemapping");if(void 0!==j){var k=j[c];void 0===k||null===k||k.empty?(i.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(""),i.find(".bose-price__price--original").html(""),i.find(".bose-price__rrpMsg").removeClass("bose-price__rrpMsg--visible")):(i.removeClass("bose-price--withPromo"),k.showPromotionalPrice?(i.addClass("bose-price--withPromo"),i.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(k.promotionalPrice),i.find(".bose-price__price--original").html(k.originalPrice)):(i.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(k.originalPrice),i.find(".bose-price__price--original").html("")),void 0!==g&&g>k.originalPriceValue&&i.addClass("bose-price--withPromo").find(".bose-price__price--original").html(h),i.find(".bose-price__rrpMsg").addClass("bose-price__rrpMsg--visible"))}};var Bose=Bose||{};Bose.WhereToBuy=function(){function a(){$jq(document).on("click",".js-cta__resellerOverlayButton",b)}function b(){Bose.WhereToBuy.loadResellers($jq(this))}function c(a,b){if(!s){var c=$jq(a),d=c.closest(".bose-cta"),f=d.attr("data-product-code"),g=d.attr("data-variant-code"),h=d.attr("data-variant-sku"),i="",j="",l="";sessionStorage.clear(),sessionStorage.setItem("productCode",f),sessionStorage.setItem("variantCode",g),s=!0,"iceleads"===b?(r=!0,i="https://gethatch.com/iceleads_rest/affiliate/52413/json?region="+Bose.DataLayer.Data.Page.country+"&mpn="+h,j=Bose.DTM.getVisitorID(),""!==j&&(i=i+"&adobeID="+j),$jq.ajax({url:i,method:"GET",dataType:"jsonp",contentType:"application/json",jsonpCallback:"Bose.WhereToBuy.displayHatch"})):(l=Bose.DataLayer.Data.Page.formattedLocale,r=!1,$jq.ajax({url:"/"+l+"/forms.wheretobuy."+f+"."+g+".json",method:"GET",contentType:"application/json",success:e,error:k}))}}function d(a){var b=a.iceleads_interface.retailers;b&&!Array.isArray(b.retailer)&&(b.retailer=[b.retailer]),f(a.iceleads_interface)}function e(a){var b;b="string"==typeof a?JSON.parse(a):a,b.status===p.OK?(Bose.Popup.display(n(b),{cloneContent:!1}),h(),j()):l(b.status),s=!1}function f(a){var b;b="string"==typeof a?JSON.parse(a):a,b.status===p.OK?(Bose.Popup.display(n(b),{cloneContent:!1}),h(),j()):Bose.WhereToBuy._loadResellersFromStaticContent(),s=!1}function g(){var a=sessionStorage.getItem("productCode"),b=sessionStorage.getItem("variantCode"),c="";s=!0,c=Bose.DataLayer.Data.Page.formattedLocale,r=!1,$jq.ajax({url:"/"+c+"/forms.wheretobuy."+a+"."+b+".json",method:"GET",contentType:"application/json",success:e,error:k})}function h(){$jq(document).on("click",".bose-whereToBuy__store__shopButton",i)}function i(a){var b=$jq(a.target),c=b.closest(".bose-buttonLink").data("reseller");$jq(document).trigger("trackResellerLink",c)}function j(){$jq(document).trigger("trackResellerOverlay")}function k(){l(),s=!1}function l(a){var b="FORM.FIELD-NOT-FOUND";a&&(b="BOSE_WHERE_TO_BUY_ERROR_",-1===q.NO_RESELLERS_FOUND.indexOf(a)?b+="GENERAL":b+="NO_RESELLERS_FOUND"),Bose.Popup.display(m(b),{cloneContent:!1})}function m(a){var b={errMsg:Bose.Translation.getSiteTranslation(a)},c=nano('<div class="bose-whereToBuy bose-whereToBuy--error"><div class="bose-whereToBuy__textbox">{errMsg}</div></div>',b);return $jq(c)}function n(a){var b=sessionStorage.getItem("productCode"),c=Bose.DataLayer.Data.Page.formattedLocale,d={whereToBuyShops:""},e="";if(!(a.retailers&&a.retailers.retailer&&a.retailers.retailer.length>0)){var f={space:". &nbsp; &nbsp; &nbsp;",unavalableMsg:Bose.Translation.getSiteTranslation("Currently unavailable online"),storeLinkMsg:Bose.Translation.getSiteTranslation("This product doesn't appear to be available for purchase online through any of our partner sites. But you might find it in a store near you."),storeLocator:Bose.Translation.getSiteTranslation("Store Locator"),linkHref:"/"+c+"/store_locator.html?productCode="+b},g=nano('<div class="bose-whereToBuy"><div class="bose-whereToBuy__errorTitle">{unavalableMsg}</div><div class="bose-whereToBuy__errorDescription">{storeLinkMsg}</div><div class="bose-whereToBuy__storeButton"><a role="button" aria-label="{}" class="bose-buttonLink bose-buttonLink--type1 -withBorder bose-productLink" title="{storeLocator}" data-reseller="{storeLocator}" href="{linkHref}"<span class="bose-button__label">{storeLocator}</span><span class="bose-button__progressbar"></span></a></div></div>',f);return $jq(g)}return a.retailers.retailer.forEach(function(a){d.whereToBuyShops+=o(a)}),e=nano(u,d),$jq(e)}function o(a){var b={imgAltText:a.name,imgSrc:a.logo,imgClasses:"bose-whereToBuy__store__img"+(r?" bose-whereToBuy__store__img--small":""),stockText:"&nbsp;",btnLabel:Bose.Translation.getSiteTranslation("Buy"),btnName:a.name,btnHref:a.purchase_link};return a.stock_info?b.stockText=a.stock_qty?Bose.Translation.getSiteTranslation("In stock"):Bose.Translation.getSiteTranslation("Out of stock"):void 0===a.stock_info?b.stockText="&nbsp;":b.stockText=Bose.Translation.getSiteTranslation("Out of stock"),nano(t,b)}var p={OK:200},q={NO_RESELLERS_FOUND:[201,203,204]},r=!1,s=!1,t='<div class="bose-whereToBuy__store"><div><img class="{imgClasses}" alt="{imgAltText}" src="{imgSrc}"></div><span class="bose-whereToBuy__store__stockInfo">{stockText}</span><div class="bose-whereToBuy__store__shopButton"><a role="button" aria-label="{btnLabel}" class="bose-buttonLink -withBorder bose-productLink" title="{btnLabel}" data-reseller="{btnName}" target="_blank" href="{btnHref}"><span class="bose-button__label">{btnLabel}</span><span class="bose-button__progressbar"></span></a></div></div>',u='<div class="bose-whereToBuy">{whereToBuyShops}</div>';return{init:a,loadResellers:c,displayHatch:d,_displayResellerFromHatch:f,_loadResellersFromStaticContent:g}}();var Bose=Bose||{};Bose.Promotion=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,f){var g=$jq('.bose-highlightedPromotionHolder[data-product-code="'+b+'"]'),h=$jq('.bose-nonHighlightedpromotionHolder[data-product-code="'+b+'"]'),i=c(g,".bose-promotion");d(h,c(h,".bose-promotion"),f,b),e(g,i,f,b)}function c(a,b){var c=$jq.trim(a.find(b).attr("class")),d=c.split(" ");return $jq.grep(d,function(a){return a.indexOf("bose-promotion")<0}).join(" ")}function d(a,b,c,d){a.each(function(a,e){var f=$jq(e),g=f.data("promo-productcodemapping");if(void 0!==g){var h=g[c];if(f.html(""),void 0!==h){f.html("");for(var i=$jq("<div/>",{class:"bose-promotion bose-promotion--nonhighlighted "}),j=0;j<h.length;j++){var k=h[j];k.name&&$jq("<div/>",{class:"bose-promotion__title",text:k.name}).appendTo(i),i.appendTo(f),$jq('.bose-nonHighlightedpromotionHolder[data-product-code="'+d+'"]').find(".bose-promotion").addClass(b)}}}})}function e(a,b,c,d){a.each(function(a,e){var f=$jq(e),g=f.data("text-information"),h=f.data("promo-productcodemapping");if(void 0!==h){var i=h[c];if(f.html(""),void 0!==i){for(var j=$jq("<div/>",{class:"bose-promotion bose-promotion--highlighted "}),k=0;k<i.length;k++){var l=i[k],m="bose-promotion__highlightedpromo";0===k?m+=" -first":$jq("<div/>",{class:"bose-promotion  -rowrule"}).appendTo(j);var n=$jq("<div/>",{class:m}),o="";if(l.name&&(o=$jq("<div/>",{class:"bose-promotion__highlightedpromoinfo"}),$jq("<div/>",{class:"bose-promotion__title",text:l.name}).appendTo(o)),l.description&&$jq("<div/>",{class:"bose-promotion__descr",text:l.description}).appendTo(o),l.moreInfoUrl){var p={href:l.moreInfoUrl,title:g,text:g},q=l.promotionTarget,r="bose-promotion__ctalink -arrowRight";"OVERLAY"===q?r+=" overlay":p.target="NEW_WINDOW"===q?"_blank":"_self",p.class=r;var s=$jq("<div/>",{class:"bose-promotion__cta"}),t=$jq("<a/>",p);Bose.Overlay.doOverlay(t),t.appendTo(s),s.appendTo(o)}if(o.appendTo(n),l.imageUrl){var u=$jq("<div/>",{class:"bose-promotion__promoimg"});$jq("<img/>",{src:l.imageUrl,class:"bose-promotion__highlightedimg",title:l.name}).appendTo(u),u.appendTo(n)}n.appendTo(j)}j.appendTo(f),$jq('.bose-highlightedPromotionHolder[data-product-code="'+d+'"]').find(".bose-promotion").addClass(b)}}})}return{init:a}}(),$jq(document).ready(function(){Bose.OnlineResellers.init()}),$jq(document).ready(function(){Bose.SocialMedia.init()}),$jq(document).ready(function(){Bose.quantityChanger.init()}),$jq(document).ready(function(){Bose.ProductATP.init()}),$jq(document).ready(function(){Bose.PaymentControl.init(),Bose.IngenicoPaymentModule.init(),Bose.CyberSourcePaymentModule.init(),Bose.ISDToolKitPaymentModule.init(),Bose.InternalPaymentModule.init(),Bose.IngenicoEcommercePaymentModule.init(),Bose.MockedPaymentModule.init(),Bose.SEPAPaymentModule.init(),Bose.CreditCardDetector.init()}),$jq(document).ready(function(){Bose.ProductStatus.init()}),$jq(document).ready(function(){Bose.Promo.init()}),$jq(document).ready(function(){Bose.ProductPrice.init()}),$jq(document).ready(Bose.Promotion.init),$jq(document).ready(function(){Bose.ColorSelector.init(),Bose.VariantDDSelector.init(),Bose.VariantBlockSelector.init()}),$jq(document).ready(function(){Bose.ProductRatings.init()}),$jq(document).ready(function(){Bose.EcommerceArea.init()});var Bose=Bose||{};Bose.MockedPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Mockup"}function c(a,b){a.find(d.subscriptionId).val("123456789"),b(a)}var d={subscriptionId:'[name="payment.subscriptionId"]'};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.ProductTile2016=function(){function a(){c(),$jq(document).on("variantChanged",b),$jq(document).on("click",i.variantLineButton,h)}function b(a,b,c,d,e){var h=$jq(a.target.activeElement),j=h.closest(i.productTile),k=j.find(i.productImage),l=j.find(i.productLink);f(k,e),g(l,c)}function c(){$jq(i.enableStock).each(function(){var a=$jq(this),b=a.find(".bose-productTile2016__info__userPref").data("url"),c=b;$jq.ajax(c,{dataType:"json",method:"GET"}).done(function(b){null!==b&&("SOLDOUT"===b.atpData.stockAvailableMessage?(a.find(".bose-productTile2016__infoNewCTABadge").html("").append(d("black_friday_soldout")).addClass("-stockOut"),a.addClass("bose-productTile2016--extraHeight"),a.find(".bose-buttonLink--buy").remove(),a.find(".bose-productTile2016__wrapper").removeClass("bose-productTile2016__wrapper--hover")):"ENDINGSOON"===b.atpData.stockAvailableMessage&&(a.addClass("bose-productTile2016--extraHeight"),a.find(".bose-productTile2016__infoNewCTABadge").html("").append(e("black_friday_low_stock")).addClass("-endingSoon")))})})}function d(a){var b={message:Bose.Utils.getGraniteTranslation(a)},c=nano('<div class="bose-productTile2016__info__ctaFeatures__tileMessage"><div class="bose-productTile2016__info__ctaFeatures__messageLabel"><span>{message}</span></div></div>',b);return $jq(c)}function e(a){var b={message:Bose.Utils.getGraniteTranslation(a)},c=nano('<div class="bose-productTile2016__info__ctaFeatures__tileMessage bose-productTile2016__info__ctaFeatures__tileMessage--graybackground"><div class="bose-productTile2016__info__ctaFeatures__messageLabel"><span>{message}</span></div></div>',b);return $jq(c)}function f(a,b){a.attr("src",b)}function g(a,b){var c=a.attr("href"),d=Bose.Utils.updatedHashParam(c,"v",b);a.attr("href",d)}function h(){var a=$jq(this),b=a.closest("form"),c=a.closest(i.parentProduct).data(j.productCode);if(c){var d=b.find('[name=":parentProductCode"]');d.length?d.val(c):b.prepend($jq("<input/>",{type:"hidden",name:":parentProductCode",value:c}))}return Bose.Forms.submitForm(this)}var i={parentProduct:".js-parentProduct",productTile:".js-productTile2016",productImage:".js-productTile2016__image",productLink:".js-productTitle__link",variantLineButton:".js-variantLineButton",enableStock:".js-productTile2016-enableStock"},j={productCode:"productcode"};return{init:a,addProductParentToFormAndSubmit:h,_selectors:i,_dataKeys:j}}(),$jq(document).ready(function(){Bose.ProductTile2016.init()});var Bose=Bose||{};Bose.ProductDownloadForm=function(){function a(){l=$jq(p.product),m=$jq(p.category),Bose.Select.init(),n=$jq(p.form).data("products"),o=$jq(p.form).data("productDocuments"),b()}function b(){m.on("selectmenuchange",function(){c()}),l.on("selectmenuchange",function(){d()}),$jq(document).on("click",p.btn,i)}function c(){f(),g();var a=m.val();a&&e(a)&&h(a)}function d(){$jq(p.btn).addClass("-disabled"),g();var a=l.val();a&&e(a)&&$jq(p.btn).removeClass("-disabled")}function e(a){return"-1"!==a}function f(){l.empty(),l.append($jq("<option></option>").attr("value","-1").text("")),l.attr("disabled","disabled"),l.selectmenu("refresh"),$jq(p.btn).addClass("-disabled")}function g(){$jq(p.errorMessage).addClass(q.hidden),$jq(p.result).addClass(q.hidden),$jq(p.result).empty()}function h(a){for(var b=0;b<n.length;b++)if(a===n[b].categoryCode)for(var c=0;c<n[b].products.length;c++)l.append($jq("<option></option>").attr("value",n[b].products[c].value).text(n[b].products[c].label));l.prop("disabled",!1),l.selectmenu("refresh")}function i(){for(var a=0;a<o.length;a++)if(l.val()===o[a].value){var b=o[a].label;b&&""!==b?$jq.get(b,j):$jq(p.errorMessage).removeClass(q.hidden);break}}function j(a){$jq(p.result).html(a),k()}function k(){$jq(p.result).removeClass(q.hidden)}var l,m,n,o,p={form:".bose-productDownloadForm--form",category:'select[name="categorySelector"]',product:'select[name="productSelector"]',btn:".bose-productDownloadForm--button",result:".bose-productDownloadForm--result",errorMessage:".bose-productDownloadForm--errorMessage"},q={hidden:"bose-productDownloadForm--hidden"};return{init:a,_selectors:p,_classes:q}}(),$jq(document).ready(function(){Bose.ProductDownloadForm.init()}),$jq(document).ready(function(){Bose.WarrantyProductId.init()});var Bose=Bose||{};Bose.WarrantyProductId=function(){function a(){$jq(c.productIdButton).on("click",b)}function b(){var a=$jq(this).closest(c.variantButtonContainer),b=a.data("productName"),d=a.data("productCode"),e=a.data("variantColour"),f=$jq(c.warrantyProductBlock),g=f.find(c.inBoundProductField).val(),h=f.find(c.issueDescriptionField).val(),i=f.find(c.serviceTypeField).val(),j=f.find(c.warrantyStatusField).val();$jq(c.variantProductName).val(b),$jq(c.variantProductCode).val(d),$jq(c.variantColourField).val(e),Bose.Forms.submitForm(this),Bose.DataLayer.setVariable("Product","inboundproductCode",g),Bose.DataLayer.setVariable("Product","issueCategory",h),Bose.DataLayer.setVariable("Product","serviceType",i),Bose.DataLayer.setVariable("Product","warrantyStatus",j),"REPAIR"===i?Bose.DataLayer.setVariable("Product","outboundproductCode",g):Bose.DataLayer.setVariable("Product","outboundproductCode",d),$jq(document).trigger("trackWarrantyOfferPage")}var c={variantProductCode:".js-productCodeHiddenField",variantProductName:".js-productNameHiddenField",productSalesPrice:".js-productSalesPriceHiddenField",productServicePrice:".js-productServicePriceHiddenField",productIdButton:".js-bose-warrantyProductId__confirmButton",variantColourField:".js-variantColourHiddenField",variantButtonContainer:".bose-warrantyProductId__buttonContainer",inBoundProductField:".js-inboundProductCodeHiddenField",issueDescriptionField:".js-issueDescriptionHiddenField",serviceTypeField:".js-serviceTypeHiddenField",warrantyStatusField:".js-warrantyStatusHiddenField",warrantyProductBlock:".warrantyProductId"};return{init:a,selectors:c}}(),$jq(document).ready(function(){Bose.ProductIssueList.init()});var Bose=Bose||{};Bose.ProductIssueList=function(){function a(){$jq(h.variantIssueSubmitButton).addClass(k.disabled).attr("disabled","disabled"),$jq(h.variantIssueMessage).val(""),$jq(h.variantIssueRadioButton).prop("checked",!1),$jq(h.produtIssueList).on("click",b),d(),$jq(h.variantIssueSubmitButton).on("click",e).on("mousedown",c)}function b(){j=!0,g()}function c(a){a.preventDefault()}function d(){$jq(h.variantIssueMessage).on("keyup blur",function(){var a=$jq(h.textArea);$jq(h.variantIssueMessage).val().length>0?(a.removeClass("bose-textArea--error js-errorValidate").addClass("bose-textArea--active"),i=!0,g()):(a.addClass("bose-textArea--error js-errorValidate").removeClass("bose-textArea--active"),i=!1,g())})}function e(){var a,b,c=$jq(h.variantButtonContainer),d=c.data("productName"),e=c.data("productCode"),g=c.data("serviceType"),k=c.data("warrantyStatus"),l=c.data("variantColour"),m=$jq(h.variantIssueMessage).val();$jq(h.variantIssueRadioButton).each(function(){var c=$jq(this);!0===c.prop("checked")&&(a=c.val(),b=c.attr("data-label"))}),f(e,h.variantIssueProductCode),f(d,h.variantIssueProductName),f(g,h.variantIssueServiceType),f(k,h.variantIssueWarrantyStatus),f(a,h.variantIssue),f(b,h.variantIssueDescription),f(m,h.variantProblemDescription),f(l,h.variantColourField),Bose.Forms.submitForm(this),i=!1,j=!1,Bose.DataLayer.setVariable("Product","inboundproductCode",e),Bose.DataLayer.setVariable("Product","issueCategory",b),Bose.DataLayer.setVariable("Product","serviceType",g),Bose.DataLayer.setVariable("Product","warrantyStatus",k),$jq(document).trigger("trackProductIssueList")}function f(a,b){a&&$jq(b).val(a)}function g(){j&&i?$jq(h.variantIssueSubmitButton).removeClass(k.disabled).removeAttr("disabled","disabled"):$jq(h.variantIssueSubmitButton).addClass(k.disabled).attr("disabled","disabled")}var h={variantIssueProductCode:".js-productCodeHiddenField",variantIssueProductName:".js-productNameHiddenField",variantColourField:".js-variantColourHiddenField",variantIssueServiceType:".js-serviceTypeHiddenField",variantIssueWarrantyStatus:".js-warrantyStatusHiddenField",variantIssue:".js-issueOptionHiddenField",variantIssueDescription:".js-issueDescriptionHiddenField",variantProblemDescription:".js-problemDescriptionHiddenField",variantIssueSubmitButton:".bose-productIssueList__buttonLink",variantButtonContainer:".bose-productIssueList__buttonContainer",variantIssueRadioButton:".bose-productIssueList__radioButton",variantIssueMessage:".bose-textArea__input",textArea:".bose-textArea",issueDescriptionErrorMessage:".js-productIssueDescriptionError",produtIssueList:".bose-produtIssueList__issueList input:radio"},i=!1,j=!1,k={disabled:"-disabled"};return{init:a,selectors:h,changeButtonStatus:g,inputDirtyVal:i,handleMouseDownEvent:c,issueSelectedVal:j,issueSelection:b,variantIssueData:e}}(),$jq(document).ready(function(){Bose.TroubleShooting.init()});var Bose=Bose||{};Bose.TroubleShooting=function(){function a(){c(),$jq(e.troubleShootSubmitButton).on("click",b),$jq(e.overlayLink).on("click",d)}function b(){Bose.Forms.submitForm($jq(e.troubleShootSubmitButton))}function c(){$jq(e.articleOpeningMandatory).data("articleMandate")&&$jq(e.troubleShootSubmitButton).addClass(f.disabled).attr("disabled","disabled")}function d(){$jq(e.troubleShootSubmitButton).removeClass(f.disabled).removeAttr("disabled","disabled")}var e={troubleShootSubmitButton:".js-troubleShootSubmitButton",articleOpeningMandatory:".js-articleOpeningMandatory",overlayLink:".troubleShooting .bose-link"},f={disabled:"-disabled"};return{init:a,handleRedirection:b,selectors:e,enableButton:d,disableButton:c}}(),$jq(document).ready(function(){$jq(".bose-serviceOrderConfirmation").length>0&&Bose.ServiceOrderConfirmation.init()});var Bose=Bose||{};Bose.ServiceOrderConfirmation=Bose.ServiceOrderConfirmation||{},Bose.ServiceOrderConfirmation=function(){function a(){$jq.fancybox.open($jq(b.loader),{closeBtn:!1,minWidth:150,minHeight:120,wrapCSS:"checkoutFancybox",scrolling:"no",keys:{close:null},afterClose:function(){$jq(b.fancyBoxOverlay).hide()}}),$jq(b.fancyBoxOverlay).show(),setTimeout(function(){$jq.fancybox.close($jq(b.loader))},6e3)}var b={loader:"#serviceLoaderOverlay",fancyBoxOverlay:"#serviceCheckoutFancyboxOverlay"};return{selectors:b,init:a}}();var Bose=Bose||{};Bose.ShippingMethod=function(){function a(){0!==$jq(e.shippingMethod).length&&$jq(document).on("click",e.shipping.changeStore,b)}function b(){d($jq(this).closest(e.shipping.option),!1,$jq(this).data("productPage"))}function c(){$jq("#storeId-hidden").val("")}function d(a,b,c){var d=Bose.DataLayer.Data.Product.selectedVariantCode;$jq(e.pickupShippingMethod).prop("checked",!0),Bose.StoreSelector.displayPopup(d,1,c,!1,!1)}var e={shippingMethod:".bose-shippingMethod",shipping:{container:".js-shippingMethodShipping",changeStore:".js-shippingMethodShipping-changeStore"},pickupShippingMethod:".js-shippingMethod-pickup",shipShippingMethod:".js-shippingMethod-shipping"};return $jq(document).on("click",e.shipShippingMethod,c),{init:a,_selectors:e}}();var Bose=Bose||{};Bose.productPreConfiguredOptions=function(){function a(){var a=$jq(e.preProductImageGallery),f=a.children(e.imageOptionsContainer),g=b(f);g.slidesToShow>0&&(f.slick(g),f.show(),f.on("breakpoint",function(){d(a,f)})),d(a,f),c()}function b(a){return{slidesToShow:1,slidesToScroll:1,lazyLoad:"ondemand",infinite:!0,touchThreshold:9,swipe:!0,arrows:!0,fade:!0,dots:!0,adaptiveHeight:!0,appendDots:a,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,lazyLoad:"ondemand",infinite:!0,touchThreshold:9,swipe:!0,arrows:!1,fade:!0,dots:!0}}]}}function c(){Gridle.on("update",function(){Gridle.isActive("large")&&lazySizes.autoSizer.checkElems()})}function d(a,b){a.hasClass(f.caption)||b.children(e.slickDots).addClass(g.noCaptionClass)}var e={preProductImageGallery:".js-bose-productPreConfiguredOptions-slick",imageOptionsContainer:".bose-productPreConfiguredOptions__galleryItems",slickDots:".slick-dots"},f={caption:"js-imageGallery__hasCaption"},g={noCaptionClass:"-noCaption"};return{init:a,getSliderOptions:b,_selectors:e,_modifiers:g}}(),$jq(document).ready(function(){Bose.productPreConfiguredOptions.init()});var Bose=Bose||{};Bose.colorSelectorSlider=Bose.colorSelectorSlider||{},Bose.colorSelectorSlider.slickNextElement=".slick-next",Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD=".bose-cta input[name=customSelection]",Bose.colorSelectorSlider.slider=".bose-customColorSelectorSlider",Bose.colorSelectorSlider.selectors={slider:".bose-customColorSelectorSlider",dotListItem:".bose-customColorSelectorSliderDots li",dotListItemActive:".bose-customColorSelectorSliderDots li.slick-active",colorButton:".bose-customComponentColorGroup__colorButton",finishRadio:".radioForFinish",
componentSlide:".bose-customComponent.slick-slide",componentSlideName:".bose-customComponent__name",slickActive:".slick-active",slickClone:".slick-cloned"},Bose.colorSelectorSlider.init=function(){Bose.colorSelectorSlider.setDefaultColorSelections(),$jq(this.selectors.finishRadio).click(Bose.colorSelectorSlider.selectFinish).enter(Bose.colorSelectorSlider.selectFinish),$jq(this.selectors.colorButton).click(Bose.colorSelectorSlider.selectColor).space(Bose.colorSelectorSlider.selectColor).enter(Bose.colorSelectorSlider.selectColor)},Bose.colorSelectorSlider.colorSelectionSlick=function(){$jq(Bose.colorSelectorSlider.slider).slick({dots:!0,respondTo:"slider",appendDots:".bose-customColorSelectorSliderDots",appendArrows:".bose-customColorSelectorSliderNav",slidesToShow:1,customPaging:Bose.colorSelectorSlider.setCustomSliderDots,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="'+Bose.Utils.getGraniteTranslation("Previous")+'" tabindex="0" role="button">'+Bose.Utils.getGraniteTranslation("Previous")+"</button>",nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="'+Bose.Utils.getGraniteTranslation("Next")+'" tabindex="0" role="button">'+Bose.Utils.getGraniteTranslation("Next")+"</button>",cssEase:"linear",infinite:!0,draggable:!1}),Bose.colorSelectorSlider.slick=$jq(this.selectors.slider).slick("getSlick"),$jq(this.selectors.slider).on("afterChange",function(){Bose.colorSelectorSlider._updateAriaAttributes(),Bose.colorSelectorSlider._updateColorButtonTabIndex()}),$jq("a.fancybox-close").focus(),Bose.colorSelectorSlider.resizeHandler(),Bose.colorSelectorSlider._updateColorButtonTabIndex(),Bose.colorSelectorSlider._updateAriaAttributes()},Bose.colorSelectorSlider._updateColorButtonTabIndex=function(){var a=this.slick.slickCurrentSlide(),b=this.slick.$slides.eq(a);this.slick.$slider.find(this.selectors.colorButton).attr("tabindex","-1"),b.find(this.selectors.colorButton).attr("tabindex","0")},Bose.colorSelectorSlider._updateAriaAttributes=function(){var a=this.slick.slickCurrentSlide(),b=this.slick.$slides.eq(a),c=$jq(this.selectors.dotListItem);b.attr("aria-expanded",!0),this.slick.$slides.not(this.selectors.slickActive).attr("aria-expanded",!1),c.not(this.selectors.slickActive).find("button").attr("aria-expanded","false"),$jq(this.selectors.dotListItemActive).find("button").attr("aria-expanded","true"),c.attr("aria-hidden","false")},Bose.colorSelectorSlider.setCustomSliderDots=function(a,b){var c=$jq(Bose.colorSelectorSlider.selectors.componentSlide).not(Bose.colorSelectorSlider.selectors.slickClone).eq(b),d=c.children(Bose.colorSelectorSlider.selectors.componentSlideName).text(),e="selections_"+c.attr("id");return'<button aria-controls="'+e+'" aria-describedby="'+e+'" aria-label="'+d+'" type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},Bose.colorSelectorSlider.setDefaultColorSelections=function(){var a=$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val();if(void 0!==a&&$jq(Bose.colorSelectorSlider.slider).length)for(var b=a.split("|"),c=2;c<b.length-1;c++){var d=b[c].split(";");if(d.length>3){var e={};e.selectedFinish=d[3].toUpperCase(),e.selectedComponent=d[1];var f="input[name="+e.selectedComponent+"][value="+e.selectedFinish+"]";$jq(f).prop("checked",!0),Bose.colorSelectorSlider.selectColorChip(e.selectedComponent,d[2]);var g=$jq("#"+e.selectedComponent+"_"+d[2]);$jq("#selectedColorLabelFor_"+e.selectedComponent).html(g.attr("title")),$jq("#selectedColorFor_"+e.selectedComponent).css("background-color",g.css("background-color"));var h=g.attr("colorfinish"),i="#radioButtonsFor_"+e.selectedComponent,j="#finishLabel_"+e.selectedComponent;void 0!==h&&-1===h.indexOf("|")?($jq(i).hide(),$jq(j).html(Bose.Utils.getGraniteTranslation(h))):($jq(j).html(""),$jq(i).show()),Bose.colorSelectorSlider.refreshChipsForFinish(e)}}},Bose.colorSelectorSlider.selectColorChip=function(a,b){$jq("div.colorsFor_"+a+" div").removeClass("showSelection"),$jq("div.colorsFor_"+a+" .bose-customComponentColorGroup__colorButton").attr("aria-checked","false"),$jq("#selDiv_"+a+"_"+b).addClass("showSelection").parent().attr("aria-checked","true")},Bose.colorSelectorSlider.validateComponents=function(a){var b=!0,c=void 0===a?$jq(Bose.customizableProduct.jqSelectorHiddenFieldCSD).val():a,d=$jq("#color_selection_data").data("value"),e=c.split("|");if(!c.match(/^(\d+\|\w+\|)(\d+;[a-zA-Z]{2};[a-zA-Z0-9]{3,4};([gG][lL]|[mM][tT])\|)+$/g))return!1;if(parseInt(e[0],10)===d.version&&e[1]===d.productVariantCode)for(var f,g=function(a,c){if(b&&c.layer===parseInt(f[0],10)&&c.component===f[1]){var d="#"+f[1]+"_"+f[2],e=$jq(d);if(0===e.length)b=!1;else{-1===e.attr("colorfinish").indexOf(f[3])&&(b=!1)}}},h=2;h<e.length-1&&(f=e[h].split(";"),$jq.each(d.selection,g),b);h++);else b=!1;return b},Bose.colorSelectorSlider.selectColor=function(){var a=$jq(this),b=a.attr("title"),c=a.attr("id"),d=c.split("_"),e=d[0].toLowerCase(),f=d[1].toLowerCase(),g={};g.selectedComponent=e,g.selectedColor=f,g.selectedColorDesc=b,Bose.colorSelectorSlider.selectColorChip(e,f),$jq("#selectedColorLabelFor_"+e).html(b),$jq("#selectedColorFor_"+e).css("background-color",a.css("background-color"));var h=a.attr("colorfinish"),i=h.indexOf("|"),j="#radioButtonsFor_"+e,k="#finishLabel_"+e;if(-1===i){var l="input[name="+e+"][value="+h+"]";$jq(j).hide(),$jq(k).html(Bose.Utils.getGraniteTranslation(h)),g.selectedFinish=h.toUpperCase(),$jq(l).length>0&&$jq(l).click()}else $jq(k).html(""),$jq(j).show();Bose.colorSelectorSlider.refreshImageForFinish(g)},Bose.colorSelectorSlider.selectFinish=function(){var a=$jq(this),b={},c=a.attr("name").toLowerCase();b.selectedFinish=a.val().toUpperCase(),b.selectedComponent=c,Bose.colorSelectorSlider.refreshChipsForFinish(b),Bose.colorSelectorSlider.refreshImageForFinish(b)},Bose.colorSelectorSlider.refreshImageForFinish=function(a){for(var b=$jq("#color_selection_data").data("value"),c=$jq("#color_selection_data").data("component-part-grouping"),d=$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val(),e=!1,f="",g=d.split("|"),h=2;h<g.length-1;h++){var i=g[h].split(";"),j=c[i[1]];if(i[1]===a.selectedComponent&&(a.selectedFinish&&i[3]!==a.selectedFinish&&(i[3]=a.selectedFinish,e=!0),a.selectedColor&&i[2]!==a.selectedColor&&(i[2]=a.selectedColor,e=!0)),-1===JSON.stringify(c).indexOf(i[1])&&(f=f+i[0]+";"+i[1]+";"+i[2]+";"+i[3]+"|"),void 0!==j){f=f+i[0]+";"+i[1]+";"+i[2]+";"+i[3]+"|";for(var k=j.split("|"),l=0;l<k.length;l++){var m=k[l],n=m.split("-");f=f+n[1]+";"+n[0]+";"+i[2]+";"+i[3]+"|"}}}e&&(f=b.version+"|"+b.productVariantCode+"|"+f,$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val(f),Bose.colorSelectorSlider.validateComponents(f)&&(Bose.customizableProduct.setScene7Image(f),Bose.SocialMedia.setOptions({refreshShortURL:!0}),Bose.colorSelectorSlider.setOgImage()))},Bose.colorSelectorSlider.refreshChipsForFinish=function(a){var b="#selectedColorFor_"+a.selectedComponent,c=a.selectedFinish,d="-finish"+a.selectedFinish,e=$jq(".colorsFor_"+a.selectedComponent),f=e.find(".bose-customComponentColorGroup:not('.bose-customComponentColorGroup__anodized')").find(".bose-customComponentColorGroup__colorButton"),g=e.find(".bose-customComponentColorGroup.bose-customComponentColorGroup__anodized").find(".bose-customComponentColorGroup__colorButton");$jq(b).removeClass(function(a,b){return(b.match(/(^|\s)-finish\S+/g)||[]).join(" ")}).addClass(d),f.each(function(){-1!==$jq(this).attr("colorfinish").indexOf(c)&&$jq(this).removeClass(function(a,b){return(b.match(/(^|\s)-finish\S+/g)||[]).join(" ")}).addClass(d)}),g.addClass("-finishAD")},Bose.colorSelectorSlider.resizeHandler=function(){$jq(Bose.colorSelectorSlider.slider).hasClass("slick-initialized")&&$jq("li.slick-active Button").click(),$jq(".fancybox-outer").css("overflow-y","auto")},Bose.colorSelectorSlider.setOgImage=function(){if($jq(".bose-customizableProduct__image").length){var a=$jq(".bose-customizableProduct__image").attr("src");$jq('meta[property="og:image"]').attr("content",a)}},$jq(document).ready(function(){Bose.colorSelectorSlider.init()}),$jq(window).resize(function(){Bose.colorSelectorSlider.resizeHandler()});var Bose=Bose||{};Bose.ProductOverview=function(){function a(){$jq(c.categoryTile).length<=d&&$jq(c.loadMore).hide(),$jq(c.categoryTile).slice(0,d).show(),$jq(c.loadMore).on("click",b)}function b(a){a.preventDefault();var b=$jq(c.categoryTileHidden),e=$jq(c.buttonContainer);b.slice(0,d).show(),0===$jq(c.categoryTileHidden).length&&($jq(this).hide(),e.show())}var c={loadMore:".js-buttonLink__loadMoreProducts",categoryTile:".bose-categoryTile",categoryTileHidden:".bose-categoryTile:hidden",buttonContainer:".bose-productOverview__buttonContainer"},d=12;return{init:a,_selector:c}}(),$jq(document).ready(function(){Bose.ProductOverview.init()});var Bose=Bose||{};Bose.ShoppingCart=function(){function a(){Gridle.isActive("small")&&(e=$jq(g.footer),f=$jq(g.orderSummary),f.addClass(h.fixed+" "+h.fixedToBottom),$jq(document).on("click",g.toggleIcon,d),e.waypoint({handler:b,offset:"90%"}),$jq(g.reviewStep).waypoint({handler:c,offset:"bottom-in-view"}))}function b(a){"down"===a&&$jq(g.orderSummary).removeClass(h.fixed+" "+h.fixedToBottom)}function c(){$jq(g.orderSummary).addClass(h.fixed+" "+h.fixedToBottom)}function d(a){a.stopImmediatePropagation();var b=$jq(this),c=b.find(g.boseIcon),d=b.closest(g.orderSummary);d.hasClass(h.fixedToBottom)?(c.removeClass(h.iconUpWhite).addClass(h.iconDownWhite),d.removeClass(h.fixedToBottom+" "+h.animateDown).addClass(h.moveToTop)):(d.addClass(h.animateDown+" "+h.fixed+" "+h.fixedToBottom).removeClass(h.moveToTop),c.removeClass(h.iconDownWhite).addClass(h.iconUpWhite))}var e,f,g={orderSummary:".bose-shoppingCart",toggleIcon:".js-bose-toggleSummary",footer:".bose-footer",totalPriceSection:".js-bose-paymentTotalPrice",boseIcon:".bose-icon",reviewStep:"#step_review"},h={fixed:"-fixed",fixedToBottom:"-fixedToBottom",moveToTop:"-expandToTop",animateDown:"-animateDown",iconUpWhite:"bose-icon--carretUp -white",iconDownWhite:"bose-icon--carretDown -white"};return{init:a,_selectors:g,_classes:h}}(),$jq(document).ready(function(){Bose.ShoppingCart.init()});
var Bose=Bose||{};Bose.ArticleAppliesTo=Bose.ArticleAppliesTo||{},Bose.ArticleAppliesTo.init=function(){Bose.ArticleAppliesTo.showMoreButton=$jq(".bose-list__showmore"),Bose.ArticleAppliesTo.showMoreButton.on("click",Bose.ArticleAppliesTo.showItems)},Bose.ArticleAppliesTo.showItems=function(a){a.preventDefault();var b=$jq(this);b.hide(),b.parents(".bose-list--appliesToList").find(".bose-list__listitem--hidden").removeClass("bose-list__listitem--hidden")},$jq(document).ready(function(){Bose.ArticleAppliesTo.init()});
